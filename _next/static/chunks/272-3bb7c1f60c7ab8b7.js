"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[272],{83504:function(e,t,n){var r=n(85893),i=n(68527),a=n(1950),l=n(62665),o=n(24871),s=n(96486),c=n(67294),u=n(63091),f=n(70577);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){d(e,t,n[t])}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}t.Z=function(e){var t=e.title,n=e.routes,d=e.children,b=e.p,v=p(e,["title","routes","children","p"]),x=(0,l.Z)().session,y=(0,c.useState)(n),j=y[0],m=y[1];return(0,c.useEffect)((function(){if(null===x||void 0===x?void 0:x.user){var e=!0,t=!1,n=void 0;try{for(var r,i=j[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.minRole==u.u.ContentAdmin?a.disabled=!(0,f.SL)(x.user.role):a.minRole==u.u.ADMIN&&(a.disabled=!(0,f.GJ)(x.user.role))}}catch(l){t=!0,n=l}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}m((0,s.cloneDeep)(j))}),[null===x||void 0===x?void 0:x.user]),(0,r.jsxs)(i.xu,{display:"flex",children:[(0,r.jsx)(o.Z,h({routes:j,title:t},v)),(0,r.jsx)(a.ZP,{className:"side-card",ml:"4",width:"100%",p:null!==b&&void 0!==b?b:6,pb:"1",children:d})]})}},99901:function(e,t,n){var r=n(85893),i=n(11604),a=n(20949),l=n(41664),o=n(11163);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=n(67294).forwardRef((function(e,t){var n=e.isActive,l=e.icon,o=e.children,s=u(e,["isActive","icon","children"]);return(0,r.jsxs)(i.m$.a,c({"aria-current":n?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:t,fontSize:"1rem",fontWeight:"bold",color:(0,a.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,a.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},s,{children:[l&&(0,r.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:l}),(0,r.jsx)(i.m$.span,{children:o})]}))}));t.Z=function(e){var t,n=e.href,a=e.icon,s=e.children,d=e.query,h=e.exactPath,p=void 0!==h&&h,b=u(e,["href","icon","children","query","exactPath"]),v=(0,o.useRouter)().asPath;return t=p?v.split("?")[0]==encodeURI(n):v.startsWith(encodeURI(n)),(0,r.jsx)(i.m$.div,c({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},b,{children:(0,r.jsx)(l.default,{href:{pathname:n,query:d},passHref:!0,children:(0,r.jsx)(f,{isActive:t,icon:a,children:s})})}))}},24871:function(e,t,n){var r=n(85893),i=n(68527),a=n(1950),l=n(11163),o=n(67294),s=n(99901);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function f(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e){var t=e.routes,n=(e.pathname,e.contentRef,f(e,["routes","pathname","contentRef"]));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Kq,{as:"ul",children:t.map((function(e){return e.disabled?null:(0,r.jsx)(s.Z,u({as:"li",href:e.path,icon:e.icon},n,{children:(0,r.jsx)("span",{children:e.title})}),e.path)}))})})}t.Z=function(e){var t=e.routes,n=e.title,s=f(e,["routes","title"]),c=(0,l.useRouter)().pathname,h=o.useRef(null);return(0,r.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,r.jsx)(a.ZP,{p:"5",className:"side-card",children:(0,r.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:n})}),(0,r.jsx)(a.ZP,u({p:"0",className:"side-card"},s,{children:(0,r.jsx)(i.xu,{ref:h,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,r.jsx)(d,u({routes:t,pathname:c,contentRef:h},s))})}))]})}},13520:function(e,t,n){var r=n(85893),i=n(68527),a=n(99901),l=n(11163),o=n(67294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function u(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e){var t=e.routes,n=(e.pathname,e.contentRef,e.query),l=u(e,["routes","pathname","contentRef","query"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Ug,{as:"ul",children:t.map((function(e){return e.disabled?null:(0,r.jsx)(a.Z,c({query:n,as:"li",href:e.path,icon:e.icon},l,{children:(0,r.jsx)("span",{children:e.title})}),e.path)}))})})}t.Z=function(e){var t=e.routes,n=e.showBorder,a=void 0===n||n,s=u(e,["routes","showBorder"]),d=(0,l.useRouter)().pathname,h=o.useRef(null);return(0,r.jsxs)(i.gC,{alignItems:"left",width:"100%",children:[(0,r.jsx)(f,c({routes:t,pathname:d,contentRef:h},s)),a&&(0,r.jsx)(i.iz,{})]})}},50272:function(e,t,n){n.r(t),n.d(t,{adminSubLinks:function(){return j},TimeSpanSelect:function(){return g}});var r=n(34051),i=n.n(r),a=n(85893),l=n(68527),o=n(11391),s=n(37611),c=n(83504),u=n(30092),f=n(13520),d=n(96486),h=n(67294),p=n(41039),b=n(6760),v=n(84696),x=n(16586);function y(e,t,n,r,i,a,l){try{var o=e[a](l),s=o.value}catch(c){return void n(c)}o.done?t(s):Promise.resolve(s).then(r,i)}var j=(0,d.find)(p.xt,(function(e){return 0==e.id})).subLinks;function m(e){return Math.floor(e/1e3)+"ms"}t.default=function(){var e=(0,h.useState)(null),t=e[0],n=e[1],r=(0,h.useState)(null),o=r[0],d=r[1],x=(0,h.useState)(null),O=x[0],w=x[1];(0,h.useEffect)((function(){t&&P(t)}),[t]);var P=function(){var e,t=(e=i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.rR.get("/stats/action/descs").then((function(e){return w(e.data)})),e.next=3,v.rR.get("/stats/user/dashboard/".concat(b.x,"?span=").concat(t,"&type=2"));case 3:n=e.sent,d(n.data);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){y(a,r,i,l,o,"next",e)}function o(e){y(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),S=function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value,c=o.datas[s];if(c)t.push(c);else{var u=[];o.labels.forEach((function(e){return u.push(0)})),t.push({label:O[s],data:u})}}}catch(f){r=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u.Z,{children:(0,a.jsxs)(c.Z,{title:"\u7ba1\u7406\u5458",routes:p.xt,children:[(0,a.jsx)(l.kC,{justifyContent:"space-between",alignItems:"center",children:(0,a.jsx)(f.Z,{routes:j,exactPath:!0})}),(0,a.jsxs)(l.kC,{p:"4",justify:"space-between",alignItems:"center",children:[(0,a.jsx)(l.xv,{layerStyle:"textSecondary",fontSize:".9rem",children:"\u7f51\u7ad9\u8fd0\u884c\u60c5\u51b5\uff0c\u8fd9\u91cc\u7684\u7edf\u8ba1\u662f 0.75\uff0c\u4e5f\u5c31\u662f\u8017\u65f6\u6392\u5728\u524d 25% \u7684"}),(0,a.jsx)(g,{onChange:function(e){return n(e)}})]}),o&&O&&(0,a.jsxs)(l.gC,{alignItems:"left",spacing:"6",children:[(0,a.jsxs)(l.Ug,{children:[(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u7528\u6237\u6d4f\u89c8",labels:o.labels,datasets:S([200])})}),(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u7528\u6237\u4e92\u52a8",labels:o.labels,datasets:S([400,403,404,500])})})]}),(0,a.jsx)(l.iz,{}),(0,a.jsxs)(l.Ug,{children:[(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u7528\u6237\u6d4f\u89c8",labels:o.labels,datasets:S([102,103,104]),ticks:m})}),(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u7528\u6237\u4e92\u52a8",labels:o.labels,datasets:S([107,108])})})]}),(0,a.jsx)(l.iz,{}),(0,a.jsxs)(l.Ug,{children:[(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u9996\u9875\u6d4f\u89c8",labels:o.labels,datasets:S([105,106]),ticks:m})}),(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u67e5\u770b\u7528\u6237\u4fe1\u606f",labels:o.labels,datasets:S([109]),ticks:m})})]}),(0,a.jsx)(l.iz,{}),(0,a.jsx)(l.Ug,{children:(0,a.jsx)(l.Uc,{width:"48%",children:(0,a.jsx)(s.ZP,{title:"\u9996\u9875\u6d4f\u89c8",labels:o.labels,datasets:S([110]),ticks:m})})})]})]})})})};var g=function(e){var t,n=null!==(t=x.Z.get("timeSpan"))&&void 0!==t?t:"3",r=(0,h.useState)(Number(n)),i=r[0],l=r[1];(0,h.useEffect)((function(){e.onChange(i)}),[i]);return(0,a.jsxs)(o.Ph,{size:"sm",value:i,onChange:function(e){return t=e.currentTarget.value,x.Z.set("timeSpan",t),void l(Number(t));var t},width:"300px",children:[(0,a.jsx)("option",{value:72,children:"\u6700\u8fd1 3 \u5929"}),(0,a.jsx)("option",{value:168,children:"\u6700\u8fd1 7 \u5929"}),(0,a.jsx)("option",{value:336,children:"\u6700\u8fd1 14 \u5929"}),(0,a.jsx)("option",{value:720,children:"\u6700\u8fd1 30 \u5929"}),(0,a.jsx)("option",{value:1440,children:"\u6700\u8fd1 60 \u5929"})]})}},37611:function(e,t,n){var r=n(85893),i=(n(67294),n(53328)),a=n(55376),l=n(85384),o=n.n(l),s=n(79495);i.kL.register(i.uw,i.f$,i.od,i.ZL,i.jn,i.Dx,i.u,i.De);t.ZP=function(e){var t=e.title,n=void 0===t?"\u6f14\u793a\u56fe\u8868":t,i=e.labels,l=void 0===i?c:i,o=e.datasets,s=void 0===o?u:o,f=e.ticks,h={responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{font:{size:11,color:"#fff"}}},tooltip:f&&{callbacks:{label:function(e){return f(e.parsed.y)}}},title:{display:!1,text:n}},scales:{x:{grid:{display:!1}},y:{min:0,grid:{display:!1},ticks:f&&{callback:function(e){return f(e)}}}}},p={labels:l,datasets:s};return d(s),(0,r.jsx)(a.x1,{options:h,data:p})};var c=["January","February","March","April","May","June","July"],u=[{label:"Dataset 1",data:c.map((function(){return o().datatype.number({min:0,max:1e3})})),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)"},{label:"Dataset 2",data:c.map((function(){return o().datatype.number({min:0,max:1e3})})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}],f=[s.ek,s.sl,s.$C,s.Q6,s.iN,s.er,s.iQ,s.$y,s.LR,s.pl,s.QN,s.ht];var d=function(e){for(var t=0;t<e.length;t++){var n=f[(r=t)%f.length][3-Math.floor(r/f.length)];e[t].borderColor=n,e[t].backgroundColor=n}var r}},6760:function(e,t,n){n.d(t,{x:function(){return r}});var r="-1"}}]);