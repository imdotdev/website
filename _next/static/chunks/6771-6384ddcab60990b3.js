"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6771],{66771:function(e,n,t){t.r(n),t.d(n,{default:function(){return R}});var r=t(34051),i=t.n(r),l=t(85893),s=t(67294),a=t(97375),o=t(28609),c=t(68527),u=t(34651),x=t(20949),h=t(15193),d=t(88718),f=t(4612),g=t(2839),p=t(89583),v=t(84696),m=t(64762),j=t(16586),y=t(11163),w=t(95978),S=t(62665),b=function(e){var n=e.size,t=void 0===n?"md":n,r=e.bg,i=void 0===r?"linear-gradient(to right bottom, rgb(52, 102, 246), rgb(124, 58, 237))":r;return(0,l.jsx)(h.zx,{size:t,onClick:e.onClick,color:"white",bg:i,_hover:{bgGradient:"radial(yellow.400, pink.200)"},fontSize:".9rem",leftIcon:(0,l.jsx)(p.hJX,{fontSize:"1.0rem"}),children:"\u4f7f\u7528 GitHub \u767b\u5f55"})},z=t(56184);function k(e,n,t,r,i,l,s){try{var a=e[l](s),o=a.value}catch(c){return void t(c)}a.done?n(o):Promise.resolve(o).then(r,i)}function C(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function s(e){k(l,r,i,s,a,"next",e)}function a(e){k(l,r,i,s,a,"throw",e)}s(void 0)}))}}var R=function(){var e=(0,S.Z)().useLogin,n=(0,a.qY)(),t=n.isOpen,r=n.onOpen,k=n.onClose,R=(0,o.pm)(),I=(0,y.useRouter)(),_=(0,s.useState)(""),P=_[0],Z=_[1],D=(0,s.useState)(!1),U=D[0],A=D[1],E=(function(){var n=C(i().mark((function n(t){var r,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.rR.post("/user/login",{email:t});case 2:r=n.sent,(0,m.Fr)(r.data.token),l=j.Z.get("current-page"),e(),l?(j.Z.remove("current-page"),I.push(l)):I.push("/");case 7:case"end":return n.stop()}}),n)})))}(),function(){var e=C(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.oH)(P,!1);case 2:if(!(n=e.sent)){e.next=6;break}return R({description:n,status:"error",duration:2e3,isClosable:!0}),e.abrupt("return");case 6:return e.next=8,v.rR.post("/user/login/email",{email:P});case 8:k(),A(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return(0,l.jsxs)(c.xu,{height:"100vh",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:[(0,l.jsx)(u.Ee,{src:"/login-bg.svg",height:"100%",position:"absolute"}),(0,l.jsxs)(c.xu,{textAlign:"center",display:"flex",alignItems:"center",flexDirection:"column",children:[(0,l.jsx)(g.ZP,{width:"12rem"}),(0,l.jsx)(c.xv,{mt:"8",fontSize:"1.1rem",fontWeight:"500",children:"\u6b22\u8fce\u52a0\u5165 RustCn\uff0c\u4e00\u8d77\u6765\u6253\u9020\u4e13\u5c5e\u4e8e\u81ea\u5df1\u7684 Rust \u4e2d\u6587\u793e\u533a\u5427\uff01"}),U?(0,l.jsxs)(c.Ug,{className:"bordered",p:"4",spacing:"4",mt:"4",children:[(0,l.jsx)(p.P58,{fontSize:"1.6rem",color:"brand"}),(0,l.jsx)(c.xv,{fontSize:"1.2rem",children:"Check your inbox for a secure link to sign in."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(c.gC,{mt:"2",p:"5",align:"left",spacing:"2",children:[(0,l.jsxs)(c.xu,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,l.jsx)("svg",{width:"48px",height:"48px",fill:(0,x.ff)("teal","white"),version:"1.1",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M7.036 14.836a1.003 1.003 0 01-1.418 0l-.709-.709a6.518 6.518 0 119.218-9.218l.71.71a1.003 1.003 0 010 1.417l-.71.71a1.003 1.003 0 01-1.418 0L12 7.035A3.51 3.51 0 007.036 12l.71.71a1.003 1.003 0 010 1.417l-.71.71zm2.128 3.546a1.003 1.003 0 010-1.418l.709-.71a1.003 1.003 0 011.418 0l.709.71A3.51 3.51 0 0016.964 12l-.71-.71a1.003 1.003 0 010-1.417l.71-.71a1.003 1.003 0 011.418 0l.709.71a6.518 6.518 0 11-9.218 9.218l-.71-.71zm0-9.218a1.504 1.504 0 012.127 0l3.545 3.545a1.504 1.504 0 01-2.127 2.127l-3.545-3.545a1.504 1.504 0 010-2.127z",fillRule:"evenodd"})}),(0,l.jsx)(c.xv,{ml:"4",layerStyle:"textSecondary",children:"\u5168\u9762\u7684\u3001\u9ad8\u8d28\u91cf\u7684 Rust \u5b66\u4e60\u8d44\u6599"})]}),(0,l.jsxs)(c.xu,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,l.jsx)("svg",{width:"48px",height:"48px",fill:(0,x.ff)("teal","white"),version:"1.1",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M9 2v1a1 1 0 001 1h4a1 1 0 001-1V2h1a2 2 0 012 2v16a2 2 0 01-2 2H8a2 2 0 01-2-2V4a2 2 0 012-2h1zm1 16a1 1 0 000 2h4a1 1 0 000-2h-4z",fillRule:"evenodd"})}),(0,l.jsx)(c.xv,{ml:"4",layerStyle:"textSecondary",children:"Rust \u70ed\u70b9\u8d44\u8baf\u548c\u6280\u672f\u6587\u7ae0"})]}),(0,l.jsxs)(c.xu,{display:"flex",flexDirection:"row",alignItems:"center",children:[(0,l.jsx)("svg",{width:"48px",height:"48px",fill:(0,x.ff)("teal","white"),version:"1.1",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{d:"M19 21l-3-.5.786-4.321A1 1 0 0015.802 15H8.198a1 1 0 00-.984 1.179L8 20.5 5 21a1 1 0 01-1-1v-.5c0-4.142 3.582-7.5 8-7.5s8 3.358 8 7.5v.5a1 1 0 01-1 1zm-7-2a1 1 0 110-2 1 1 0 010 2zm0-8a4 4 0 110-8 4 4 0 010 8z",fillRule:"evenodd"})}),(0,l.jsx)(c.xv,{ml:"4",layerStyle:"textSecondary",children:"\u5b9a\u5236\u4e13\u5c5e\u4e8e\u4f60\u7684\u4e2a\u6027\u5316\u793e\u533a"})]})]}),(0,l.jsxs)(c.Ug,{mt:"6",spacing:"3",children:[(0,l.jsx)(b,{onClick:function(){return I.asPath!=z.N.Login&&j.Z.set("current-page",I.asPath),(0,m.gy)(),void(window.location.href="https://github.com/login/oauth/authorize?client_id=a61e9aa0e494bf12a195&redirect_url=http://localhost:3000/login/github")},size:"lg"}),(0,l.jsx)(c.xv,{layerStyle:"textSecondary",children:"OR"}),(0,l.jsx)(h.hU,{layerStyle:"textSecondary",variant:"outline","aria-label":"login with email",icon:(0,l.jsx)(p.SRX,{}),onClick:r})]}),(0,l.jsxs)(c.xv,{mt:"6",fontSize:".7rem",layerStyle:"textSecondary",children:["\u5982\u679c\u7ee7\u7eed\uff0c\u5219\u8868\u793a\u4f60\u540c\u610f\u6211\u4eec\u7684",(0,l.jsx)(c.rU,{textDecoration:"underline",children:"\u670d\u52a1\u6761\u6b3e"}),"\u548c",(0,l.jsx)(c.rU,{textDecoration:"underline",children:"\u9690\u79c1\u653f\u7b56"})]})]})]}),(0,l.jsxs)(d.u_,{isOpen:t,onClose:k,isCentered:!0,children:[(0,l.jsx)(d.ZA,{}),(0,l.jsx)(d.hz,{mt:"0",px:"10",py:"6",children:(0,l.jsx)(d.fe,{children:(0,l.jsxs)(c.gC,{alignItems:"left",spacing:"5",children:[(0,l.jsx)(c.xv,{layerStyle:"textSecondary",fontWeight:"550",children:"Sign in using a secure link"}),(0,l.jsx)(f.II,{value:P,onChange:function(e){return Z(e.currentTarget.value)},placeholder:"enter your email address",_focus:{border:null}}),(0,l.jsx)(h.zx,{colorScheme:"brand",onClick:E,children:"Submit"})]})})})]})]})}},2839:function(e,n,t){var r=t(85893),i=t(20949),l=t(68527),s=t(34651);t(67294);n.ZP=function(e){(0,i.ff)("#151618","#fff");var n=(0,i.If)().colorMode;return(0,r.jsx)("a",{href:"/",children:(0,r.jsxs)(l.Ug,{cursor:"pointer",spacing:"1",children:[(0,r.jsx)(s.Ee,{width:"12",src:"dark"==n?"/dark-logo.png":"/light-logo.png"}),e.showText&&(0,r.jsx)(l.xv,{fontWeight:"600",fontSize:"xl",children:"ustCn"})]})})}}}]);