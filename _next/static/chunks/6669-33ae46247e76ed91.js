"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6669],{1429:function(e,n,r){var t=r(34051),s=r.n(t),i=r(85893),c=r(15193),l=r(67294),o=r(89583),a=r(84696);function d(e,n,r,t,s,i,c){try{var l=e[i](c),o=l.value}catch(a){return void r(a)}l.done?n(o):Promise.resolve(o).then(t,s)}n.Z=function(e){var n=e.size,r=void 0===n?"md":n,t=e.buttonIcon,u=void 0===t||t,x=(0,l.useState)(e.followed),h=x[0],j=x[1],f=function(){var n,r=(n=s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.rR.post("/interaction/follow/".concat(e.targetID));case 2:j(!h);case 3:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,s){var i=n.apply(e,r);function c(e){d(i,t,s,c,l,"next",e)}function l(e){d(i,t,s,c,l,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,i.jsx)(i.Fragment,{children:h?(0,i.jsx)(c.zx,{size:r,onClick:f,_focus:{border:null},leftIcon:u?(0,i.jsx)(o.l_A,{}):null,children:"\u5df2\u5173"}):(0,i.jsx)(c.zx,{size:r,variant:"outline",leftIcon:u?(0,i.jsx)(o.wEH,{}):null,onClick:f,_focus:{border:null},children:"\u5173\u6ce8"})})}},53107:function(e,n,r){var t=r(34051),s=r.n(t),i=r(85893),c=r(28609),l=r(88718),o=r(68527),a=r(6886),d=r(11391),u=r(15193),x=r(97375),h=r(7657),j=r(67294),f=r(84696),p=r(87079),v=r(92178);function m(e,n,r,t,s,i,c){try{var l=e[i](c),o=l.value}catch(a){return void r(a)}l.done?n(o):Promise.resolve(o).then(t,s)}function g(e){return function(){var n=this,r=arguments;return new Promise((function(t,s){var i=e.apply(n,r);function c(e){m(i,t,s,c,l,"next",e)}function l(e){m(i,t,s,c,l,"throw",e)}c(void 0)}))}}n.Z=function(e){var n=e.id,r=e.isOpen,t=e.onClose,x=e.onChange,h=(0,c.pm)(),p=(0,j.useState)(5),v=p[0],m=p[1],w=function(){var e=g(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.rR.post("/reward/add",{id:n,reward:v});case 2:t(),h({description:"\u8ffd\u52a0\u60ac\u8d4f\u6210\u529f",status:"success",duration:3e3,isClosable:!0}),x(v),m(5);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(l.u_,{isOpen:r,onClose:t,children:[(0,i.jsx)(l.ZA,{}),(0,i.jsxs)(l.hz,{children:[(0,i.jsx)(l.xB,{children:"\u8ffd\u52a0\u60ac\u8d4f"}),(0,i.jsx)(o.iz,{}),(0,i.jsxs)(l.fe,{mt:"4",children:[(0,i.jsx)(a.bZ,{status:"warning",children:"\u82e5\u4f60\u5bf9\u5185\u5bb9\u4e5f\u611f\u5174\u8da3\uff0c\u53ef\u8ffd\u52a0\u60ac\u8d4f\u79ef\u5206\uff0c\u8ba9\u5b83\u88ab\u66f4\u591a\u4eba\u770b\u5230"}),(0,i.jsxs)(o.Ug,{mt:"6",children:[(0,i.jsx)(o.xv,{children:"\u8ffd\u52a0"}),(0,i.jsxs)(d.Ph,{value:v,onChange:function(e){m(Number(e.target.value))},size:"sm",width:"120px",_focus:{border:null},children:[(0,i.jsx)("option",{value:5,children:"5 \u79ef\u5206"}),(0,i.jsx)("option",{value:10,children:"10 \u79ef\u5206"}),(0,i.jsx)("option",{value:20,children:"20 \u79ef\u5206"}),(0,i.jsx)("option",{value:30,children:"30 \u79ef\u5206"}),(0,i.jsx)("option",{value:50,children:"50 \u79ef\u5206"}),(0,i.jsx)("option",{value:100,children:"100 \u79ef\u5206"})]})]}),(0,i.jsx)(z,{id:n})]}),(0,i.jsxs)(l.mz,{children:[(0,i.jsx)(u.zx,{variant:"ghost",mr:3,onClick:t,children:"\u53d6\u6d88"}),(0,i.jsx)(u.zx,{onClick:w,children:"\u786e\u8ba4\u8ffd\u52a0"})]})]})]})};var z=function(e){var n=e.id,r=(0,x.qY)(),t=r.isOpen,c=r.onOpen,a=r.onClose,d=(0,j.useState)(null),u=d[0],m=d[1],z=(0,j.useState)(null),w=z[0],C=z[1];(0,j.useEffect)((function(){f.rR.get("/reward/users?id=".concat(n,"&limit=5")).then((function(e){return m(e.data)}))}),[]);var k=function(){var e=g(s().mark((function e(){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=5;break}return e.next=3,f.rR.get("/reward/users?id=".concat(n));case 3:(r=e.sent).data&&C(r.data);case 5:c();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[u&&u.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.iz,{my:"4"}),(0,i.jsxs)(o.Ug,{children:[u.map((function(e){return(0,i.jsx)(v.Z,{userId:e.user.id,children:(0,i.jsx)(h.qE,{size:"sm",src:e.user.avatar,as:"a",href:(0,p.Ab)(e.user)})})})),(0,i.jsx)(o.rU,{onClick:k,children:(0,i.jsx)(o.xv,{fontSize:"sm",children:"\u7b49\u4eba\u5df2\u8ffd\u52a0\u8d5e\u8d4f"})})]}),(0,i.jsx)(o.iz,{mt:"4"})]}),(0,i.jsxs)(l.u_,{isOpen:t,onClose:a,children:[(0,i.jsx)(l.ZA,{}),(0,i.jsxs)(l.hz,{children:[(0,i.jsx)(l.xB,{children:"\u79ef\u5206\u8d5e\u8d4f\u8be6\u60c5"}),(0,i.jsx)(o.iz,{}),w&&(0,i.jsx)(l.fe,{children:(0,i.jsx)(o.gC,{alignItems:"left",children:w.map((function(e){return(0,i.jsxs)(o.kC,{alignItems:"center",justify:"space-between",children:[(0,i.jsx)(v.Z,{userId:e.user.id,children:(0,i.jsxs)(o.Ug,{children:[(0,i.jsx)(h.qE,{src:e.user.avatar}),(0,i.jsx)(o.xv,{children:e.user.nickname})]})}),(0,i.jsxs)(o.xv,{children:[e.reward,"\u79ef\u5206"]})]})}))})})]})]})]})}},86669:function(e,n,r){var t=r(34051),s=r.n(t),i=r(85893),c=r(97375),l=r(28609),o=r(68527),a=r(15193),d=r(47398),u=r(96356),x=r(88718),h=r(6886),j=r(1429),f=r(85832),p=r(53107),v=r(92178),m=r(67294),g=r(8193),z=r(89583),w=r(56184),C=r(26822),k=r(84696),b=r(46870),y=r(87079);function S(e,n,r,t,s,i,c){try{var l=e[i](c),o=l.value}catch(a){return void r(a)}l.done?n(o):Promise.resolve(o).then(t,s)}n.Z=function(e){var n,r,t=e.data,Z=e.onChange,I=e.onEdit,_=e.onDelete,O=e.onCancelAdopt,E=e.showTranslate,P=e.onRemoveAdopt,R=(0,c.qY)(),A=R.isOpen,U=R.onOpen,q=R.onClose,D=(0,c.qY)(),N=D.isOpen,F=D.onOpen,J=D.onClose,T=(0,m.useRef)(),Y=(0,l.pm)(),M=function(){var e,n=(e=s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.rR.post("/translate/subject/adopt/".concat(t.id));case 2:n=e.sent,Y({description:"\u8ba4\u9886\u6210\u529f",status:"success",duration:3e3,isClosable:!0}),t.tid=n.data.tid,t.tlor=n.data.tlor,Z(),J();case 8:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,s){var i=e.apply(n,r);function c(e){S(i,t,s,c,l,"next",e)}function l(e){S(i,t,s,c,l,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.gC,{alignItems:"left",spacing:"4",children:[(0,i.jsxs)(o.Ug,{fontSize:"0.85rem",layerStyle:"textThird",spacing:"2",children:[t.tlor?(0,i.jsx)(v.Z,{userId:t.tlor.id,children:(0,i.jsxs)(o.xv,{as:"a",href:(0,y.Ab)(t.tlor),fontWeight:"extrabold",children:[void 0==t.tled?"\u6b63\u5728\u7ffb\u8bd1":"\u7ffb\u8bd1\u5b8c\u6210",": ",t.tlor.nickname]})}):(0,i.jsx)(a.zx,{size:"xs",onClick:F,_focus:{border:null},variant:"outline",children:"\u8ba4\u9886\u9009\u9898"}),(0,i.jsx)(o.xv,{children:"|"}),(0,i.jsx)(v.Z,{userId:t.creator.id,children:(0,i.jsxs)(o.xv,{as:"a",href:(0,y.Ab)(t.creator),children:["\u9009\u9898: ",t.creator.nickname]})}),(0,i.jsx)(o.xv,{children:"|"}),(0,i.jsx)(o.xv,{children:(0,C.cg)(t.type)}),(0,i.jsx)(o.xv,{children:"|"}),(0,i.jsxs)(o.xv,{children:[(0,b.Zh)(t.tled?t.tled:t.adopted?t.adopted:t.created),t.tled?"\u7ffb\u8bd1\u5b8c\u6210":t.adopted?"\u8ba4\u9886":"\u521b\u5efa"]})]}),(0,i.jsx)(d.u,{label:t.tled?"\u67e5\u770b\u8bd1\u6587":"\u8bd1\u6587\u8fd8\u672a\u5b8c\u6210",placement:"left",children:(0,i.jsx)(o.X6,{size:"sm",width:"fit-content",noOfLines:1,as:"a",href:t.tled?t.type==C.iJ.Post?(0,y.hK)(t.tlor,t.tid):t.type==C.iJ.Series?(0,y.qs)(t.tid):(0,y.S4)(t.tid):null,children:t.title})}),(0,i.jsx)(o.rU,{href:t.url,children:(0,i.jsx)(d.u,{label:"\u67e5\u770b\u539f\u6587",placement:"left",children:(0,i.jsx)(o.xv,{width:"fit-content",layerStyle:"textSecondary",children:t.stitle})})}),(0,i.jsxs)(o.kC,{justify:"space-between",children:[(0,i.jsxs)(o.Ug,{fontSize:"0.85rem",layerStyle:"textSecondary",children:[t.reward>=0&&(0,i.jsx)(d.u,{label:"\u70b9\u51fb\u8ffd\u52a0\u60ac\u8d4f\uff1a\u7ffb\u8bd1\u5b8c\u6210\u540e\uff0c\u7ffb\u8bd1\u8005\u5c06\u83b7\u53d6\u989d\u5916\u7684\u79ef\u5206\u5956\u52b1",children:(0,i.jsxs)(u.Vp,{size:"sm",mt:"2px",cursor:"pointer",onClick:function(){return U()},children:[(0,i.jsx)(z.RcD,{}),t.reward]})}),(0,i.jsx)(f.Z,{storyID:t.id,count:null!==(n=t.likes)&&void 0!==n?n:0,liked:null!==(r=t.liked)&&void 0!==r&&r,heartSize:"0.85rem",size:"sm"}),(0,i.jsx)(d.u,{label:"\u7ffb\u8bd1\u5b8c\u6210\u540e\uff0c\u4f60\u5c06\u6536\u5230\u76f8\u5e94\u7684\u901a\u77e5",children:(0,i.jsx)(o.xu,{children:(0,i.jsx)(j.Z,{size:"xs",targetID:t.id,followed:t.followed})})})]}),(0,i.jsxs)(o.Ug,{fontSize:"0.85rem",layerStyle:"textSecondary",spacing:"3",children:[(0,i.jsx)(d.u,{label:"\u67e5\u770b\u9009\u9898\u5361\u7247\u548c\u8bc4\u8bba",children:(0,i.jsx)(o.xu,{cursor:"pointer",as:"a",target:"_blank",href:"/r/tsubject/".concat(t.id),children:(0,i.jsx)(g.x2q,{})})}),t.rawTags.map((function(e,n){return(0,i.jsxs)(o.xv,{as:"a",href:(0,y.M6)(e.name),children:["#",e.name]})})),E&&!t.tled&&(0,i.jsx)(a.zx,{size:"xs",as:"a",target:"_blank",href:t.type==C.iJ.Post?"".concat(w.N.Editor,"/posts?id=").concat(t.tid):t.type==C.iJ.Series?"".concat(w.N.Editor,"/series?id=").concat(t.tid):"".concat(w.N.Editor,"/courses?id=").concat(t.tid),children:"\u524d\u5f80\u7ffb\u8bd1"}),I&&!t.tled&&(0,i.jsx)(a.zx,{size:"xs",onClick:function(){return I(t)},children:"\u7f16\u8f91"}),_&&!t.tled&&(0,i.jsx)(a.zx,{size:"xs",colorScheme:"orange",onClick:function(){return _(t)},children:"\u5220\u9664"}),O&&!t.tled&&(0,i.jsx)(a.zx,{size:"xs",colorScheme:"orange",onClick:function(){return O(t)},children:"\u653e\u5f03\u8ba4\u9886"}),P&&t.adopted&&!t.tled&&(0,i.jsx)(a.zx,{size:"xs",colorScheme:"orange",onClick:P,children:"\u53d6\u6d88\u8ba4\u9886\u8d44\u683c"})]})]})]}),t&&(0,i.jsx)(p.Z,{id:t.id,isOpen:A,onClose:q,onChange:function(e){t.reward?t.reward+=e:t.reward=e,Z()}}),(0,i.jsx)(x.aR,{isOpen:N,leastDestructiveRef:T,onClose:J,children:(0,i.jsx)(x.dh,{children:(0,i.jsxs)(x._T,{children:[(0,i.jsxs)(x.fY,{fontSize:"lg",fontWeight:"bold",children:["\u8ba4\u9886\u9009\u9898: ",t.title]}),(0,i.jsxs)(x.iP,{children:[(0,i.jsxs)(h.bZ,{status:"success",children:[(0,i.jsx)(h.zM,{}),(0,i.jsxs)(o.gC,{alignItems:"left",children:[(0,i.jsx)(o.xv,{children:"\u597d\u5904:"}),(0,i.jsx)(o.xv,{children:" 1. \u7ffb\u8bd1\u5b8c\u6210\u540e\u5c06\u83b7\u53d6\u7ffb\u8bd1\u79ef\u5206\u548c\u7528\u6237\u79ef\u5206"}),(0,i.jsx)(o.xv,{children:" 2. \u7ffb\u8bd1\u7c7b\u578b\u7684\u6587\u7ae0\u7684\u63a8\u8350\u6743\u91cd\u975e\u5e38\u9ad8! "}),(0,i.jsx)(o.xv,{children:" 3. \u7ffb\u8bd1\u5bf9\u4e8e\u6280\u672f\u6c34\u5e73\u548c\u82f1\u6587\u6c34\u5e73\u7684\u63d0\u5347\u662f\u663e\u800c\u6613\u89c1\u7684!"})]})]}),(0,i.jsxs)(h.bZ,{status:"warning",children:[(0,i.jsx)(h.zM,{}),(0,i.jsxs)(o.gC,{alignItems:"left",children:[(0,i.jsx)(o.xv,{children:"\u574f\u5904:"}),(0,i.jsx)(o.xv,{children:" 1. \u957f\u65f6\u95f4\u672a\u7ffb\u8bd1\u5b8c\u6210\u4f1a\u5f71\u54cd\u4f60\u7684\u7ffb\u8bd1\u548c\u7528\u6237\u79ef\u5206"}),(0,i.jsx)(o.xv,{children:" 2. \u7ffb\u8bd1\u8d28\u91cf\u4f4e\u53ef\u80fd\u65e0\u6cd5\u4e00\u6b21\u6027\u901a\u8fc7\u5ba1\u6838"})]})]})]}),(0,i.jsxs)(x.xo,{children:[(0,i.jsx)(a.zx,{ref:T,onClick:J,children:"\u53d6\u6d88"}),(0,i.jsx)(a.zx,{colorScheme:"red",onClick:M,ml:3,children:"\u786e\u8ba4\u8ba4\u9886"})]})]})})})]})}}}]);