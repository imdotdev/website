"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8004],{68004:function(e,n,t){t.d(n,{Z:function(){return I}});var r=t(34051),i=t.n(r),s=t(85893),a=t(68527),c=t(34651),o=t(15193),l=t(7657),u=t(1950),d=t(51646),f=t(83331),h=t(67757),m=t(62665),p=t(30092),x=t(11163),g=t(67294),j=t(56184),v=t(84696),b=t(70577),y=t(1429),w=t(87609),O=t(95978),k=t(21948),S=t(13520),P=t(45351),E=t(87079),z=function(e){var n=e.tags;return(0,s.jsx)(a.Eq,{children:n.map((function(e){return(0,s.jsxs)(a.Ug,{as:"a",href:(0,E.M6)(e.name),cursor:"pointer",children:[(0,s.jsx)(c.Ee,{src:e.icon,width:"30px",borderWidth:"1px",className:"bordered"}),(0,s.jsx)(a.xv,{size:"sm",children:e.name})]})}))})},C=t(96486),N=t(57331);function Z(e,n,t,r,i,s,a){try{var c=e[s](a),o=c.value}catch(l){return void t(l)}c.done?n(o):Promise.resolve(o).then(r,i)}var I=function(e){var n=e.children,t=e.onTagLoaded,r=(0,x.useRouter)(),E=(0,m.Z)().session,I=(0,g.useState)(null),q=I[0],T=I[1],M=(0,g.useState)(null),U=M[0],D=M[1],L=(0,g.useState)(null),R=L[0],W=L[1],X=(0,g.useState)(null),J=X[0],_=X[1];(0,g.useEffect)((function(){return(0,N.Il)(!0),function(){return(0,N.Il)(!1)}}),[]),(0,g.useEffect)((function(){q&&(v.rR.get("/interaction/followed/".concat(q.id)).then((function(e){return W(e.data)})),v.rR.get("/tag/moderators?id=".concat(q.id)).then((function(e){D(e.data)})),v.rR.get("/tag/children?id=".concat(q.id,"&simple=true")).then((function(e){return _(e.data)})))}),[q]),(0,g.useEffect)((function(){if(U&&(null===E||void 0===E?void 0:E.user)){(0,b.GJ)(E.user.role)&&(q.isModerator=!0,t((0,C.cloneDeep)(q)));var e=!0,n=!1,r=void 0;try{for(var i,s=U[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){if(i.value.id==E.user.id){q.isModerator=!0,t((0,C.cloneDeep)(q));break}}}catch(a){n=!0,r=a}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}}),[U,null===E||void 0===E?void 0:E.user]);var B=function(){var e,n=(e=i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.get("/tag/info?name=".concat(r.query.name));case 2:n=e.sent,T(n.data),t(n.data);case 5:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var s=e.apply(n,t);function a(e){Z(s,r,i,a,c,"next",e)}function c(e){Z(s,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();(0,g.useEffect)((function(){r.query.name&&B()}),[r.query.name]);var G,H,$,A=r.query.name?[{title:"\u6587\u7ae0",path:"".concat(j.N.Tags,"/").concat(r.query.name),disabled:!1},{title:"\u8ba8\u8bba",path:"".concat(j.N.Tags,"/").concat(r.query.name,"/discussions"),disabled:!1},{title:"\u6587\u6863\u6559\u7a0b",path:"".concat(j.N.Tags,"/").concat(r.query.name,"/courses"),disabled:!1},{title:"\u7cfb\u5217",path:"".concat(j.N.Tags,"/").concat(r.query.name,"/series"),disabled:!1},{title:"\u7f51\u5740\u5bfc\u822a",path:"".concat(j.N.Tags,"/").concat(r.query.name,"/nav"),disabled:!1}]:[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Z,{title:h.Z.seo.title,description:h.Z.seo.description}),(0,s.jsx)(p.Z,{title:"\u6807\u7b7e-".concat(null===q||void 0===q?void 0:q.name),children:q&&q.name&&(0,s.jsxs)(a.Ug,{alignItems:"top",spacing:"4",p:"2",children:[(0,s.jsxs)(a.gC,{width:["100%","100%","70%","70%"],alignItems:"left",spacing:"2",children:[(0,s.jsxs)(u.ZP,{p:"0",children:[(0,s.jsx)(c.Ee,{src:q.cover,maxHeight:"250px"}),(0,s.jsx)(c.Ee,{src:q.icon,width:"80px",position:"relative",top:"-40px",left:"40px",className:"shadowed"}),(0,s.jsxs)(a.kC,{justifyContent:"space-between",alignItems:"center",px:"8",mt:"-1rem",children:[(0,s.jsx)(a.xu,{children:(0,s.jsx)(a.X6,{size:"lg",children:q.name})}),(0,s.jsxs)(a.xu,{children:[null!==R&&(0,s.jsx)(y.Z,{followed:R,targetID:q.id}),q.isModerator&&(0,s.jsx)(o.zx,{ml:"2",onClick:function(){return r.push("".concat(j.N.Dashboard,"/tag-moderator?id=").concat(q.id))},children:"Edit"})]})]}),(0,s.jsx)(a.kC,{justify:"space-between",px:"5",pt:"4",alignItems:"center",children:(0,s.jsx)(S.Z,{routes:A,isSidebar:!1,showBorder:!1,exactPath:!0})})]}),n]}),(0,s.jsxs)(a.gC,{width:"30%",alignItems:"left",spacing:"2",display:{base:"none",md:"flex"},children:[(0,s.jsx)(u.ZP,{className:"side-card",children:(0,s.jsxs)(a.kC,{layerStyle:"textSecondary",pt:"1",alignItems:"center",children:[(0,s.jsx)(P.Z,{tp:0,count:null!==(G=q.followers)&&void 0!==G?G:0,targetId:q.id}),(0,s.jsxs)(a.Ug,{spacing:"1",ml:"4",children:[(0,s.jsx)(a.xv,{fontWeight:"bold",children:(0,s.jsx)(w.Z,{count:null!==(H=q.posts)&&void 0!==H?H:0})}),(0,s.jsx)(a.xv,{size:"sm",children:"\u7bc7\u5185\u5bb9"})]})]})}),(0,s.jsxs)(u.ZP,{className:"side-card",children:[(0,s.jsx)(a.Ug,{children:(0,s.jsx)(a.X6,{size:"sm",children:"\u6807\u7b7e\u7b80\u4ecb "})}),(0,s.jsx)(a.xu,{mt:"2",children:(0,s.jsx)(d.J,{md:null!==($=q.md)&&void 0!==$?$:"",fontSize:"1rem"})})]}),(null===J||void 0===J?void 0:J.length)>0&&(0,s.jsxs)(u.ZP,{className:"side-card",children:[(0,s.jsx)(a.X6,{size:"sm",children:"\u5b50\u6807\u7b7e"}),(0,s.jsx)(a.xu,{mt:"4",children:(0,s.jsx)(z,{tags:J})})]}),(null===U||void 0===U?void 0:U.length)>0&&(0,s.jsxs)(u.ZP,{className:"side-card",children:[(0,s.jsxs)(a.Ug,{children:[(0,s.jsx)(a.X6,{size:"sm",children:"\u6807\u7b7e\u7ba1\u7406\u5458"}),E&&(0,b.GJ)(E.user.role)&&(0,s.jsx)(a.xu,{cursor:"pointer",onClick:function(){return r.push("/admin/tags")},children:(0,k.a)("edit",".9rem")})]}),(0,s.jsx)(a.gC,{alignItems:"left",mt:"4",children:U.map((function(e){return(0,s.jsx)("a",{href:"/".concat(e.username),children:(0,s.jsxs)(a.Ug,{cursor:"pointer",children:[(0,s.jsx)(l.qE,{size:"sm",src:e.avatar}),(0,s.jsx)(a.X6,{size:"sm",children:(0,O.vW)(e)})]})})}))})]})]})]})})]})}},51646:function(e,n,t){t.d(n,{J:function(){return b}});var r=t(85893),i=t(67294),s=t(86243),a=t(77869),c=t.n(a),o=(t(34123),t(11604)),l=t(68527),u=t(89583);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var h=function(e){var n,t,i=e.type,s=e.url,a=f(e,["type","url"]);switch(i){case"github":t="Github",n=(0,r.jsx)(u.hJX,{});break;case"twitter":t="Twitter",n=(0,r.jsx)(u.fWC,{});break;default:t="Official website",n=(0,r.jsx)(u.rVf,{})}return(0,r.jsxs)(l.kC,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}({justifyContent:"space-between",alignItems:"center",cursor:"pointer",as:"a",href:s,target:"_blank",py:"1",px:"2",layerStyle:"textSecondary",fontSize:"1.1rem"},a,{className:"hover-bg",children:[(0,r.jsxs)(l.Ug,{children:[n,(0,r.jsx)(o.m$.span,{ml:"2",children:t})]}),(0,r.jsx)(u.nkz,{fontSize:"0.8rem"})]}))},m=t(95978),p=t(40328);function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){x(e,n,t[n])}))}return e}function j(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var v=(0,o.m$)(s.Z);function b(e){var n=e.md,t=e.fontSize,s=(e.enableToc,j(e,["md","fontSize","enableToc"])),a=(0,i.useRef)(),o=(0,i.useState)(n),u=o[0],d=o[1];return(0,i.useEffect)((function(){a.current.querySelectorAll("pre code").forEach((function(e){c().highlightBlock(e)}));for(var e=[],t=0;t<n.length;t++)"@"===n[t]&&e.push(t);if(0!=e.length){var r=[];e.length>=1&&"@"!==n[0]&&r.push(n.substr(0,e[0]));for(t=0;t<e.length;t++){if(t===e.length-1){r.push(n.substr(e[t],n.length-e[t]));break}r.push(n.substr(e[t],e[t+1]-e[t]))}var i="",s=!0,o=!1,l=void 0;try{for(var u,f=r[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var h=u.value,x="",g="",j=!1,v=!1;if("@"===h[0]){if("["!==h[1])for(t=1;t<h.length&&!(t-1>p.v.user.usernameMaxLen);t++){if(!(0,m.Bv)(h[t])){j=!0,v=!0;break}g+=h[t]}else{var b=0;for(t=2;t<h.length&&!(t-2>p.v.user.nicknameMaxLen);t++){if(b=t,"]"===h[t]){j=!0;break}x+=h[t]}if(j&&"("===h[b+1])for(t=b+2;t<h.length&&!(t-b-2>p.v.user.usernameMaxLen);t++){if(")"===h[t]){v=!0;break}if(!(0,m.Bv)(h[t]))break;g+=h[t]}}i+=v&&j&&""!==g?""===x?h.replace("@".concat(g),'<a href="'.concat(g,'" class="at-user-link">@').concat(g,"</a>")):h.replace("@[".concat(x,"](").concat(g,")"),'<a href="'.concat(g,'" class="at-user-link">').concat(x,"</a>")):h}else i+=h}}catch(y){o=!0,l=y}finally{try{s||null==f.return||f.return()}finally{if(o)throw l}}d(i)}}),[n]),(0,r.jsx)(l.kC,{ref:a,children:(0,r.jsx)(v,g({children:u},s,{style:{height:"100%",fontSize:null!==t&&void 0!==t?t:"1.05rem",lineHeight:"1.7"},className:"markdown-render",options:{overrides:{WebsiteLink:{component:h}},slugify:function(e){return e.toLowerCase().replace(/[?\s]/g,"-")}},maxWidth:"100%"}))})}}}]);