"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5140],{83504:function(e,n,t){var r=t(85893),i=t(68527),o=t(1950),c=t(62665),l=t(24871),s=t(96486),a=t(67294),u=t(63091),f=t(70577);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}function h(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}n.Z=function(e){var n=e.title,t=e.routes,d=e.children,b=e.p,x=h(e,["title","routes","children","p"]),j=(0,c.Z)().session,v=(0,a.useState)(t),m=v[0],y=v[1];return(0,a.useEffect)((function(){if(null===j||void 0===j?void 0:j.user){var e=!0,n=!1,t=void 0;try{for(var r,i=m[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.minRole==u.u.ContentAdmin?o.disabled=!(0,f.SL)(j.user.role):o.minRole==u.u.ADMIN&&(o.disabled=!(0,f.GJ)(j.user.role))}}catch(c){n=!0,t=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}y((0,s.cloneDeep)(m))}),[null===j||void 0===j?void 0:j.user]),(0,r.jsxs)(i.xu,{display:"flex",children:[(0,r.jsx)(l.Z,p({routes:m,title:n},x)),(0,r.jsx)(o.ZP,{className:"side-card",ml:"4",width:"100%",p:null!==b&&void 0!==b?b:6,pb:"1",children:d})]})}},99901:function(e,n,t){var r=t(85893),i=t(11604),o=t(20949),c=t(41664),l=t(11163);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}function u(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var f=t(67294).forwardRef((function(e,n){var t=e.isActive,c=e.icon,l=e.children,s=u(e,["isActive","icon","children"]);return(0,r.jsxs)(i.m$.a,a({"aria-current":t?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:n,fontSize:"1rem",fontWeight:"bold",color:(0,o.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,o.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},s,{children:[c&&(0,r.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:c}),(0,r.jsx)(i.m$.span,{children:l})]}))}));n.Z=function(e){var n,t=e.href,o=e.icon,s=e.children,d=e.query,p=e.exactPath,h=void 0!==p&&p,b=u(e,["href","icon","children","query","exactPath"]),x=(0,l.useRouter)().asPath;return n=h?x.split("?")[0]==encodeURI(t):x.startsWith(encodeURI(t)),(0,r.jsx)(i.m$.div,a({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},b,{children:(0,r.jsx)(c.default,{href:{pathname:t,query:d},passHref:!0,children:(0,r.jsx)(f,{isActive:n,icon:o,children:s})})}))}},24871:function(e,n,t){var r=t(85893),i=t(68527),o=t(1950),c=t(11163),l=t(67294),s=t(99901);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}function f(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function d(e){var n=e.routes,t=(e.pathname,e.contentRef,f(e,["routes","pathname","contentRef"]));return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Kq,{as:"ul",children:n.map((function(e){return e.disabled?null:(0,r.jsx)(s.Z,u({as:"li",href:e.path,icon:e.icon},t,{children:(0,r.jsx)("span",{children:e.title})}),e.path)}))})})}n.Z=function(e){var n=e.routes,t=e.title,s=f(e,["routes","title"]),a=(0,c.useRouter)().pathname,p=l.useRef(null);return(0,r.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,r.jsx)(o.ZP,{p:"5",className:"side-card",children:(0,r.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:t})}),(0,r.jsx)(o.ZP,u({p:"0",className:"side-card"},s,{children:(0,r.jsx)(i.xu,{ref:p,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,r.jsx)(d,u({routes:n,pathname:a,contentRef:p},s))})}))]})}},13520:function(e,n,t){var r=t(85893),i=t(68527),o=t(99901),c=t(11163),l=t(67294);function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){s(e,n,t[n])}))}return e}function u(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function f(e){var n=e.routes,t=(e.pathname,e.contentRef,e.query),c=u(e,["routes","pathname","contentRef","query"]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.Ug,{as:"ul",children:n.map((function(e){return e.disabled?null:(0,r.jsx)(o.Z,a({query:t,as:"li",href:e.path,icon:e.icon},c,{children:(0,r.jsx)("span",{children:e.title})}),e.path)}))})})}n.Z=function(e){var n=e.routes,t=e.showBorder,o=void 0===t||t,s=u(e,["routes","showBorder"]),d=(0,c.useRouter)().pathname,p=l.useRef(null);return(0,r.jsxs)(i.gC,{alignItems:"left",width:"100%",children:[(0,r.jsx)(f,a({routes:n,pathname:d,contentRef:p},s)),o&&(0,r.jsx)(i.iz,{})]})}},35140:function(e,n,t){t.r(n),t.d(n,{adminSubLinks:function(){return w}});var r=t(34051),i=t.n(r),o=t(85893),c=t(28609),l=t(97375),s=t(68527),a=t(15193),u=t(88718),f=t(33441),d=t(67294),p=t(41039),h=t(84696),b=t(30092),x=t(87079),j=t(13520),v=t(46870),m=t(83504),y=t(96486);function g(e,n,t,r,i,o,c){try{var l=e[o](c),s=l.value}catch(a){return void t(a)}l.done?n(s):Promise.resolve(s).then(r,i)}function O(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function c(e){g(o,r,i,c,l,"next",e)}function l(e){g(o,r,i,c,l,"throw",e)}c(void 0)}))}}var w=(0,y.find)(p.xt,(function(e){return 1==e.id})).subLinks;n.default=function(){var e=(0,c.pm)(),n=(0,l.qY)(),t=n.isOpen,r=n.onOpen,y=n.onClose,g=(0,d.useState)(null),P=g[0],S=g[1],k=(0,d.useState)([]),C=k[0],R=k[1],I=(0,d.useState)(""),Z=I[0],z=I[1];(0,d.useEffect)((function(){h.rR.get("/approval/list").then((function(e){return R(e.data)}))}),[]);var E=function(){var n=O(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.rR.post("/approval/suc/".concat(t));case 2:e({description:"\u64cd\u4f5c\u6210\u529f",status:"success",duration:3e3,isClosable:!0});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),N=function(){var n=O(i().mark((function n(t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.rR.post("/approval/failed",{id:t,reason:Z});case 2:e({description:"\u64cd\u4f5c\u6210\u529f",status:"success",duration:3e3,isClosable:!0}),y();case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(b.Z,{children:[(0,o.jsxs)(m.Z,{title:"\u7ba1\u7406\u5458",routes:p.xt,children:[(0,o.jsx)(s.kC,{justifyContent:"space-between",alignItems:"center",children:(0,o.jsx)(j.Z,{routes:w,exactPath:!0})}),(0,o.jsx)(s.gC,{alignItems:"left",p:"4",children:C.map((function(e){return(0,o.jsxs)(s.kC,{justify:"space-between",mt:"6",p:"2",className:e.id==(null===P||void 0===P?void 0:P.id)?"highlight-bg":null,children:[(0,o.jsxs)(s.gC,{alignItems:"left",spacing:"3",children:[(0,o.jsxs)(s.xv,{children:["\u6587\u7ae0 ID: ",e.id]}),(0,o.jsxs)(s.xv,{children:["\u6587\u7ae0\u6807\u9898: ",e.title]}),e.reason&&(0,o.jsxs)(s.xv,{children:["\u4e0a\u6b21\u5ba1\u6838\u5931\u8d25\u7684\u539f\u56e0: ",e.reason]}),e.message&&(0,o.jsxs)(s.xv,{children:["\u7528\u6237\u7684\u7533\u8bc9: ",e.message]})]}),(0,o.jsxs)(s.Ug,{spacing:"4",children:[(0,o.jsx)(s.xv,{children:(0,v.Zh)(e.updated)}),(0,o.jsx)(a.zx,{size:"sm",variant:"outline",onClick:function(){window.open((0,x.Lk)(e.id)),S(e)},children:"\u524d\u5f80\u67e5\u770b"}),(0,o.jsx)(a.zx,{size:"sm",onClick:function(){return E(e.id)},children:"\u901a\u8fc7\u5ba1\u6838"}),(0,o.jsx)(a.zx,{size:"sm",variant:"outline",colorScheme:"orange",onClick:function(){S(e),r()},children:"\u4e0d\u4e88\u901a\u8fc7"})]})]})}))})]}),(0,o.jsxs)(u.u_,{isOpen:t,onClose:function(){y(),S(null)},children:[(0,o.jsx)(u.ZA,{}),(0,o.jsxs)(u.hz,{children:[(0,o.jsx)(u.xB,{children:"\u5ba1\u6838\u4e0d\u901a\u8fc7"}),(0,o.jsx)(u.fe,{children:(0,o.jsxs)(s.gC,{alignItems:"left",spacing:"4",children:[(0,o.jsx)(f.g,{placeholder:"\u8bf7\u7b80\u5355\u63d0\u4f9b\u4e0d\u901a\u8fc7\u7684\u7406\u7531",onChange:function(e){return z(e.currentTarget.value)}}),(0,o.jsx)(a.zx,{onClick:function(){return N(P.id)},children:"\u63d0\u4ea4"})]})})]})]})]})})}}}]);