"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8951],{38951:function(e,n,r){r.d(n,{xG:function(){return U},ZP:function(){return _}});var t=r(34051),o=r.n(t),i=r(85893),c=r(67294),s=r(97375),u=r(68527),a=r(47398),l=r(15193),d=r(67989),f=r(11604),h=r(88718),m=r(1950),x=r(51646),p=r(85832),j=r(89583),v=r(75543),g=r(84696),y=r(71835),b=r(70577);function C(e,n,r,t,o,i,c){try{var s=e[i](c),u=s.value}catch(a){return void r(a)}s.done?n(u):Promise.resolve(u).then(t,o)}function w(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function c(e){C(i,t,o,c,s,"next",e)}function s(e){C(i,t,o,c,s,"throw",e)}c(void 0)}))}}function k(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){k(e,n,r[n])}))}return e}var z=function(e){var n=e.comment,r=e.user,t=e.storyCreator,s=e.onCreate,a=e.onChange,h=e.parentId,m=e.onRemove,x=e.highlight,p=(0,c.useState)(!1),C=p[0],k=p[1],z=(0,c.useState)(!1),O=z[0],P=z[1],D=(0,c.useState)(!1),Z=D[0],I=D[1],R=(0,c.useState)(""),E=R[0],_=R[1],N=function(){var e=w(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.rR.post("/story/comment",{targetID:h,md:n});case 2:r=e.sent,I(!1),s(r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=w(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.rR.post("/story/comment",S({},n,{md:r}));case 2:k(!1),n.md=r,a();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=w(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.rR.delete("/story/comment/".concat(n));case 2:m(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.jsx)(i.Fragment,{children:C?r&&(0,i.jsx)(v.Z,{user:r,md:n.md,onSubmit:function(e){k(!1),$(e)},onCancel:function(){return k(!1)},menu:!1}):(0,i.jsxs)(u.gC,{alignItems:"left",spacing:"2",id:n.id,className:x==n.id?"highlight-bordered":null,p:"1",children:[(0,i.jsx)(U,{comment:n,user:r,size:"sm",showAvatar:!1,isDiscussion:!0,children:(0,i.jsxs)(u.Ug,{children:[r&&(0,i.jsx)(l.hU,{"aria-label":"go to github",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,i.jsx)(j.Bjt,{}),onClick:function(){""===n.creator.nickname?_("@".concat(n.creator.username," ")):_("@[".concat(n.creator.nickname,"](/").concat(n.creator.username,") ")),I(!Z)},size:"sm"}),(0,i.jsxs)(d.v2,{children:[(0,i.jsx)(l.hU,{as:d.j2,"aria-label":"go to github",variant:"ghost",color:"gray.500",icon:(0,i.jsx)(f.m$.svg,{fill:"gray.500",height:"1rem",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-207.5 86.6l115-115.1c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L256 303l-99.5-99.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l115 115.1c4.8 4.6 12.4 4.6 17.1-.1z"})}),_hover:{bg:"none"},_focus:{border:"none"},_active:{bg:"none"}}),(0,i.jsxs)(d.qy,{children:[r&&r.id==n.creator.id&&(0,i.jsxs)(d.sN,{onClick:function(){return k(!0)},children:[(0,i.jsx)(j.ffH,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Edit"})]}),r&&(r.id==n.creator.id||r.id==t||(0,b.SL)(r.role))&&(0,i.jsxs)(d.sN,{onClick:function(){return G(n.id)},children:[(0,i.jsx)(j.lp8,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Delete"})]}),(0,i.jsxs)(d.sN,{onClick:function(){return P(!0)},children:[(0,i.jsx)(j.A5b,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Report"})]})]})]})]})}),O&&(0,i.jsx)(y.Z,{targetID:n.id,onClose:function(){return P(!1)}}),Z&&(0,i.jsx)(u.xu,{pl:"16",pr:"2",children:(0,i.jsx)(v.Z,{user:r,md:E,onSubmit:function(e){N(e)},onCancel:function(){return I(!1)},menu:!1})})]})})},O=r(17869),P=r(96486),D=r(46870);function Z(e,n,r,t,o,i,c){try{var s=e[i](c),u=s.value}catch(a){return void r(a)}s.done?n(u):Promise.resolve(u).then(t,o)}function I(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function c(e){Z(i,t,o,c,s,"next",e)}function s(e){Z(i,t,o,c,s,"throw",e)}c(void 0)}))}}function R(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function E(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){R(e,n,r[n])}))}return e}var _=function(e){var n=e.comment,r=e.user,t=e.onChange,x=e.onRemove,p=e.storyCreator,C=e.highlight,w=(0,s.qY)(),k=w.isOpen,S=w.onOpen,O=w.onClose,D=c.useRef(),Z=(0,c.useState)(!1),R=Z[0],_=Z[1],N=(0,c.useState)(!1),$=N[0],G=N[1],Y=(0,c.useState)(!1),q=Y[0],A=Y[1],B=(0,c.useState)(""),L=B[0],F=(B[1],function(){var e=I(o().mark((function e(r){var i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.rR.post("/story/comment",{targetID:n.id,md:r});case 2:i=e.sent,A(!1),n.replies.unshift(i.data),t();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),H=function(){var e=I(o().mark((function e(r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.md=r,e.next=3,g.rR.post("/story/comment",E({},n,{md:r}));case 3:_(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=I(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.rR.delete("/story/comment/".concat(n));case 2:x(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[R?r&&(0,i.jsx)(v.Z,{user:r,md:n.md,onSubmit:function(e){_(!1),H(e)},onCancel:function(){return _(!1)},menu:!1}):(0,i.jsx)(m.ZP,{p:"4",id:n.id,className:C==n.id?"highlight-bordered":null,children:(0,i.jsxs)(u.gC,{alignItems:"left",spacing:"4",children:[(0,i.jsx)(U,{comment:n,user:r,children:(0,i.jsxs)(u.Ug,{spacing:"2",children:[r&&(0,i.jsx)(a.u,{label:"\u56de\u590d",children:(0,i.jsx)(l.hU,{"aria-label":"",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,i.jsx)(j.Bjt,{}),onClick:function(){return A(!q)},size:"sm"})}),(0,i.jsxs)(d.v2,{children:[(0,i.jsx)(l.hU,{as:d.j2,"aria-label":"go to github",variant:"ghost",color:"gray.500",icon:(0,i.jsx)(f.m$.svg,{fill:"gray.500",height:"1rem",viewBox:"0 0 512 512",children:(0,i.jsx)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-207.5 86.6l115-115.1c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L256 303l-99.5-99.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l115 115.1c4.8 4.6 12.4 4.6 17.1-.1z"})}),_hover:{bg:"none"},_focus:{border:"none"},_active:{bg:"none"}}),(0,i.jsxs)(d.qy,{children:[r&&r.id==n.creator.id&&(0,i.jsxs)(d.sN,{onClick:function(){return _(!0)},children:[(0,i.jsx)(j.ffH,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Edit"})]}),r&&(r.id==n.creator.id||r.id==p||(0,b.SL)(r.role))&&(0,i.jsxs)(d.sN,{onClick:S,children:[(0,i.jsx)(j.lp8,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Delete"})]}),(0,i.jsxs)(d.sN,{onClick:function(){return G(!0)},children:[(0,i.jsx)(j.A5b,{}),(0,i.jsx)(f.m$.span,{ml:"2",children:"Report"})]})]})]})]})}),$&&(0,i.jsx)(y.Z,{targetID:n.id,onClose:function(){return G(!1)}}),q&&(0,i.jsx)(u.xu,{pl:"16",pr:"2",children:(0,i.jsx)(v.Z,{menu:!1,user:r,md:L,onSubmit:F,onCancel:function(){return A(!1)}})}),n.replies.map((function(r){return(0,i.jsxs)(u.xu,{pl:"16",children:[(0,i.jsx)(u.iz,{mb:"4",mt:"0"}),(0,i.jsx)(z,{user:e.user,storyCreator:p,onCreate:function(e){n.replies.unshift(e),t()},onChange:t,onRemove:function(e){(0,P.remove)(n.replies,(function(n){return n.id==e})),t()},comment:r,parentId:n.id,highlight:C})]},r.id)}))]})}),(0,i.jsx)(h.aR,{isOpen:k,leastDestructiveRef:D,onClose:O,children:(0,i.jsx)(h.dh,{children:(0,i.jsxs)(h._T,{children:[(0,i.jsx)(h.fY,{fontSize:"lg",fontWeight:"bold",children:"\u5220\u9664\u8bc4\u8bba"}),(0,i.jsx)(h.iP,{children:"\u786e\u5b9a\u8981\u5220\u9664\u8bc4\u8bba\u5417\uff1f\u4e00\u65e6\u5220\u9664\uff0c\u5c31\u65e0\u6cd5\u6062\u590d\uff01"}),(0,i.jsxs)(h.xo,{children:[(0,i.jsx)(l.zx,{ref:D,onClick:O,children:"\u53d6\u6d88"}),(0,i.jsx)(l.zx,{colorScheme:"red",onClick:function(){J(n.id),O()},ml:3,children:"\u5220\u9664"})]})]})})})]})},U=function(e){var n=e.comment,r=e.user,t=e.children,o=e.isDiscussion,c=void 0!==o&&o,s=e.size,a=void 0===s?"sm":s,l=e.showAvatar,d=void 0===l||l;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.kC,{justifyContent:"space-between",width:"100%",alignItems:"start",children:[(0,i.jsx)("a",{href:"/".concat(n.creator.username),children:(0,i.jsx)(O.Z,{showAvatar:d,currentUser:r,user:n.creator,isDiscussion:c,size:a})}),(0,i.jsx)(u.Ug,{children:(0,i.jsx)(u.xv,{layerStyle:"textSecondary",fontSize:a,children:(0,D.Zh)(n.created)})})]}),(0,i.jsxs)(u.gC,{alignItems:"left",pl:d?"6":"1",children:[(0,i.jsx)(x.J,{md:n.md,fontSize:"md"==a?"1rem":"0.9rem"}),(0,i.jsxs)(u.kC,{justifyContent:"space-between",children:[(0,i.jsx)(p.Z,{liked:n.liked,count:n.likes,storyID:n.id,fontSize:".95rem"}),t]})]})]})}},75543:function(e,n,r){var t=r(34051),o=r.n(t),i=r(85893),c=r(67294),s=r(68527),u=r(7657),a=r(15193),l=r(1950),d=r(63348),f=r(95978),h=r(87904),m=r(10579),x=r(51646),p=r(16586);function j(e,n,r,t,o,i,c){try{var s=e[i](c),u=s.value}catch(a){return void r(a)}s.done?n(u):Promise.resolve(u).then(t,o)}n.Z=function(e){var n,r=(0,c.useState)(m.G.Edit),t=r[0],v=r[1],g=p.Z.get("comment-to-".concat(e.storyID)),y=(0,c.useState)(g||e.md),b=y[0],C=y[1],w=function(){var n,r=(n=o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.onSubmit(b);case 2:e.storyID&&p.Z.remove("comment-to-".concat(e.storyID));case 3:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function c(e){j(i,t,o,c,s,"next",e)}function s(e){j(i,t,o,c,s,"throw",e)}c(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,i.jsxs)(l.ZP,{children:[(0,i.jsxs)(s.kC,{justifyContent:"space-between",children:[(0,i.jsxs)(s.Ug,{children:[(0,i.jsx)(u.qE,{src:e.user.avatar,size:"sm"}),(0,i.jsx)(s.xv,{children:(0,f.vW)(e.user)})]}),(0,i.jsx)(h.Z,{onChange:function(e){return v(e)}})]}),(0,i.jsx)(s.xu,{mt:"4",h:"250px",children:t===m.G.Edit?(0,i.jsx)(d.c,{menu:null===(n=e.menu)||void 0===n||n,md:b,onChange:function(n){C(n),e.storyID&&p.Z.set("comment-to-".concat(e.storyID),n)}}):(0,i.jsx)(x.J,{md:b,overflowY:"scroll"})}),(0,i.jsxs)(s.kC,{justifyContent:"flex-end",mt:"2",children:[(0,i.jsx)(a.zx,{size:"sm",variant:"ghost",colorScheme:"gray",onClick:e.onCancel,children:"Cancel"}),(0,i.jsx)(a.zx,{size:"sm",onClick:function(){return w()},children:"Submit"})]})]})}},87904:function(e,n,r){var t=r(85893),o=(r(67294),r(9680)),i=r(68527),c=r(10579),s=r(78044);function u(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){u(e,n,r[n])}))}return e}n.Z=function(e){var n=[c.G.Edit,c.G.Preview],r=(0,o.ar)({name:"framework",defaultValue:c.G.Edit,onChange:function(n){e.onChange(n)}}),u=r.getRootProps,l=r.getRadioProps,d=u();return(0,t.jsx)(i.Ug,a({},d,{children:n.map((function(e){var n=l({value:e});return(0,t.jsx)(s.Z,a({},n,{children:e}),e)}))}))}},71835:function(e,n,r){var t=r(34051),o=r.n(t),i=r(85893),c=r(67294),s=r(68527),u=r(11604),a=r(9680),l=r(15193),d=r(21948),f=r(84696);function h(e,n,r,t,o,i,c){try{var s=e[i](c),u=s.value}catch(a){return void r(a)}s.done?n(u):Promise.resolve(u).then(t,o)}n.Z=function(e){var n=(0,c.useState)("\u5185\u5bb9\u8d28\u91cf\u4e0d\u884c"),r=n[0],t=n[1],m=function(){var n,t=(n=o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.rR.post("/report",{targetID:e.targetID,content:r});case 2:e.onClose();case 3:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,o){var i=n.apply(e,r);function c(e){h(i,t,o,c,s,"next",e)}function s(e){h(i,t,o,c,s,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,i.jsxs)(s.xu,{border:"1px solid rgb(245, 158, 11)",p:"4",borderRadius:"8px",children:[(0,i.jsxs)(s.kC,{justifyContent:"space-between",children:[(0,i.jsx)(s.X6,{size:"sm",children:"\u9009\u62e9\u5408\u9002\u7684\u9879\uff0c\u4ee5\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u4e86\u89e3\u4f60\u6295\u8bc9\u7684\u539f\u56e0"}),(0,i.jsx)(u.m$.span,{layerStyle:"textSecondary",cursor:"pointer",onClick:e.onClose,children:(0,d.a)("close")})]}),(0,i.jsx)(a.Ee,{onChange:t,value:r,mt:"4",children:(0,i.jsxs)(s.Kq,{spacing:"3",children:[(0,i.jsx)(a.Y8,{value:"\u5185\u5bb9\u8d28\u91cf\u4e0d\u884c",children:"\u5185\u5bb9\u8d28\u91cf\u4e0d\u884c"}),(0,i.jsx)(a.Y8,{value:"\u6076\u8bed\u4f24\u4eba",children:"\u6076\u8bed\u4f24\u4eba"}),(0,i.jsx)(a.Y8,{value:"\u8fd9\u7bc7\u6587\u7ae0\u4e0d\u5e94\u8be5\u5c5e\u4e8e\u8fd9\u4e2a\u793e\u533a",children:"\u8fd9\u7bc7\u6587\u7ae0\u4e0d\u5e94\u8be5\u5c5e\u4e8e\u8fd9\u4e2a\u793e\u533a"})]})}),(0,i.jsxs)(s.Ug,{mt:"4",children:[(0,i.jsx)(l.zx,{size:"sm",onClick:function(){return m()},children:"\u63d0\u4ea4"}),(0,i.jsx)(s.xv,{layerStyle:"textSecondary",fontSize:".95rem",children:"\u8bf7\u52a1\u5fc5\u5982\u5b9e\u53cd\u9988\u95ee\u9898\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f71\u54cd\u4f60\u7684\u79ef\u5206\u548c\u98ce\u7eaa\u7ea0\u5bdf\u6743\u54e6\u3002"})]})]})}}}]);