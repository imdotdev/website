"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8336],{99901:function(e,n,r){var t=r(85893),i=r(11604),o=r(20949),s=r(41664),c=r(11163);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){a(e,n,r[n])}))}return e}function u(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=r(67294).forwardRef((function(e,n){var r=e.isActive,s=e.icon,c=e.children,a=u(e,["isActive","icon","children"]);return(0,t.jsxs)(i.m$.a,l({"aria-current":r?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:n,fontSize:"1rem",fontWeight:"bold",color:(0,o.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,o.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},a,{children:[s&&(0,t.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:s}),(0,t.jsx)(i.m$.span,{children:c})]}))}));n.Z=function(e){var n,r=e.href,o=e.icon,a=e.children,f=e.query,h=e.exactPath,p=void 0!==h&&h,x=u(e,["href","icon","children","query","exactPath"]),j=(0,c.useRouter)().asPath;return n=p?j.split("?")[0]==encodeURI(r):j.startsWith(encodeURI(r)),(0,t.jsx)(i.m$.div,l({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},x,{children:(0,t.jsx)(s.default,{href:{pathname:r,query:f},passHref:!0,children:(0,t.jsx)(d,{isActive:n,icon:o,children:a})})}))}},24871:function(e,n,r){var t=r(85893),i=r(68527),o=r(1950),s=r(11163),c=r(67294),a=r(99901);function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}function d(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function f(e){var n=e.routes,r=(e.pathname,e.contentRef,d(e,["routes","pathname","contentRef"]));return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Kq,{as:"ul",children:n.map((function(e){return e.disabled?null:(0,t.jsx)(a.Z,u({as:"li",href:e.path,icon:e.icon},r,{children:(0,t.jsx)("span",{children:e.title})}),e.path)}))})})}n.Z=function(e){var n=e.routes,r=e.title,a=d(e,["routes","title"]),l=(0,s.useRouter)().pathname,h=c.useRef(null);return(0,t.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,t.jsx)(o.ZP,{p:"5",className:"side-card",children:(0,t.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:r})}),(0,t.jsx)(o.ZP,u({p:"0",className:"side-card"},a,{children:(0,t.jsx)(i.xu,{ref:h,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,t.jsx)(f,u({routes:n,pathname:l,contentRef:h},a))})}))]})}},4152:function(e,n,r){r.d(n,{Z:function(){return m}});var t,i=r(34051),o=r.n(i),s=r(85893),c=r(28609),a=r(32095),l=r(96356),u=r(68527),d=r(97375),f=r(88718),h=r(6886),p=r(33441),x=r(15193),j=r(67294);!function(e){e[e.Wait=1]="Wait",e[e.Suc=2]="Suc",e[e.Failed=3]="Failed"}(t||(t={}));var v=r(84696);function b(e,n,r,t,i,o,s){try{var c=e[o](s),a=c.value}catch(l){return void r(l)}c.done?n(a):Promise.resolve(a).then(t,i)}function y(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function s(e){b(o,t,i,s,c,"next",e)}function c(e){b(o,t,i,s,c,"throw",e)}s(void 0)}))}}var m=function(e){var n,r=e.approval,i=e.size,d=void 0===i?"sm":i,f=(0,c.pm)(),h=(0,j.useState)(!1),p=h[0],x=h[1],b=function(){var e=y(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=y(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.post("/approval/suc/".concat(r.id));case 2:f({description:"\u64cd\u4f5c\u6210\u529f",status:"success",duration:3e3,isClosable:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a.J2,{trigger:"hover",isLazy:!0,children:[(0,s.jsx)(a.xo,{children:(0,s.jsx)(l.Vp,{size:d,colorScheme:r.status==t.Failed?"red":"linkedin",cursor:"pointer",children:r.status==t.Wait?"\u5ba1\u6838\u4e2d":"\u5ba1\u6838\u5931\u8d25"})}),(0,s.jsxs)(a.yk,{_focus:{border:null},children:[(0,s.jsx)(a.QH,{}),(0,s.jsx)(a.Yt,{children:(0,s.jsxs)(u.kC,{justifyContent:"space-between",children:[r.status==t.Failed?(0,s.jsx)(l.Vp,{onClick:function(){return b()},cursor:"pointer",children:"\u518d\u6b21\u7533\u8bf7\u5ba1\u6838"}):(0,s.jsx)(l.Vp,{onClick:function(){return b()},cursor:"pointer",children:"\u6b63\u5728\u5ba1\u6838\u4e2d"}),(0,s.jsx)(l.Vp,{colorScheme:"orange",cursor:"pointer",onClick:m,children:"\u901a\u8fc7\u5ba1\u6838"})]})}),(0,s.jsxs)(a.b,{children:["\u5ba1\u6838\u5931\u8d25\u7684\u539f\u56e0\uff1a",null!==(n=r.reason)&&void 0!==n?n:"\u6682\u65e0"]})]})]}),(0,s.jsx)(g,{approval:r,opened:p,onClose:function(){return x(!1)}})]})},g=function(e){var n=e.approval,r=e.opened,t=e.onClose,i=(0,d.qY)(),a=i.isOpen,l=i.onOpen,b=i.onClose,m=(0,c.pm)(),g=(0,j.useState)(""),w=g[0],O=g[1];(0,j.useEffect)((function(){r&&l()}),[r]);var S=function(){var e=y(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.trim().length<5)){e.next=3;break}return m({description:"\u63d0\u4ea4\u5ba1\u6838\u7684\u539f\u56e0\u4e0d\u80fd\u5c11\u4e8e 5 \u4e2a\u5b57",status:"error",duration:3e3,isClosable:!0}),e.abrupt("return");case 3:return e.next=5,v.rR.post("/approval/appeal",{id:n.id,message:w.trim()});case 5:b(),t(),m({description:"\u63d0\u4ea4\u5ba1\u6838\u6210\u529f",status:"success",duration:3e3,isClosable:!0});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(f.u_,{isOpen:a,onClose:function(){t(),b()},children:[(0,s.jsx)(f.ZA,{}),(0,s.jsxs)(f.hz,{children:[(0,s.jsx)(f.xB,{children:"\u5ba1\u6838\u7533\u8bc9"}),(0,s.jsx)(f.fe,{children:(0,s.jsxs)(u.gC,{alignItems:"left",spacing:"4",children:[(0,s.jsxs)(h.bZ,{status:"warning",children:[(0,s.jsx)(h.zM,{}),"\u5ba1\u6838\u4e0d\u901a\u8fc7\uff0c\u57fa\u672c\u90fd\u662f\u56e0\u4e3a\u5185\u5bb9\u8d28\u91cf\u5b58\u5728\u95ee\u9898\u5bfc\u81f4\u7684\uff0c\u8bf7\u5728\u4ed4\u7ec6\u68c0\u67e5\u3001\u4fee\u6539\u540e\uff0c\u518d\u7533\u8bf7\u5ba1\u6838\u3002"]}),(0,s.jsx)(p.g,{placeholder:"\u8bf7\u8bf4\u660e\u7533\u8bc9\u7684\u7406\u7531\uff0c\u4f8b\u5982\u4f60\u662f\u5426\u4fee\u6539\u5b8c\u5584\u4e86\u76f8\u5e94\u7684\u5185\u5bb9\uff1f",onChange:function(e){return O(e.currentTarget.value)}}),(0,s.jsx)(x.zx,{onClick:function(){return S()},children:"\u63d0\u4ea4\u7533\u8bc9"})]})})]})]})}},74326:function(e,n,r){r.d(n,{U:function(){return g}});var t=r(34051),i=r.n(t),o=r(85893),s=r(28609),c=r(96356),a=r(32095),l=r(68527),u=r(97375),d=r(88718),f=r(6886),h=r(33441),p=r(15193),x=r(67294),j=r(41665),v=r(26822),b=r(84696);function y(e,n,r,t,i,o,s){try{var c=e[o](s),a=c.value}catch(l){return void r(l)}c.done?n(a):Promise.resolve(a).then(t,i)}function m(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function s(e){y(o,t,i,s,c,"next",e)}function c(e){y(o,t,i,s,c,"throw",e)}s(void 0)}))}}n.Z=function(e){var n=e.disabled,r=(0,s.pm)(),t=(0,x.useState)(!1),u=t[0],d=t[1],f=function(){var e=m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.rR.delete("/disable/".concat(n.id));case 2:r({description:"\u89e3\u7981\u6210\u529f\uff0c\u5237\u65b0\u67e5\u770b\u6548\u679c",status:"success",duration:3e3,isClosable:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.J2,{trigger:"hover",isLazy:!0,children:[(0,o.jsx)(a.xo,{children:(0,o.jsx)(c.Vp,{colorScheme:"red",cursor:"pointer",size:"sm",children:(0,v.dd)(n.by)?"\u88ab\u6807\u7b7e\u79fb\u9664":"\u88ab\u7981\u7528"})}),(0,o.jsxs)(a.yk,{_focus:{border:null},children:[(0,o.jsx)(a.QH,{}),(0,o.jsx)(a.Yt,{children:(0,o.jsxs)(l.kC,{justifyContent:"space-between",children:[function(e){switch(e){case j.F.Begin:return(0,o.jsx)(c.Vp,{children:"\u6b63\u5728\u7533\u8bc9\u4e2d"});case j.F.Failed:return(0,o.jsx)(c.Vp,{colorScheme:"orange",cursor:"pointer",as:"a",href:"/dashboard/appeals",children:"\u7533\u8bc9\u5931\u8d25( \u70b9\u51fb\u67e5\u770b\u8be6\u60c5 )"});case 0:return(0,o.jsx)(c.Vp,{onClick:function(){return f()},cursor:"pointer",children:"\u70b9\u51fb\u8fd9\u91cc\u7533\u8bc9"})}}(n.status),(0,o.jsx)(c.Vp,{colorScheme:"orange",cursor:"pointer",onClick:h,children:"\u89e3\u7981"})]})}),(0,o.jsx)(a.b,{children:n.reason})]})]}),(0,o.jsx)(g,{disabled:n,opened:u,onClose:function(){return d(!1)}})]})};var g=function(e){var n=e.disabled,r=e.opened,t=e.onClose,c=(0,u.qY)(),a=c.isOpen,j=c.onOpen,v=c.onClose,y=(0,s.pm)(),g=(0,x.useState)(""),w=g[0],O=g[1];(0,x.useEffect)((function(){r&&j()}),[r]);var S=function(){var e=m(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(w.trim().length<5)){e.next=3;break}return y({description:"\u7533\u8bc9\u539f\u56e0\u4e0d\u80fd\u5c11\u4e8e 5 \u4e2a\u5b57",status:"error",duration:3e3,isClosable:!0}),e.abrupt("return");case 3:return e.next=5,b.rR.post("/appeal",{id:n.id,targetId:n.targetId,content:w.trim()});case 5:v(),t(),y({description:"\u63d0\u4ea4\u7533\u8bc9\u6210\u529f",status:"success",duration:3e3,isClosable:!0});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsxs)(d.u_,{isOpen:a,onClose:function(){t(),v()},children:[(0,o.jsx)(d.ZA,{}),(0,o.jsxs)(d.hz,{children:[(0,o.jsx)(d.xB,{children:"\u89e3\u7981\u7533\u8bc9"}),(0,o.jsx)(d.fe,{children:(0,o.jsxs)(l.gC,{alignItems:"left",spacing:"4",children:[(0,o.jsxs)(f.bZ,{status:"warning",children:[(0,o.jsx)(f.zM,{}),"\u6587\u7ae0\u88ab\u7981\u7528\uff0c\u57fa\u672c\u90fd\u662f\u56e0\u4e3a\u5185\u5bb9\u5b58\u5728\u95ee\u9898\u5bfc\u81f4\u7684\uff0c\u8bf7\u5728\u4ed4\u7ec6\u68c0\u67e5\u3001\u4fee\u6539\u540e\uff0c\u518d\u7533\u8bf7\u89e3\u7981\u3002"]}),(0,o.jsx)(h.g,{placeholder:"\u8bf7\u8bf4\u660e\u7533\u8bc9\u7684\u7406\u7531\uff0c\u4f8b\u5982\u4f60\u662f\u5426\u4fee\u6539\u5b8c\u5584\u4e86\u76f8\u5e94\u7684\u5185\u5bb9\uff1f",onChange:function(e){return O(e.currentTarget.value)}}),(0,o.jsx)(p.zx,{onClick:function(){return S()},children:"\u63d0\u4ea4\u7533\u8bc9"})]})})]})]})}},70705:function(e,n,r){r.d(n,{Z:function(){return H}});var t=r(85893),i=r(67294),o=r(92684),s=r(68527),c=r(97375),a=r(96356),l=r(47398),u=r(15193),d=r(20949),f=r(88718),h=r(70201),p=r(26822),x=r(89583),j=r(21948),v=r(87079),b=r(74326),y=r(4152),m=r(64981),g=r(34051),w=r.n(g),O=r(79042),S=r(19636),k=r(84746),C=r(96486),P=r(84696),z=r(32095),Z=r(4612),I=r(59876),T=void 0,R=function(e){var n=(0,c.qY)(),r=n.onOpen,o=n.onClose,a=n.isOpen,l=(0,i.useState)(""),f=l[0],h=l[1],p=(0,d.ff)(m.Z.borderColor.light,m.Z.borderColor.dark);(0,i.useEffect)((function(){v()}),[f]);var j=function(){console.log(f),e.onSearch(f)},v=function(){if(void 0!==T)return null!==T?(clearTimeout(T),void(T=setTimeout((function(){return j()}),800))):void 0;T=setTimeout((function(){return j()}),800)};return(0,t.jsxs)(z.J2,{isOpen:a,onOpen:r,onClose:o,placement:"right",autoFocus:!0,children:[(0,t.jsx)(z.xo,{children:(0,t.jsx)(u.hU,{"aria-label":"select post",size:"sm",icon:(0,t.jsx)(x.wEH,{}),variant:"ghost",_focus:{border:null}})}),(0,t.jsxs)(z.yk,{height:"400px",width:"500px",overflow:"scroll",_focus:{outline:"none"},py:"1",children:[(0,t.jsx)(Z.II,{value:f,onChange:function(e){return h(e.currentTarget.value)},placeholder:"\u641c\u7d22\u6587\u7ae0..",variant:"flushed",p:"2"}),(0,t.jsx)(s.Kq,{spacing:"1",py:"2",divider:(0,t.jsx)(s.cX,{borderColor:p}),children:e.posts.map((function(n){return(0,t.jsxs)(s.kC,{justifyContent:"space-between",alignItems:"center",px:"4",cursor:"pointer",onClick:function(){return e.onSelect(n.id)},children:[(0,t.jsxs)(s.xu,{py:"2",children:[(0,t.jsx)(s.X6,{size:"xs",children:n.title}),(0,t.jsx)(s.xv,{layerStyle:"textSecondary",mt:"2",children:n.brief})]}),(r=n.id,(0,C.find)(e.selected,(function(e){return r===e.id}))?(0,t.jsx)(I.nQ,{color:"green.400"}):null)]},n.id);var r}))})]})]})};function A(e,n,r,t,i,o,s){try{var c=e[o](s),a=c.value}catch(l){return void r(l)}c.done?n(a):Promise.resolve(a).then(t,i)}function _(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function s(e){A(o,t,i,s,c,"next",e)}function c(e){A(o,t,i,s,c,"throw",e)}s(void 0)}))}}var U=function(e){var n=e.id,r=e.onClose,o=(0,c.qY)(),a=o.isOpen,l=o.onOpen,u=o.onClose,h=(0,i.useState)(null),x=h[0],j=h[1],v=(0,i.useState)(null),b=v[0],y=v[1],g=(0,i.useState)(null),z=g[0],Z=g[1],I=function(){var e=_(w().mark((function e(){var r,t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.rR.get("/story/posts/editor?type=".concat(p.iJ.Post));case 2:return r=e.sent,Z(r.data),y(r.data),e.next=7,P.rR.get("/story/series/post?id=".concat(n));case 7:t=e.sent,j((0,C.sortBy)(t.data,"priority")),l();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){n&&I()}),[n]);var T=function(){var e=_(w().mark((function e(r){var t,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,C.cloneDeep)(x),(0,C.find)(t,(function(e){return e.id===r}))){e.next=7;break}return i=x.length+1,e.next=5,P.rR.post("/story/series/post",{id:n,storyId:r,priority:i});case 5:t.push({id:r,priority:i}),j((0,C.sortBy)(t,"priority"));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=_(w().mark((function e(r){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.rR.delete("/story/series/post/".concat(n,"/").concat(r));case 2:t=(0,C.cloneDeep)(x),(0,C.remove)(t,(function(e){return e.id===r})),j((0,C.sortBy)(t,"priority"));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=_(w().mark((function e(n,r){var t,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.currentTarget.value?(t=parseInt(n.currentTarget.value))&&(r.priority=t):r.priority=0,i=(0,C.cloneDeep)(x),j(i);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),D=function(){var e=_(w().mark((function e(r,t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.rR.post("/story/series/post/priority",{id:n,storyId:r,priority:Number(t)});case 2:j((0,C.sortBy)(x,"priority"));case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),F=(0,i.useMemo)((function(){return(0,d.ff)(m.Z.borderColor.light,m.Z.borderColor.dark)}),[]);return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(f.u_,{isOpen:a,onClose:function(){r(),u()},children:[(0,t.jsx)(f.ZA,{}),(0,t.jsx)(f.hz,{children:(0,t.jsxs)(f.fe,{p:"6",children:[(0,t.jsxs)(s.Ug,{children:[(0,t.jsx)(s.xv,{children:"\u5df2\u6536\u5f55\u6587\u7ae0"}),(0,t.jsx)(s.xu,{children:(0,t.jsx)(R,{selected:x,posts:z,onSelect:T,onSearch:function(e){if(""!=e){var n=[],r=!0,t=!1,i=void 0;try{for(var o,s=z[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;if(c.id==e){n.push(c);break}-1!=c.title.indexOf(e)&&n.push(c)}}catch(a){t=!0,i=a}finally{try{r||null==s.return||s.return()}finally{if(t)throw i}}Z(n)}else Z(b)}})})]}),(null===x||void 0===x?void 0:x.length)>0&&(0,t.jsx)(s.Kq,{spacing:"1",py:"4",divider:(0,t.jsx)(s.cX,{borderColor:F}),children:(0,t.jsxs)(O.iA,{variant:"simple",size:"sm",children:[(0,t.jsx)(O.hr,{children:(0,t.jsxs)(O.Tr,{children:[(0,t.jsx)(O.Th,{children:"\u6587\u7ae0\u540d"}),(0,t.jsx)(O.Th,{children:"\u663e\u793a\u4f18\u5148\u7ea7(\u8d8a\u5c0f\u6392\u5e8f\u8d8a\u9760\u524d)"}),(0,t.jsx)(O.Th,{})]})}),(0,t.jsx)(O.p3,{children:x.map((function(e){var n=(0,C.find)(b,(function(n){return n.id===e.id}));return n?(0,t.jsxs)(O.Tr,{children:[(0,t.jsx)(O.Td,{children:n.title}),(0,t.jsx)(O.Td,{children:(0,t.jsxs)(S.CX,{value:e.priority.toString(),onSubmit:function(n){return D(e.id,n)},children:[(0,t.jsx)(S.wp,{minWidth:"100px"}),(0,t.jsx)(S.Vm,{autoFocus:!1,onChange:function(n){return U(n,e)}})]})}),(0,t.jsx)(O.Td,{width:"50px",children:(0,t.jsx)(k.P,{size:"sm",onClick:function(){return A(e.id)},_focus:{border:null}})})]}):null}))})]})})]})})]})})},D=r(8193),F=r(46870),E=r(70660),W=r(22778);function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function B(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function q(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,o=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(t=r.next()).done)&&(o.push(t.value),!n||o.length!==n);s=!0);}catch(a){c=!0,i=a}finally{try{s||null==r.return||r.return()}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return V(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(e){var n,r=e.story,g=e.onEdit,w=e.onDelete,O=e.showSource,S=void 0===O||O,k=e.onPin,C=e.onPublish,P=q(e,["story","onEdit","onDelete","showSource","onPin","onPublish"]),z=Y((0,o.ac)("(max-width: 768px)"),1)[0],Z=z?s.gC:s.kC,I=(0,c.qY)(),T=I.isOpen,R=I.onOpen,A=I.onClose,_=Y(i.useState(!1),2),V=_[0],H=_[1],N=function(){return H(!1)},J=i.useRef(),M=(0,i.useState)(null),L=M[0],X=M[1],$=g||w||k;r.status==h.n.Draft?n=(0,t.jsx)(a.Vp,{colorScheme:"gray",size:"sm",variant:"outline",children:"\u8349\u7a3f"}):r.status==h.n.Published?n=(0,t.jsx)(a.Vp,{size:"sm",variant:"outline",children:"\u516c\u4f17\u53ef\u89c1"}):r.status==h.n.Hidden&&(n=(0,t.jsx)(a.Vp,{size:"sm",variant:"outline",children:"\u7528\u6237\u53ef\u89c1"}));var Q=function(){if(r.disables){var e=!0,n=!1,t=void 0;try{for(var i,o=r.disables[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;if((0,p.rL)(s.targetId)&&""==s.by)return s}}catch(c){n=!0,t=c}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}}},K=function(){var e=[];if(r.disables){var n=!0,t=!1,i=void 0;try{for(var o,s=r.disables[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;(0,p.MW)(c.by)==p.iJ.Tag&&e.push(c)}}catch(a){t=!0,i=a}finally{try{n||null==s.return||s.return()}finally{if(t)throw i}}}return e};return console.log(r.created),(0,t.jsxs)(Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){B(e,n,r[n])}))}return e}({justifyContent:"space-between",alignItems:z?"left":"center"},P,{children:[(0,t.jsxs)(s.gC,{alignItems:"left",spacing:{base:4,md:2},children:[(0,t.jsxs)(s.Ug,{children:[S&&(0,t.jsxs)(t.Fragment,{children:[" ",r.url?(0,t.jsx)(a.Vp,{size:"sm",children:"\u5916\u90e8"}):r.tsubject?(0,t.jsx)(E.Z,{id:r.tsubject}):(0,t.jsx)(a.Vp,{size:"sm",children:"\u539f\u521b"})]}),n,r.hasDraft&&(0,t.jsx)(l.u,{label:"\u5728\u4e4b\u524d\u7684\u53d1\u5e03\u540e\uff0c\u6587\u7ae0\u591a\u4e86\u65b0\u7684\u5185\u5bb9\uff0c\u5e76\u4fdd\u5b58\u5728\u8349\u7a3f\u4e2d\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u70b9\u51fb\u53f3\u8fb9\u7684\u7f16\u8f91\u56fe\u6807\u6216\u5728\u8349\u7a3f\u5217\u8868\u4e2d\u67e5\u770b\u7f16\u8f91",children:(0,t.jsx)(a.Vp,{size:"sm",colorScheme:"gray",variant:"outline",children:"\u6709\u8349\u7a3f"})}),r.approval&&(0,t.jsx)(y.Z,{approval:r.approval}),Q()&&(0,t.jsx)(b.Z,{disabled:Q()}),K().length>0&&(0,t.jsx)(t.Fragment,{children:K().map((function(e){return(0,t.jsx)(b.Z,{disabled:e})}))}),(0,t.jsx)(s.X6,{size:"sm",as:"a",href:(0,v.Zb)(r),children:r.title?r.title:"No Title"})]}),(0,t.jsxs)(s.Ug,{fontSize:".8rem",children:[r.created?(0,t.jsxs)(s.xv,{children:["\u53d1\u5e03\u4e8e ",(0,F.Zh)(r.created)," \xb7"]}):(0,t.jsx)(s.xv,{children:"\u5c1a\u672a\u53d1\u5e03 \xb7"}),r.updated&&(0,t.jsxs)(s.xv,{children:["\u4fee\u6539\u4e8e ",(0,F.Zh)(r.updated)]})]}),(0,t.jsxs)(s.kC,{alignItems:"center",children:[(0,t.jsxs)(s.Ug,{layerStyle:"textSecondary",spacing:"2",fontSize:".8rem",mr:"6",children:[(0,t.jsxs)(s.Ug,{children:[(0,t.jsx)(x.BgW,{}),(0,t.jsx)(s.xv,{children:r.likes})]}),(0,t.jsxs)(s.Ug,{children:[(0,t.jsx)(x.ZvA,{}),(0,t.jsx)(s.xv,{children:r.comments})]}),(0,t.jsxs)(s.Ug,{children:[(0,t.jsx)(x.z5B,{}),(0,t.jsx)(s.xv,{children:r.views})]})]}),(0,t.jsx)(W.Z,{tags:r.rawTags,fontSize:"0.8rem"})]})]}),$&&(0,t.jsxs)(s.Ug,{pt:{base:3,md:0},layerStyle:"textSecondary",children:[C&&r.status!=h.n.Published&&r.status!=h.n.Approval&&r.status!=h.n.Disabled&&(0,t.jsx)(u.zx,{size:"sm",variant:"ghost",onClick:R,children:"\u516c\u4f17\u53d1\u5e03"}),(0,p.MW)(r.id)==p.iJ.Series&&(0,t.jsx)(u.zx,{size:"sm",variant:"ghost",onClick:function(){return X(r.id)},children:"\u6536\u5f55"}),k&&(r.status==h.n.Published||r.status==h.n.Hidden)&&(0,t.jsx)(l.u,{label:r.pinned?"\u53d6\u6d88\u7f6e\u9876":"\u7f6e\u9876",children:(0,t.jsx)(u.hU,{"aria-label":"a icon button",variant:"ghost",_focus:{border:null},icon:(0,t.jsx)(D.N0Z,{}),onClick:function(){return k(r.id)},color:r.pinned?"var(--chakra-colors-brand-500)":(0,d.ff)(m.Z.textColor.light,m.Z.textColor.dark)})}),g&&(0,t.jsx)(l.u,{label:"\u7f16\u8f91",children:(0,t.jsx)(u.hU,{color:"current","aria-label":"a icon button",variant:"ghost",_focus:{border:null},icon:(0,j.a)("edit","1rem"),onClick:function(){return g(r)}})}),w&&(0,t.jsx)(l.u,{label:"\u5220\u9664",children:(0,t.jsx)(u.hU,{color:"current","aria-label":"a icon button",variant:"ghost",_focus:{border:null},icon:(0,t.jsx)(x.lp8,{}),onClick:function(){return H(!0)}})})]}),(0,t.jsx)(U,{id:L,onClose:function(){return X(null)}}),(0,t.jsx)(f.aR,{isOpen:V,leastDestructiveRef:J,onClose:N,children:(0,t.jsx)(f.dh,{children:(0,t.jsxs)(f._T,{children:[(0,t.jsxs)(f.fY,{fontSize:"lg",fontWeight:"bold",children:["\u5220\u9664\u7cfb\u5217 -  ",r.title]}),(0,t.jsx)(f.iP,{children:"\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f\u4e00\u65e6\u5220\u9664\uff0c\u5c31\u518d\u4e5f\u65e0\u6cd5\u6062\u590d"}),(0,t.jsxs)(f.xo,{children:[(0,t.jsx)(u.zx,{ref:J,onClick:N,children:"Cancel"}),(0,t.jsx)(u.zx,{colorScheme:"red",onClick:function(){return e.onDelete(r.id)},ml:3,children:"Delete"})]})]})})}),(0,t.jsx)(f.aR,{isOpen:T,leastDestructiveRef:J,onClose:A,children:(0,t.jsx)(f.dh,{children:(0,t.jsxs)(f._T,{children:[(0,t.jsxs)(f.fY,{fontSize:"lg",fontWeight:"bold",children:["\u53d1\u5e03\u7cfb\u5217 -  ",r.title]}),(0,t.jsxs)(f.iP,{children:["\u53d1\u5e03\u540e\uff0c\u4f60\u7684\u5185\u5bb9\u5c06\u5bf9\u6240\u6709\u7528\u6237\u53ef\u89c1\uff0c\u5e76\u88ab\u63a8\u8350\u5230\u5404\u4e2a\u9875\u9762\u3002",(0,t.jsx)(s.xv,{fontWeight:"extrabold",mt:"2",fontSize:"1.1rem",children:"\u56e0\u6b64\u8bf7\u52a1\u5fc5\u786e\u4fdd\u5185\u5bb9\u8d28\u91cf\u8db3\u591f\u65f6\uff0c\u518d\u8fdb\u884c\u53d1\u5e03\uff01"})]}),(0,t.jsxs)(f.xo,{children:[(0,t.jsx)(u.zx,{ref:J,onClick:A,children:"\u53d6\u6d88"}),(0,t.jsx)(u.zx,{colorScheme:"red",onClick:function(){return e.onPublish(r.id)},ml:3,children:"\u53d1\u5e03"})]})]})})})]}))}},70660:function(e,n,r){r.d(n,{k:function(){return v}});var t=r(34051),i=r.n(t),o=r(85893),s=r(32095),c=r(68527),a=r(96356),l=r(92178),u=r(67294),d=r(84696),f=r(87079);function h(e,n,r,t,i,o,s){try{var c=e[o](s),a=c.value}catch(l){return void r(l)}c.done?n(a):Promise.resolve(a).then(t,i)}function p(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){p(e,n,r[n])}))}return e}function j(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}n.Z=function(e){var n=e.id,r=e.tsubject,t=e.isText,l=void 0!==t&&t,f=e.size,p=void 0===f?"sm":f,b=j(e,["id","tsubject","isText","size"]),y=(0,u.useState)(r),m=y[0],g=y[1],w=function(){var e,r=(e=i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.rR.get("/translate/tsubject/".concat(n));case 2:r=e.sent,g(r.data);case 4:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,i){var o=e.apply(n,r);function s(e){h(o,t,i,s,c,"next",e)}function c(e){h(o,t,i,s,c,"throw",e)}s(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,o.jsxs)(s.J2,{trigger:"hover",onOpen:m?null:w,isLazy:!0,children:[(0,o.jsx)(s.xo,{children:l?(0,o.jsx)(c.xv,x({},b,{children:"\u7ffb\u8bd1"})):(0,o.jsx)(a.Vp,x({colorScheme:"orange",size:p},b,{cursor:"pointer",as:"a",target:"_blank",href:"/t/about",children:"\u7ffb\u8bd1"}))}),(0,o.jsxs)(s.yk,{children:[(0,o.jsx)(s.QH,{}),(0,o.jsx)(s.Yt,{fontSize:"0.9rem",layerStyle:"gradientText",children:"\u672c\u6587\u9009\u81ea\u7ffb\u8bd1\u8865\u5168\u8ba1\u5212"}),m&&(0,o.jsx)(s.b,{_focus:{outline:"none"},children:(0,o.jsx)(v,{tsubject:m})})]})]})};var v=function(e){var n=e.tsubject;return(0,o.jsxs)(c.gC,{alignItems:"start",fontSize:"0.9rem",children:[(0,o.jsxs)(c.Ug,{fontWeight:"bold",children:[(0,o.jsx)(c.xv,{minW:"fit-content",children:"\u7ffb\u8bd1:"}),(0,o.jsx)(l.Z,{userId:n.tlor.id,children:(0,o.jsx)(c.rU,{target:"_blank",href:(0,f.Ab)(n.tlor),children:(0,o.jsx)(c.xv,{children:n.tlor.nickname})})})]}),(0,o.jsxs)(c.Ug,{mt:"2",children:[(0,o.jsx)(c.xv,{minW:"fit-content",children:"\u9009\u9898:"}),(0,o.jsx)(l.Z,{userId:n.creator.id,children:(0,o.jsx)(c.rU,{target:"_blank",href:(0,f.Ab)(n.creator),children:(0,o.jsx)(c.xv,{children:n.creator.nickname})})})]}),(0,o.jsxs)(c.Ug,{mt:"2",children:[(0,o.jsx)(c.xv,{minW:"fit-content",children:"\u539f\u6587:"}),(0,o.jsx)(c.rU,{href:n.url,target:"_blank",children:(0,o.jsx)(c.xv,{noOfLines:1,children:n.url})})]})]})}},41665:function(e,n,r){var t;r.d(n,{F:function(){return t}}),function(e){e[e.Begin=1]="Begin",e[e.Success=2]="Success",e[e.Failed=3]="Failed"}(t||(t={}))},70201:function(e,n,r){var t;r.d(n,{n:function(){return t},W:function(){return i}}),function(e){e[e.All=0]="All",e[e.Draft=1]="Draft",e[e.Published=2]="Published",e[e.Hidden=3]="Hidden",e[e.Forbidden=4]="Forbidden",e[e.Approval=5]="Approval",e[e.Disabled=6]="Disabled"}(t||(t={}));var i=function(e){return e!=t.Approval&&e!=t.Disabled}}}]);