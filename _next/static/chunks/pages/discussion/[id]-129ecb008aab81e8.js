(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7423,4349],{9680:function(e,n,r){"use strict";r.d(n,{Y8:function(){return w},Ee:function(){return g},xL:function(){return y},ar:function(){return p}});var t=r(11604),i=r(94244),s=r(19703),o=r(67294),a=r(26450),c=r(97375),l=r(79762),u=r(1358);function d(e,n){if(null==e)return{};var r,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}function h(){return h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},h.apply(this,arguments)}var f=["onChange","value","defaultValue","name","isDisabled","isFocusable","isNative"];function p(e){void 0===e&&(e={});var n=e,r=n.onChange,t=n.value,i=n.defaultValue,l=n.name,u=n.isDisabled,p=n.isFocusable,v=n.isNative,x=d(n,f),m=o.useState(i||""),j=m[0],g=m[1],b=(0,c.pY)(t,j),y=b[0],k=b[1],C=o.useRef(null),w=o.useCallback((function(){var e=C.current;if(e){var n="input:not(:disabled):checked",r=e.querySelector(n);if(r)r.focus();else{n="input:not(:disabled)";var t=e.querySelector(n);null==t||t.focus()}}}),[]),S=(0,c.Me)(void 0,"radio"),P=l||S,z=o.useCallback((function(e){var n=(0,s.kA)(e)?e.target.value:e;y||g(n),null==r||r(String(n))}),[r,y]),_=o.useCallback((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),h({},e,{ref:(0,a.lq)(n,C),role:"radiogroup"})}),[]),I=o.useCallback((function(e,n){var r;return void 0===e&&(e={}),void 0===n&&(n=null),h({},e,((r={ref:n,name:P})[v?"checked":"isChecked"]=null!=k?e.value===k:void 0,r.onChange=z,r["data-radiogroup"]=!0,r))}),[v,P,z,k]);return{getRootProps:_,getRadioProps:I,name:P,ref:C,focus:w,setValue:g,value:k,onChange:z,isDisabled:u,isFocusable:p,htmlProps:x}}var v=["colorScheme","size","variant","children","className","isDisabled","isFocusable"],x=(0,a.kr)({name:"RadioGroupContext",strict:!1}),m=x[0],j=x[1],g=(0,t.Gp)((function(e,n){var r=e.colorScheme,i=e.size,a=e.variant,c=e.children,l=e.className,u=e.isDisabled,f=e.isFocusable,x=p(d(e,v)),j=x.value,g=x.onChange,b=x.getRootProps,y=x.name,k=x.htmlProps,C=o.useMemo((function(){return{name:y,size:i,onChange:g,colorScheme:r,value:j,variant:a,isDisabled:u,isFocusable:f}}),[y,i,g,r,j,a,u,f]),w=b(k,n),S=(0,s.cx)("chakra-radio-group",l);return o.createElement(m,{value:C},o.createElement(t.m$.div,h({},w,{className:S}),c))}));s.Ts&&(g.displayName="RadioGroup");var b=["defaultIsChecked","defaultChecked","isChecked","isFocusable","isDisabled","isReadOnly","isRequired","onChange","isInvalid","name","value","id","data-radiogroup","aria-describedby"];function y(e){void 0===e&&(e={});var n=e,r=n.defaultIsChecked,t=n.defaultChecked,i=void 0===t?r:t,a=n.isChecked,f=n.isFocusable,p=n.isDisabled,v=n.isReadOnly,x=n.isRequired,m=n.onChange,g=n.isInvalid,y=n.name,C=n.value,w=n.id,S=n["data-radiogroup"],P=n["aria-describedby"],z=d(n,b),_=(0,c.Me)(void 0,"radio"),I=(0,l.NJ)(),D=j(),R=!!I&&!(!!D||!!S)?I.id:_;R=null!=w?w:R;var N=null!=p?p:null==I?void 0:I.isDisabled,O=null!=v?v:null==I?void 0:I.isReadOnly,E=null!=x?x:null==I?void 0:I.isRequired,Z=null!=g?g:null==I?void 0:I.isInvalid,B=(0,c.kt)(),F=B[0],U=B[1],$=(0,c.kt)(),q=$[0],T=$[1],A=(0,c.kt)(),L=A[0],M=A[1],H=(0,o.useState)(Boolean(i)),Y=H[0],V=H[1],G=(0,c.pY)(a,Y),W=G[0],J=G[1];(0,s.ZK)({condition:!!r,message:'The "defaultIsChecked" prop has been deprecated and will be removed in a future version. Please use the "defaultChecked" prop instead, which mirrors default React checkbox behavior.'});var K=(0,o.useCallback)((function(e){O||N?e.preventDefault():(W||V(e.target.checked),null==m||m(e))}),[W,N,O,m]),Q=(0,o.useCallback)((function(e){" "===e.key&&M.on()}),[M]),X=(0,o.useCallback)((function(e){" "===e.key&&M.off()}),[M]),ee=(0,o.useCallback)((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),h({},e,{ref:n,"data-active":(0,s.PB)(L),"data-hover":(0,s.PB)(q),"data-disabled":(0,s.PB)(N),"data-invalid":(0,s.PB)(Z),"data-checked":(0,s.PB)(J),"data-focus":(0,s.PB)(F),"data-readonly":(0,s.PB)(O),"aria-hidden":!0,onMouseDown:(0,s.v0)(e.onMouseDown,M.on),onMouseUp:(0,s.v0)(e.onMouseUp,M.off),onMouseEnter:(0,s.v0)(e.onMouseEnter,T.on),onMouseLeave:(0,s.v0)(e.onMouseLeave,T.off)})}),[L,q,N,Z,J,F,O,M.on,M.off,T.on,T.off]),ne=null!=I?I:{},re=ne.onFocus,te=ne.onBlur,ie=(0,o.useCallback)((function(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=N&&!f;return h({},e,{id:R,ref:n,type:"radio",name:y,value:C,onChange:(0,s.v0)(e.onChange,K),onBlur:(0,s.v0)(te,e.onBlur,U.off),onFocus:(0,s.v0)(re,e.onFocus,U.on),onKeyDown:(0,s.v0)(e.onKeyDown,Q),onKeyUp:(0,s.v0)(e.onKeyUp,X),checked:J,disabled:r,readOnly:O,required:E,"aria-invalid":(0,s.Qm)(Z),"aria-disabled":(0,s.Qm)(r),"aria-required":(0,s.Qm)(E),"data-readonly":(0,s.PB)(O),"aria-describedby":P,style:u.NL})}),[N,f,R,y,C,K,te,U,re,Q,X,J,O,E,Z,P]);return{state:{isInvalid:Z,isFocused:F,isChecked:J,isActive:L,isHovered:q,isDisabled:N,isReadOnly:O,isRequired:E},getCheckboxProps:ee,getInputProps:ie,getLabelProps:function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),h({},e,{ref:n,onMouseDown:(0,s.v0)(e.onMouseDown,k),onTouchStart:(0,s.v0)(e.onTouchStart,k),"data-disabled":(0,s.PB)(N),"data-checked":(0,s.PB)(J),"data-invalid":(0,s.PB)(Z)})},getRootProps:function(e,n){return void 0===n&&(n=null),h({},e,{ref:n,"data-disabled":(0,s.PB)(N),"data-checked":(0,s.PB)(J),"data-invalid":(0,s.PB)(Z)})},htmlProps:z}}function k(e){e.preventDefault(),e.stopPropagation()}var C=["spacing","children","isFullWidth","isDisabled","isFocusable","inputProps"],w=(0,t.Gp)((function(e,n){var r,a=j(),c=e.onChange,l=e.value,u=(0,t.jC)("Radio",h({},a,e)),f=(0,t.Lr)(e),p=f.spacing,v=void 0===p?"0.5rem":p,x=f.children,m=f.isFullWidth,g=f.isDisabled,b=void 0===g?null==a?void 0:a.isDisabled:g,k=f.isFocusable,w=void 0===k?null==a?void 0:a.isFocusable:k,S=f.inputProps,P=d(f,C),z=e.isChecked;null!=(null==a?void 0:a.value)&&null!=l&&(z=a.value===l);var _=c;null!=a&&a.onChange&&null!=l&&(_=(0,s.PP)(a.onChange,c));var I=y(h({},P,{isChecked:z,isFocusable:w,isDisabled:b,onChange:_,name:null!=(r=null==e?void 0:e.name)?r:null==a?void 0:a.name})),D=I.getInputProps,R=I.getCheckboxProps,N=I.getLabelProps,O=I.getRootProps,E=I.htmlProps,Z=(0,s.Vl)(E,i.oE),B=Z[0],F=R(Z[1]),U=D(S,n),$=N(),q=Object.assign({},B,O()),T=h({width:m?"full":void 0,display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer"},u.container),A=h({display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},u.control),L=h({userSelect:"none",marginStart:v},u.label);return o.createElement(t.m$.label,h({className:"chakra-radio"},q,{__css:T}),o.createElement("input",h({className:"chakra-radio__input"},U)),o.createElement(t.m$.span,h({className:"chakra-radio__control"},F,{__css:A})),x&&o.createElement(t.m$.span,h({className:"chakra-radio__label"},$,{__css:L}),x))}));s.Ts&&(w.displayName="Radio")},11391:function(e,n,r){"use strict";r.d(n,{Ph:function(){return x}});var t=r(79762),i=r(11604),s=r(94244),o=r(19703),a=r(38554),c=r.n(a),l=r(67294);function u(){return u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},u.apply(this,arguments)}function d(e,n){if(null==e)return{};var r,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}var h=["children","placeholder","className"],f=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize","isFullWidth"],p=["children"],v=(0,i.Gp)((function(e,n){var r=e.children,t=e.placeholder,s=e.className,a=d(e,h);return l.createElement(i.m$.select,u({},a,{ref:n,className:(0,o.cx)("chakra-select",s)}),t&&l.createElement("option",{value:""},t),r)}));o.Ts&&(v.displayName="SelectField");var x=(0,i.Gp)((function(e,n){var r=(0,i.jC)("Select",e),a=(0,i.Lr)(e),h=a.rootProps,p=a.placeholder,x=a.icon,m=a.color,j=a.height,b=a.h,y=a.minH,k=a.minHeight,C=a.iconColor,w=a.iconSize;a.isFullWidth;var S=d(a,f),P=(0,o.Vl)(S,s.oE),z=P[0],_=P[1],I=(0,t.Yp)(_),D={width:"100%",height:"fit-content",position:"relative",color:m},R=c()({paddingEnd:"2rem"},r.field,{_focus:{zIndex:"unset"}});return l.createElement(i.m$.div,u({className:"chakra-select__wrapper",__css:D},z,h),l.createElement(v,u({ref:n,height:null!=b?b:j,minH:null!=y?y:k,placeholder:p},I,{__css:R}),e.children),l.createElement(g,u({"data-disabled":(0,o.PB)(I.disabled)},(C||m)&&{color:C||m},{__css:r.icon},w&&{fontSize:w}),x))}));o.Ts&&(x.displayName="Select");var m=function(e){return l.createElement("svg",u({viewBox:"0 0 24 24"},e),l.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},j=(0,i.m$)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),g=function(e){var n=e.children,r=void 0===n?l.createElement(m,null):n,t=d(e,p),i=l.cloneElement(r,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return l.createElement(j,u({},t,{className:"chakra-select__icon-wrapper"}),l.isValidElement(r)?i:null)};o.Ts&&(g.displayName="SelectIcon")},33441:function(e,n,r){"use strict";r.d(n,{g:function(){return l}});var t=r(79762),i=r(11604),s=r(19703),o=r(67294);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},a.apply(this,arguments)}var c=["className","rows"],l=(0,i.Gp)((function(e,n){var r=(0,i.mq)("Textarea",e),l=(0,i.Lr)(e),u=l.className,d=l.rows,h=function(e,n){if(null==e)return{};var r,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)r=s[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(l,c),f=(0,t.Yp)(h),p=d?(0,s.CE)(r,["h","minH","height","minHeight"]):r;return o.createElement(i.m$.textarea,a({ref:n,rows:d},f,{className:(0,s.cx)("chakra-textarea",u),__css:p}))}));s.Ts&&(l.displayName="Textarea")},87768:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/discussion/[id]",function(){return r(80929)}])},80929:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return oe}});var t=r(34051),i=r.n(t),s=r(85893),o=r(28609),a=r(97375),c=r(68527),l=r(96356),u=r(4612),d=r(15193),h=r(67294),f=r(67989),p=r(11604),v=r(89583),x=r(75543),m=r(84696),j=r(71835),g=r(51646),b=r(92178),y=r(87079),k=r(85832),C=r(46870),w=r(38951),S=r(70577);function P(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function z(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){P(s,t,i,o,a,"next",e)}function a(e){P(s,t,i,o,a,"throw",e)}o(void 0)}))}}function _(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){_(e,n,r[n])}))}return e}var D=function(e){var n=e.comment,r=e.user,t=e.onCreate,o=e.onChange,a=e.parentId,l=e.onRemove,u=e.simple,P=void 0===u||u,_=(0,h.useState)(!1),D=_[0],R=_[1],N=(0,h.useState)(!1),O=N[0],E=N[1],Z=(0,h.useState)(!1),B=Z[0],F=Z[1],U=(0,h.useState)(""),$=U[0],q=U[1],T=function(){var e=z(i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/answer/reply",{targetID:a,md:n});case 2:r=e.sent,F(!1),t(r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),A=function(){var e=z(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/answer/reply",I({},n,{md:r}));case 2:R(!1),n.md=r,o();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=function(){var e=z(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.delete("/discussion/answer/reply/".concat(n));case 2:l(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),M=function(){""===n.creator.nickname?q("@".concat(n.creator.username," ")):q("@[".concat(n.creator.nickname,"](/").concat(n.creator.username,") ")),F(!B)};return(0,s.jsx)(s.Fragment,{children:D?r&&(0,s.jsx)(x.Z,{user:r,md:n.md,onSubmit:function(e){R(!1),A(e)},onCancel:function(){return R(!1)},menu:!1}):(0,s.jsxs)(c.gC,{alignItems:"left",children:[P?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.J,{md:n.md,fontSize:".95rem"}),(0,s.jsxs)(c.kC,{justify:"space-between",children:[(0,s.jsx)(k.Z,{liked:n.liked,count:n.likes,storyID:n.id,fontSize:".95rem"}),(0,s.jsxs)(c.Ug,{children:[(0,s.jsx)(b.Z,{userId:n.creatorID,children:(0,s.jsx)(c.xv,{as:"a",cursor:"pointer",fontSize:".9rem",href:(0,y.Ab)(n.creator),children:n.creator.nickname})}),(0,s.jsx)(c.xv,{layerStyle:"textSecondary",fontSize:"sm",children:(0,C.Zh)(n.created)}),r&&(0,s.jsx)(d.hU,{"aria-label":"go to github",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,s.jsx)(v.Bjt,{}),onClick:M,size:"sm"}),(0,s.jsxs)(f.v2,{children:[(0,s.jsx)(d.hU,{as:f.j2,"aria-label":"go to github",variant:"ghost",color:"gray.500",icon:(0,s.jsx)(p.m$.svg,{fill:"gray.500",height:"1rem",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-207.5 86.6l115-115.1c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L256 303l-99.5-99.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l115 115.1c4.8 4.6 12.4 4.6 17.1-.1z"})}),_hover:{bg:"none"},_focus:{border:"none"},_active:{bg:"none"}}),(0,s.jsxs)(f.qy,{children:[r&&r.id==n.creator.id&&(0,s.jsxs)(f.sN,{onClick:function(){return R(!0)},children:[(0,s.jsx)(v.ffH,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Edit"})]}),r&&(r.id==n.creator.id||(0,S.SL)(r.role))&&(0,s.jsxs)(f.sN,{onClick:function(){return L(n.id)},children:[(0,s.jsx)(v.lp8,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Delete"})]}),(0,s.jsxs)(f.sN,{onClick:function(){return E(!0)},children:[(0,s.jsx)(v.A5b,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Report"})]})]})]})]})]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(w.xG,{comment:n,user:r,size:"sm",showAvatar:!1,isDiscussion:!0,children:(0,s.jsxs)(c.Ug,{children:[r&&(0,s.jsx)(d.hU,{"aria-label":"go to github",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,s.jsx)(v.Bjt,{}),onClick:M,size:"sm"}),(0,s.jsxs)(f.v2,{children:[(0,s.jsx)(d.hU,{as:f.j2,"aria-label":"go to github",variant:"ghost",color:"gray.500",icon:(0,s.jsx)(p.m$.svg,{fill:"gray.500",height:"1rem",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-207.5 86.6l115-115.1c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L256 303l-99.5-99.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l115 115.1c4.8 4.6 12.4 4.6 17.1-.1z"})}),_hover:{bg:"none"},_focus:{border:"none"},_active:{bg:"none"}}),(0,s.jsxs)(f.qy,{children:[r&&(0,s.jsxs)(f.sN,{onClick:function(){return R(!0)},children:[(0,s.jsx)(v.ffH,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Edit"})]}),r&&(0,s.jsxs)(f.sN,{onClick:function(){return L(n.id)},children:[(0,s.jsx)(v.lp8,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Delete"})]}),(0,s.jsxs)(f.sN,{onClick:function(){return E(!0)},children:[(0,s.jsx)(v.A5b,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Report"})]})]})]})]})})}),O&&(0,s.jsx)(j.Z,{targetID:n.id,onClose:function(){return E(!1)}}),B&&(0,s.jsx)(c.xu,{pr:"2",children:(0,s.jsx)(x.Z,{user:r,md:$,onSubmit:function(e){T(e)},onCancel:function(){return F(!1)},menu:!1})})]})})},R=r(11391),N=r(62665),O=r(47398),E=r(88718),Z=r(1950),B=r(96486),F=r(21948),U=r(17869),$=function(e){var n=e.user,r=e.time,t=e.isAnswer,i=void 0===t||t;return(0,s.jsxs)(c.Ug,{alignItems:"center",p:"2",children:[(0,s.jsx)(U.Z,{user:n,size:"sm",isDiscussion:!0}),(0,s.jsxs)(c.xv,{fontSize:"sm",layerStyle:"textSecondary",children:[i?"\xb7 \u56de\u7b54\u4e8e":"\xb7 \u63d0\u95ee\u4e8e"," ",(0,C.Zh)(r)]})]})},q=r(20640),T=r.n(q),A=function(){var e=(0,o.pm)();return function(n){T()(n),e({description:"\u590d\u5236\u6210\u529f",status:"success",duration:2e3,isClosable:!0})}};function L(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function M(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){L(s,t,i,o,a,"next",e)}function a(e){L(s,t,i,o,a,"throw",e)}o(void 0)}))}}function H(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Y(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){H(e,n,r[n])}))}return e}var V=function(e){var n,r=e.answer,t=e.user,o=e.onChange,u=e.onRemove,b=e.isCreator,y=void 0!==b&&b,C=e.adopted,w=e.onAdopted,P=e.highlight,z=void 0!==P&&P,_=A(),I=(0,a.qY)(),R=I.isOpen,N=I.onOpen,U=I.onClose,q=h.useRef(),T=(0,h.useState)(!1),L=T[0],H=T[1],V=(0,h.useState)(!1),G=V[0],W=V[1],J=(0,h.useState)(!1),K=J[0],Q=J[1],X=(0,h.useState)(""),ee=X[0],ne=(X[1],function(){var e=M(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/answer/reply",{targetID:r.id,md:n});case 2:t=e.sent,Q(!1),r.replies.unshift(t.data),o();case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),re=function(){var e=M(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.md=n,e.next=3,m.rR.post("/discussion/answer",Y({},r,{md:n}));case 3:H(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=M(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.delete("/discussion/answer/".concat(n));case 2:u(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=M(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/adopt/".concat(r.id));case 2:w(r.id);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[L?t&&(0,s.jsx)(x.Z,{user:t,md:r.md,onSubmit:function(e){H(!1),re(e)},onCancel:function(){return H(!1)},menu:!1}):(0,s.jsx)(Z.ZP,{p:"2",className:(C==r.id||z)&&"highlight-bordered",id:r.id,children:(0,s.jsxs)(c.Ug,{alignItems:"start",spacing:"2",children:[(0,s.jsxs)(c.gC,{children:[(0,s.jsx)(k.Z,{liked:r.liked,count:r.likes,storyID:r.id,fontSize:".95rem"}),C==r.id&&(0,s.jsx)(l.Vp,{colorScheme:"green",children:(0,s.jsx)(v.l_A,{})})]}),(0,s.jsxs)(c.gC,{alignItems:"left",spacing:"4",width:"100%",children:[(0,s.jsxs)(c.gC,{alignItems:"left",children:[(0,s.jsx)(g.J,{md:r.md,fontSize:"1rem"}),(0,s.jsxs)(c.kC,{justifyContent:"space-between",children:[(0,s.jsx)($,{user:r.creator,time:r.created}),(0,s.jsxs)(c.Ug,{spacing:"2",children:[!C&&y&&(0,s.jsx)(O.u,{label:"\u91c7\u7eb3\u4e3a\u6700\u4f73\u56de\u7b54",children:(0,s.jsx)(d.hU,{"aria-label":"",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,F.a)("up","1.4rem"),onClick:ie,size:"sm"})}),t&&(0,s.jsx)(O.u,{label:"\u56de\u590d",children:(0,s.jsx)(d.hU,{"aria-label":"",variant:"ghost",_focus:{border:null},color:"gray.500",icon:(0,s.jsx)(v.Bjt,{}),onClick:function(){return Q(!K)},size:"sm"})}),(0,s.jsxs)(f.v2,{children:[(0,s.jsx)(d.hU,{as:f.j2,"aria-label":"go to github",variant:"ghost",color:"gray.500",icon:(0,s.jsx)(p.m$.svg,{fill:"gray.500",height:"1rem",viewBox:"0 0 512 512",children:(0,s.jsx)("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm216 248c0 118.7-96.1 216-216 216-118.7 0-216-96.1-216-216 0-118.7 96.1-216 216-216 118.7 0 216 96.1 216 216zm-207.5 86.6l115-115.1c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L256 303l-99.5-99.5c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17l115 115.1c4.8 4.6 12.4 4.6 17.1-.1z"})}),_hover:{bg:"none"},_focus:{border:"none"},_active:{bg:"none"}}),(0,s.jsxs)(f.qy,{children:[t&&t.id==r.creator.id&&(0,s.jsxs)(f.sN,{onClick:function(){return H(!0)},children:[(0,s.jsx)(v.ffH,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Edit"})]}),t&&C!=r.id&&(t.id==r.creator.id||(0,S.SL)(t.role))&&(0,s.jsxs)(f.sN,{onClick:N,children:[(0,s.jsx)(v.lp8,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Delete"})]}),(0,s.jsxs)(f.sN,{onClick:function(){return W(!0)},children:[(0,s.jsx)(v.A5b,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"Report"})]}),(0,s.jsxs)(f.sN,{onClick:function(){return _(r.id)},children:[(0,s.jsx)(v.Dup,{}),(0,s.jsx)(p.m$.span,{ml:"2",children:"\u590d\u5236\u56de\u7b54\u7684 ID"})]})]})]})]})]})]}),G&&(0,s.jsx)(j.Z,{targetID:r.id,onClose:function(){return W(!1)}}),K&&(0,s.jsx)(c.xu,{pl:"16",pr:"2",children:(0,s.jsx)(x.Z,{menu:!1,user:t,md:ee,onSubmit:ne,onCancel:function(){return Q(!1)}})}),null===(n=r.replies)||void 0===n?void 0:n.map((function(n){return(0,s.jsxs)(c.xu,{pl:"12",children:[(0,s.jsx)(c.iz,{mb:"4",mt:"0"}),(0,s.jsx)(D,{user:e.user,onCreate:function(e){r.replies.unshift(e),o()},onChange:o,onRemove:function(e){(0,B.remove)(r.replies,(function(n){return n.id==e})),o()},comment:n,parentId:r.id})]},n.id)}))]})]})}),(0,s.jsx)(E.aR,{isOpen:R,leastDestructiveRef:q,onClose:U,children:(0,s.jsx)(E.dh,{children:(0,s.jsxs)(E._T,{children:[(0,s.jsx)(E.fY,{fontSize:"lg",fontWeight:"bold",children:"\u5220\u9664\u56de\u7b54"}),(0,s.jsx)(E.iP,{children:"\u786e\u5b9a\u8981\u5220\u9664\u56de\u7b54\u5417\uff1f\u56de\u7b54\u4e00\u65e6\u5220\u9664\uff0c\u5c31\u65e0\u6cd5\u6062\u590d\uff01"}),(0,s.jsxs)(E.xo,{children:[(0,s.jsx)(d.zx,{ref:q,onClick:U,children:"\u53d6\u6d88"}),(0,s.jsx)(d.zx,{colorScheme:"red",onClick:function(){te(r.id),U()},ml:3,children:"\u5220\u9664"})]})]})})})]})},G=r(32532),W=r(11163);function J(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function K(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){J(s,t,i,o,a,"next",e)}function a(e){J(s,t,i,o,a,"throw",e)}o(void 0)}))}}var Q=function(e){var n=e.disc,r=(0,W.useRouter)(),t=(0,h.useState)([]),o=t[0],a=t[1],l=(0,h.useState)(!1),u=l[0],f=l[1],p=(0,h.useState)(G.a.Favorites),v=p[0],j=p[1],g=(0,N.Z)().session,b=(0,h.useState)(null),y=b[0],k=b[1];(0,h.useEffect)((function(){w(!0,null)}),[]);var C=function(){var e=K(i().mark((function e(r){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/answer",{targetID:n.id,md:r});case 2:t=e.sent,f(!1),t.data.replies=[],o.unshift(t.data),a((0,B.cloneDeep)(o));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(){var e=K(i().mark((function e(t,s){var o,c,l,u,d,h,f,p,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.get("/discussion/answers?id=".concat(n.id,"&sorter=").concat(null!==s&&void 0!==s?s:v));case 2:if(o=e.sent,!n.adopted){e.next=24;break}for(c=[],l=!0,u=!1,d=void 0,e.prev=6,h=o.data[Symbol.iterator]();!(l=(f=h.next()).done);l=!0)(p=f.value).id==n.adopted?c.unshift(p):c.push(p);e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),u=!0,d=e.t0;case 14:e.prev=14,e.prev=15,l||null==h.return||h.return();case 17:if(e.prev=17,!u){e.next=20;break}throw d;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return a(c),e.abrupt("return");case 24:a(o.data),r&&r.asPath.indexOf("#")>-1&&("comments"!=(x=(0,B.split)(r.asPath,"#")[1])&&k(x),setTimeout((function(){location.href="#"+(0,B.split)(r.asPath,"#")[1]}),300));case 26:case"end":return e.stop()}}),e,null,[[6,10,14,22],[15,,17,21]])})));return function(n,r){return e.apply(this,arguments)}}(),P=function(){a([]),a(o)},z=function(e){(0,B.remove)(o,(function(n){return n.id==e})),P()},_=function(e){n.adopted=e,w(!1,null)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(c.gC,{spacing:"4",alignItems:"left",id:"comments",children:[(0,s.jsx)(c.xu,{p:"2",children:(0,s.jsxs)(c.kC,{justifyContent:"space-between",px:"1",children:[(0,s.jsxs)(c.Ug,{spacing:"4",children:[(0,s.jsxs)(c.xv,{children:[" ",o.length,"  \u4e2a\u56de\u7b54 "]}),(0,s.jsxs)(R.Ph,{fontWeight:"500",cursor:"pointer",width:"120px",value:v,onChange:function(e){j(e.currentTarget.value),w(!1,e.currentTarget.value)},variant:"unstyled",children:[(0,s.jsx)("option",{value:G.a.Favorites,children:"\u5f97\u7968\u6700\u591a"}),(0,s.jsx)("option",{value:G.a.Recent,children:"\u6700\u65b0"})]})]}),(0,s.jsx)(d.zx,{size:"sm",onClick:function(e){g?f(!0):m.HN.open()},_focus:{border:null},children:"\u521b\u5efa\u56de\u7b54"})]})}),u&&g&&(0,s.jsx)(x.Z,{storyID:n.id,user:g.user,md:"",onSubmit:C,onCancel:function(){return f(!1)}}),o.map((function(e){var r,t;return(0,s.jsx)(V,{user:null===g||void 0===g?void 0:g.user,answer:e,onChange:P,onRemove:z,isCreator:(null===g||void 0===g||null===(r=g.user)||void 0===r?void 0:r.id)==n.creator.id||(0,S.SL)(null===g||void 0===g||null===(t=g.user)||void 0===t?void 0:t.role),adopted:n.adopted,onAdopted:_,highlight:y==e.id},e.id)}))]})})},X=r(85482),ee=r(37398),ne=r(30092),re=r(1429),te=r(53107);function ie(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function se(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){ie(s,t,i,o,a,"next",e)}function a(e){ie(s,t,i,o,a,"throw",e)}o(void 0)}))}}var oe=function(){var e=(0,N.Z)().session,n=((0,o.pm)(),(0,a.qY)()),r=n.isOpen,t=n.onOpen,f=n.onClose,p=(0,W.useRouter)().query.id,x=(0,h.useState)(null),b=x[0],y=x[1],k=(0,h.useState)(!1),w=k[0],S=k[1],P=(0,h.useState)(!1),z=P[0],_=P[1],I=(0,h.useState)(""),R=I[0],O=I[1],E=(0,h.useState)([]),Z=E[0],F=E[1];(0,h.useEffect)((function(){p&&U(p)}),[p]);var U=function(){var e=se(i().mark((function e(n){var r,t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.get("/discussion?id=".concat(n));case 2:return r=e.sent,y(r.data),e.next=6,m.rR.get("/discussion/replies?id=".concat(n));case 6:t=e.sent,F(t.data);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),q=function(){var e=se(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.rR.post("/discussion/answer/reply",{targetID:b.id,md:R});case 2:n=e.sent,_(!1),Z.unshift(n.data),F((0,B.cloneDeep)(Z));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(ne.Z,{children:[b&&(0,s.jsxs)(c.Ug,{alignItems:"top",children:[(0,s.jsxs)(c.xu,{width:["100%","100%","70%","70%"],height:"fit-content",pl:[0,0,"0%","5%"],children:[(0,s.jsxs)(c.kC,{justify:"space-between",children:[(0,s.jsxs)(c.gC,{alignItems:"left",spacing:"3",children:[(0,s.jsxs)(c.Ug,{children:[b.reward>0&&(0,s.jsxs)(l.Vp,{colorScheme:"orange",children:["\u60ac\u8d4f ",b.reward]}),(0,s.jsx)(c.X6,{size:"sm",children:b.title})]}),(0,s.jsxs)(c.Ug,{fontSize:"0.9rem",children:[(0,s.jsxs)(c.xv,{children:["\u63d0\u95ee\u4e8e ",(0,C.Zh)(b.created)]}),b.updated&&(0,s.jsxs)(c.xv,{children:["\u4fee\u6539\u4e8e ",(0,C.Zh)(b.updated)]}),(0,s.jsxs)(c.xv,{children:["\u88ab\u6d4f\u89c8 ",b.views," \u6b21"]})]})]}),(0,s.jsx)(re.Z,{followed:b.followed,targetID:b.id,size:"sm"})]}),(0,s.jsx)(c.iz,{my:"5"}),(0,s.jsxs)(c.Ug,{alignItems:"top",children:[(0,s.jsx)(X.Z,{story:b,pos:null,showBg:!1,size:"sm",onStoryChange:function(){return y((0,B.cloneDeep)(b))}}),(0,s.jsxs)(c.gC,{alignItems:"left",spacing:"8",width:"100%",children:[b.md&&(0,s.jsx)(c.xu,{px:"4",className:"side-card",children:(0,s.jsx)(g.J,{md:b.md,py:"2",mt:"0",fontSize:"1rem"})}),(0,s.jsxs)(c.kC,{justify:"space-between",alignItems:"start",children:[(0,s.jsxs)(c.gC,{alignItems:"lefts",spacing:"4",mt:"3",children:[(0,s.jsx)(c.Ug,{spacing:"3",children:b.rawTags.map((function(e){return(0,s.jsx)(ee.Z,{tag:e},e.id)}))}),(0,s.jsxs)(c.Ug,{fontSize:"sm",layerStyle:"textSecondary",spacing:"4",children:[(0,s.jsxs)(c.Ug,{spacing:"0",cursor:"pointer",onClick:function(){return t()},children:[(0,s.jsx)(v.RcD,{}),(0,s.jsx)(c.xv,{children:"\u8ffd\u52a0\u60ac\u8d4f"})]}),(0,s.jsxs)(c.Ug,{spacing:"1",cursor:"pointer",onClick:function(){return _(!z)},children:[(0,s.jsx)(v.Bjt,{}),(0,s.jsx)(c.xv,{children:"\u56de\u590d"})]}),(0,s.jsxs)(c.Ug,{spacing:"1",cursor:"pointer",onClick:function(){return S(!0)},children:[(0,s.jsx)(v.A5b,{}),(0,s.jsx)(c.xv,{children:"Report"})]})]}),w&&(0,s.jsx)(j.Z,{targetID:b.id,onClose:function(){return S(!1)}})]}),(0,s.jsx)($,{user:b.creator,time:b.created,isAnswer:!1})]}),z&&(0,s.jsxs)(c.xu,{p:"4",className:"side-card",children:[(0,s.jsx)(u.II,{size:"sm",placeholder:"\u8be2\u95ee\u7ec6\u8282\u6216\u63d0\u51fa\u4fee\u6539\u610f\u89c1",value:R,onChange:function(e){return O(e.currentTarget.value)}}),(0,s.jsxs)(c.kC,{px:"1",mt:"4",justify:"space-between",alignItems:"center",children:[(0,s.jsx)(c.xv,{layerStyle:"textSecondary",fontSize:"sm",children:"\u5982\u679c\u5bf9\u4f60\u6709\u5e2e\u52a9\uff0c\u8bf7\u70b9\u8d5e\u8ba9\u95ee\u9898\u6216\u7b54\u6848\u88ab\u66f4\u591a\u4eba\u770b\u5230"}),(0,s.jsx)(d.zx,{size:"sm",variant:"ghost",onClick:q,children:"\u63d0\u4ea4\u56de\u590d"})]})]}),(0,s.jsx)(c.iz,{}),(0,s.jsx)(c.xu,{children:(0,s.jsx)(Q,{disc:b})})]})]})]}),Z.length>0&&(0,s.jsx)(c.xu,{width:["100%","100%","25%","25%"],p:"4",height:"fit-content",className:"side-card",display:{base:"none",md:"block"},children:(0,s.jsxs)(c.xu,{children:[(0,s.jsx)(c.xv,{mb:"6",children:"\u5173\u4e8e\u95ee\u9898\u7ec6\u8282\u7684\u8ba8\u8bba"}),null===Z||void 0===Z?void 0:Z.map((function(n){return(0,s.jsxs)(c.xu,{children:[(0,s.jsx)(D,{user:null===e||void 0===e?void 0:e.user,onCreate:function(e){Z.unshift(e),F((0,B.cloneDeep)(Z))},onRemove:function(e){(0,B.remove)(Z,(function(n){return n.id==e})),F((0,B.cloneDeep)(Z))},comment:n,parentId:b.id,onChange:function(){return F((0,B.cloneDeep)(Z))},simple:!1}),(0,s.jsx)(c.iz,{mb:"4",mt:"0"})]},n.id)}))]})})]}),b&&(0,s.jsx)(te.Z,{id:b.id,isOpen:r,onClose:f,onChange:function(e){b.reward+=e,y((0,B.cloneDeep)(b))}})]})}},1429:function(e,n,r){"use strict";var t=r(34051),i=r.n(t),s=r(85893),o=r(15193),a=r(67294),c=r(89583),l=r(84696);function u(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}n.Z=function(e){var n=e.size,r=void 0===n?"md":n,t=e.buttonIcon,d=void 0===t||t,h=(0,a.useState)(e.followed),f=h[0],p=h[1],v=function(){var n,r=(n=i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.rR.post("/interaction/follow/".concat(e.targetID));case 2:p(!f);case 3:case"end":return n.stop()}}),n)})),function(){var e=this,r=arguments;return new Promise((function(t,i){var s=n.apply(e,r);function o(e){u(s,t,i,o,a,"next",e)}function a(e){u(s,t,i,o,a,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,s.jsx)(s.Fragment,{children:f?(0,s.jsx)(o.zx,{size:r,onClick:v,_focus:{border:null},leftIcon:d?(0,s.jsx)(c.l_A,{}):null,children:"\u5df2\u5173"}):(0,s.jsx)(o.zx,{size:r,variant:"outline",leftIcon:d?(0,s.jsx)(c.wEH,{}):null,onClick:v,_focus:{border:null},children:"\u5173\u6ce8"})})}},53107:function(e,n,r){"use strict";var t=r(34051),i=r.n(t),s=r(85893),o=r(28609),a=r(88718),c=r(68527),l=r(6886),u=r(11391),d=r(15193),h=r(97375),f=r(7657),p=r(67294),v=r(84696),x=r(87079),m=r(92178);function j(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}function g(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){j(s,t,i,o,a,"next",e)}function a(e){j(s,t,i,o,a,"throw",e)}o(void 0)}))}}n.Z=function(e){var n=e.id,r=e.isOpen,t=e.onClose,h=e.onChange,f=(0,o.pm)(),x=(0,p.useState)(5),m=x[0],j=x[1],y=function(){var e=g(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.post("/reward/add",{id:n,reward:m});case 2:t(),f({description:"\u8ffd\u52a0\u60ac\u8d4f\u6210\u529f",status:"success",duration:3e3,isClosable:!0}),h(m),j(5);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(a.u_,{isOpen:r,onClose:t,children:[(0,s.jsx)(a.ZA,{}),(0,s.jsxs)(a.hz,{children:[(0,s.jsx)(a.xB,{children:"\u8ffd\u52a0\u60ac\u8d4f"}),(0,s.jsx)(c.iz,{}),(0,s.jsxs)(a.fe,{mt:"4",children:[(0,s.jsx)(l.bZ,{status:"warning",children:"\u82e5\u4f60\u5bf9\u5185\u5bb9\u4e5f\u611f\u5174\u8da3\uff0c\u53ef\u8ffd\u52a0\u60ac\u8d4f\u79ef\u5206\uff0c\u8ba9\u5b83\u88ab\u66f4\u591a\u4eba\u770b\u5230"}),(0,s.jsxs)(c.Ug,{mt:"6",children:[(0,s.jsx)(c.xv,{children:"\u8ffd\u52a0"}),(0,s.jsxs)(u.Ph,{value:m,onChange:function(e){j(Number(e.target.value))},size:"sm",width:"120px",_focus:{border:null},children:[(0,s.jsx)("option",{value:5,children:"5 \u79ef\u5206"}),(0,s.jsx)("option",{value:10,children:"10 \u79ef\u5206"}),(0,s.jsx)("option",{value:20,children:"20 \u79ef\u5206"}),(0,s.jsx)("option",{value:30,children:"30 \u79ef\u5206"}),(0,s.jsx)("option",{value:50,children:"50 \u79ef\u5206"}),(0,s.jsx)("option",{value:100,children:"100 \u79ef\u5206"})]})]}),(0,s.jsx)(b,{id:n})]}),(0,s.jsxs)(a.mz,{children:[(0,s.jsx)(d.zx,{variant:"ghost",mr:3,onClick:t,children:"\u53d6\u6d88"}),(0,s.jsx)(d.zx,{onClick:y,children:"\u786e\u8ba4\u8ffd\u52a0"})]})]})]})};var b=function(e){var n=e.id,r=(0,h.qY)(),t=r.isOpen,o=r.onOpen,l=r.onClose,u=(0,p.useState)(null),d=u[0],j=u[1],b=(0,p.useState)(null),y=b[0],k=b[1];(0,p.useEffect)((function(){v.rR.get("/reward/users?id=".concat(n,"&limit=5")).then((function(e){return j(e.data)}))}),[]);var C=function(){var e=g(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=5;break}return e.next=3,v.rR.get("/reward/users?id=".concat(n));case 3:(r=e.sent).data&&k(r.data);case 5:o();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[d&&d.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.iz,{my:"4"}),(0,s.jsxs)(c.Ug,{children:[d.map((function(e){return(0,s.jsx)(m.Z,{userId:e.user.id,children:(0,s.jsx)(f.qE,{size:"sm",src:e.user.avatar,as:"a",href:(0,x.Ab)(e.user)})})})),(0,s.jsx)(c.rU,{onClick:C,children:(0,s.jsx)(c.xv,{fontSize:"sm",children:"\u7b49\u4eba\u5df2\u8ffd\u52a0\u8d5e\u8d4f"})})]}),(0,s.jsx)(c.iz,{mt:"4"})]}),(0,s.jsxs)(a.u_,{isOpen:t,onClose:l,children:[(0,s.jsx)(a.ZA,{}),(0,s.jsxs)(a.hz,{children:[(0,s.jsx)(a.xB,{children:"\u79ef\u5206\u8d5e\u8d4f\u8be6\u60c5"}),(0,s.jsx)(c.iz,{}),y&&(0,s.jsx)(a.fe,{children:(0,s.jsx)(c.gC,{alignItems:"left",children:y.map((function(e){return(0,s.jsxs)(c.kC,{alignItems:"center",justify:"space-between",children:[(0,s.jsx)(m.Z,{userId:e.user.id,children:(0,s.jsxs)(c.Ug,{children:[(0,s.jsx)(f.qE,{src:e.user.avatar}),(0,s.jsx)(c.xv,{children:e.user.nickname})]})}),(0,s.jsxs)(c.xv,{children:[e.reward,"\u79ef\u5206"]})]})}))})})]})]})]})}},85482:function(e,n,r){"use strict";r.d(n,{Z:function(){return k}});var t=r(34051),i=r.n(t),s=r(85893),o=r(67294),a=r(68527),c=r(47398),l=r(15193),u=r(62665),d=r(85832),h=r(3682),f=r(84696);function p(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}var v=function(e){var n=e.storyID,r=e.width,t=void 0===r?"1.4rem":r,a=(0,o.useState)(e.bookmarked),c=a[0],l=a[1],u=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.rR.post("/story/bookmark/".concat(n));case 2:l(!c);case 3:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){p(s,t,i,o,a,"next",e)}function a(e){p(s,t,i,o,a,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,s.jsx)(h.Z,{"aria-label":"bookmark",variant:"ghost",layerStyle:"textSecondary",_focus:{border:null},icon:c?"bookmarked":"bookmark",onClick:u,width:t})},x=r(11163),m=r(56184),j=r(26822),g=r(70577),b=r(8193);function y(e,n,r,t,i,s,o){try{var a=e[s](o),c=a.value}catch(l){return void r(l)}a.done?n(c):Promise.resolve(c).then(t,i)}var k=function(e){var n=e.story,r=e.pos,t=void 0===r?"fixed":r,o=e.showBg,p=void 0===o||o,k=e.size,C=void 0===k?"md":k,w=e.onStoryChange,S=(0,u.Z)().session,P=(0,x.useRouter)(),z=function(){var e,r=(e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.rR.post("/pin/global/".concat(n.id));case 2:n.pinned=!n.pinned,w(n);case 4:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,i){var s=e.apply(n,r);function o(e){y(s,t,i,o,a,"next",e)}function a(e){y(s,t,i,o,a,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,s.jsxs)(a.gC,{alignItems:"left",pos:t,display:{base:"none",md:"flex"},p:"2",className:p?"side-card":null,spacing:"md"==C?6:2,children:[(0,s.jsx)(a.xu,{children:(0,s.jsx)(d.Z,{count:n.likes,storyID:n.id,liked:n.liked,fontSize:"md"==C?"1.5rem":"1.2rem",heartSize:"1.4rem"})}),(0,s.jsx)(a.xu,{children:(0,s.jsx)(v,{width:"md"==C?"1.4rem":"1.1rem",storyID:n.id,bookmarked:n.bookmarked})}),(0,s.jsx)(a.xu,{children:(0,s.jsx)(h.Z,{"aria-label":"go to github",variant:"ghost",layerStyle:"textSecondary",_focus:{border:null},fontWeight:"300",icon:"share",width:"md"==C?"1.5rem":"1.2rem",onClick:function(){return location.href="#comments"}})}),n.creatorId===(null===S||void 0===S?void 0:S.user.id)&&(0,s.jsx)(a.xu,{children:(0,s.jsx)(h.Z,{"aria-label":"go to github",variant:"ghost",layerStyle:"textSecondary",_focus:{border:null},fontWeight:"300",width:"md"==C?"1.5rem":"1.2rem",onClick:function(){return P.push(n.url?"".concat(m.N.Editor,"/posts"):n.type===j.iJ.Post?"".concat(m.N.Editor,"/post/").concat(n.id):n.type===j.iJ.Series?"".concat(m.N.Editor,"/series?id=").concat(n.id):n.type==j.iJ.Discussion?"".concat(m.N.Editor,"/discussion/").concat(n.id):"")},icon:"edit"})}),(0,g.SL)(null===S||void 0===S?void 0:S.user.role)&&(0,s.jsx)(a.xu,{children:(0,s.jsx)(c.u,{label:n.pinned?"\u6587\u7ae0\u4ee5\u88ab\u6536\u5165\u7f16\u8f91\u7cbe\u9009":"\u5c06\u6587\u7ae0\u6536\u5165\u7f16\u8f91\u7cbe\u9009\u4e2d",children:(0,s.jsx)(l.hU,{"aria-label":"a icon button",variant:"ghost",_focus:{border:null},icon:n.pinned?(0,s.jsx)(b.N0Z,{fontSize:"1.8rem"}):(0,s.jsx)(b.bI9,{fontSize:"1.8rem"}),onClick:z,color:n.pinned?"var(--chakra-colors-brand-500)":"currentColor"})})})]})}},37398:function(e,n,r){"use strict";var t=r(85893),i=(r(67294),r(96356));n.Z=function(e){var n=e.tag;return(0,t.jsxs)(i.Vp,{cursor:"pointer",as:"a",href:"/tags/".concat(n.name),fontSize:"sm",children:["#",n.name]})}}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,1382,3009,6771,1926,9840,2542,8951,9774,2888,179],(function(){return n=87768,e(e.s=n);var n}));var n=e.O();_N_E=n}]);