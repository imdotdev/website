(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3165],{11391:function(e,n,t){"use strict";t.d(n,{Ph:function(){return m}});var r=t(79762),i=t(11604),a=t(94244),c=t(19703),s=t(38554),o=t.n(s),l=t(67294);function u(){return u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},u.apply(this,arguments)}function d(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var h=["children","placeholder","className"],f=["rootProps","placeholder","icon","color","height","h","minH","minHeight","iconColor","iconSize","isFullWidth"],p=["children"],v=(0,i.Gp)((function(e,n){var t=e.children,r=e.placeholder,a=e.className,s=d(e,h);return l.createElement(i.m$.select,u({},s,{ref:n,className:(0,c.cx)("chakra-select",a)}),r&&l.createElement("option",{value:""},r),t)}));c.Ts&&(v.displayName="SelectField");var m=(0,i.Gp)((function(e,n){var t=(0,i.jC)("Select",e),s=(0,i.Lr)(e),h=s.rootProps,p=s.placeholder,m=s.icon,x=s.color,g=s.height,y=s.h,w=s.minH,C=s.minHeight,_=s.iconColor,b=s.iconSize;s.isFullWidth;var E=d(s,f),k=(0,c.Vl)(E,a.oE),S=k[0],N=k[1],z=(0,r.Yp)(N),P={width:"100%",height:"fit-content",position:"relative",color:x},T=o()({paddingEnd:"2rem"},t.field,{_focus:{zIndex:"unset"}});return l.createElement(i.m$.div,u({className:"chakra-select__wrapper",__css:P},S,h),l.createElement(v,u({ref:n,height:null!=y?y:g,minH:null!=w?w:C,placeholder:p},z,{__css:T}),e.children),l.createElement(j,u({"data-disabled":(0,c.PB)(z.disabled)},(_||x)&&{color:_||x},{__css:t.icon},b&&{fontSize:b}),m))}));c.Ts&&(m.displayName="Select");var x=function(e){return l.createElement("svg",u({viewBox:"0 0 24 24"},e),l.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))},g=(0,i.m$)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),j=function(e){var n=e.children,t=void 0===n?l.createElement(x,null):n,r=d(e,p),i=l.cloneElement(t,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return l.createElement(g,u({},r,{className:"chakra-select__icon-wrapper"}),l.isValidElement(t)?i:null)};c.Ts&&(j.displayName="SelectIcon")},84333:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tags",function(){return t(82835)}])},82835:function(e,n,t){"use strict";t.r(n);var r=t(34051),i=t.n(r),a=t(85893),c=t(68527),s=t(67989),o=t(15193),l=t(11391),u=t(34651),d=t(83331),h=t(67757),f=t(30092),p=t(67294),v=t(1950),m=t(28529),x=t(84696),g=t(33539),j=t(62665),y=t(26822),w=t(32532),C=t(20462);function _(e,n,t,r,i,a,c){try{var s=e[a](c),o=s.value}catch(l){return void t(l)}s.done?n(o):Promise.resolve(o).then(r,i)}function b(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function c(e){_(a,r,i,c,s,"next",e)}function s(e){_(a,r,i,c,s,"throw",e)}c(void 0)}))}}var E=[{id:w.a.Best,name:"\u6587\u7ae0\u6570",desc:"\u6587\u7ae0\u6570\u6392\u5e8f"},{id:w.a.Favorites,name:"\u5173\u6ce8\u6570",desc:"\u5173\u6ce8\u6570\u6392\u5e8f"}];n.default=function(){var e=(0,p.useState)(E[0]),n=e[0],t=e[1],r=(0,p.useState)([]),w=r[0],_=r[1],k=(0,p.useState)([]),S=k[0],N=k[1],z=(0,p.useState)([]),P=z[0],T=z[1],I=(0,p.useState)(m.Q.Category),Z=I[0],O=I[1],H=(0,j.Z)().session,L=function(){var e=b(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.rR.get("/tag/list?filter=".concat(n.id,"&type=").concat(Z));case 2:t=e.sent,N(t.data),_(t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=b(i().mark((function e(){var n,t,r,a,c,s,o,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.rR.get("/interaction/following/".concat(H.user.id,"?type=").concat(y.iJ.Tag));case 2:for(n=e.sent,t=[],r=!0,a=!1,c=void 0,e.prev=5,s=n.data[Symbol.iterator]();!(r=(o=s.next()).done);r=!0)l=o.value,t.push(l.id);e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),a=!0,c=e.t0;case 13:e.prev=13,e.prev=14,r||null==s.return||s.return();case 16:if(e.prev=16,!a){e.next=19;break}throw c;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.next=23,x.rR.post("/tag/ids",t);case 23:u=e.sent,T(u.data);case 25:case"end":return e.stop()}}),e,null,[[5,9,13,21],[14,,16,20]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){L()}),[n,Z]),(0,p.useEffect)((function(){H&&Q()}),[H]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{title:h.Z.seo.title,description:h.Z.seo.description}),(0,a.jsx)(f.Z,{title:"\u6807\u7b7e\u5217\u8868",children:(0,a.jsxs)(c.Ug,{alignItems:"top",spacing:"3",children:[(0,a.jsx)(c.gC,{alignItems:"left",width:["100%","100%","70%","70%"],spacing:"3",className:"side-card",children:(0,a.jsxs)(v.ZP,{children:[(0,a.jsxs)(c.kC,{justifyContent:"space-between",alignItems:"center",p:"3",children:[(0,a.jsx)(C.Z,{sorter:n.id,onChange:function(e){w.length>0&&(0==e.length?N(w):N(e))}}),(0,a.jsxs)(c.Ug,{children:[(0,a.jsx)(c.xv,{fontSize:".9rem",layerStyle:"textSecondary",children:n.desc}),(0,a.jsxs)(s.v2,{children:[(0,a.jsx)(s.j2,{as:o.hU,"aria-label":"Options",icon:(0,a.jsx)("svg",{fill:"none",stroke:"currentColor",opacity:"0.75",height:"1.3rem",viewBox:"0 0 55 55",children:(0,a.jsx)("path",{d:"M2 2h51v21H2V2zm0 30h51v21H2V32z",stroke:"stroke-current",strokeWidth:"4"})}),size:"xs",variant:"ghost",_focus:{border:null}}),(0,a.jsx)(s.qy,{children:E.map((function(e){return(0,a.jsx)(s.sN,{onClick:function(){return t(e)},children:e.name},e.name)}))})]}),(0,a.jsxs)(l.Ph,{value:Z,onChange:function(e){return O(e.currentTarget.value)},size:"sm",width:"150px",variant:"unstyled",cursor:"pointer",children:[(0,a.jsx)("option",{value:m.Q.Category,children:"\u9886\u57df\u6807\u7b7e"}),(0,a.jsx)("option",{value:m.Q.Label,children:"\u666e\u901a\u6807\u7b7e"})]})]})]}),(0,a.jsx)(c.iz,{mt:"3",mb:"5"}),(0,a.jsx)(c.gC,{alignItems:"left",spacing:"3",children:S.map((function(e){return(0,a.jsx)(g.Z,{tag:e},e.id)}))})]})}),(0,a.jsxs)(v.ZP,{p:"0",width:"30%",display:{base:"none",md:"block"},className:"side-card",children:[(0,a.jsx)(v.Ol,{children:(0,a.jsx)(c.X6,{size:"sm",children:"\u6211\u5173\u6ce8\u7684Tags"})}),(0,a.jsx)(c.iz,{}),P.length>0&&(0,a.jsxs)(v.eW,{children:[(0,a.jsx)(c.gC,{alignItems:"left",spacing:"4",children:P.map((function(e){return e.type==m.Q.Category&&(0,a.jsx)("a",{href:"/tags/".concat(e.name),children:(0,a.jsxs)(c.Ug,{cursor:"pointer",spacing:"4",children:[e.icon&&(0,a.jsx)(u.Ee,{src:e.icon,width:"35px"}),(0,a.jsx)(c.xv,{children:e.name})]})},e.id)}))}),(0,a.jsx)(c.iz,{my:"5"}),(0,a.jsx)(c.gC,{alignItems:"left",spacing:"4",children:P.map((function(e){return e.type!=m.Q.Category&&(0,a.jsx)("a",{href:"/tags/".concat(e.name),children:(0,a.jsxs)(c.Ug,{cursor:"pointer",spacing:"4",children:[e.icon&&(0,a.jsx)(u.Ee,{src:e.icon,width:"35px"}),(0,a.jsx)(c.xv,{children:e.name})]})},e.id)}))})]})]})]})})]})}},20462:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),a=t(85893),c=t(4612),s=t(67294),o=t(32532),l=t(84696);function u(e,n,t,r,i,a,c){try{var s=e[a](c),o=s.value}catch(l){return void t(l)}s.done?n(o):Promise.resolve(o).then(r,i)}var d=void 0;n.Z=function(e){var n=e.onChange,t=e.sorter,r=void 0===t?o.a.Best:t,h=(0,s.useState)(""),f=h[0],p=h[1],v=function(){var e,t=(e=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=7;break}return e.next=3,l.rR.get("/search/tags?query=".concat(f.toLowerCase(),"&sorter=").concat(r));case 3:t=e.sent,n(t.data),e.next=8;break;case 7:n([]);case 8:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function c(e){u(a,r,i,c,s,"next",e)}function s(e){u(a,r,i,c,s,"throw",e)}c(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){m()}),[f]);var m=function(){if(void 0!==d)return null!==d?(clearTimeout(d),void(d=setTimeout((function(){return v()}),800))):void 0;d=setTimeout((function(){return v()}),800)};return(0,a.jsx)(c.II,{width:"200px",value:f,onChange:function(e){return p(e.currentTarget.value)},placeholder:"\u641c\u7d22\u6807\u7b7e"})}},28529:function(e,n,t){"use strict";var r;t.d(n,{Q:function(){return r}}),function(e){e[e.Category=1]="Category",e[e.Label=2]="Label"}(r||(r={}))}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,7763,5888,3009,6771,1926,9840,2993,5769,6942,3539,9774,2888,179],(function(){return n=84333,e(e.s=n);var n}));var n=e.O();_N_E=n}]);