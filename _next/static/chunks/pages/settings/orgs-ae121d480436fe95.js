(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4070],{80980:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/orgs",function(){return r(78584)}])},99901:function(e,n,r){"use strict";var t=r(85893),i=r(11604),c=r(20949),o=r(41664),s=r(11163);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){a(e,n,r[n])}))}return e}function u(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},c=Object.keys(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var f=r(67294).forwardRef((function(e,n){var r=e.isActive,o=e.icon,s=e.children,a=u(e,["isActive","icon","children"]);return(0,t.jsxs)(i.m$.a,l({"aria-current":r?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:n,fontSize:"1rem",fontWeight:"bold",color:(0,c.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,c.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},a,{children:[o&&(0,t.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:o}),(0,t.jsx)(i.m$.span,{children:s})]}))}));n.Z=function(e){var n,r=e.href,c=e.icon,a=e.children,d=e.query,h=e.exactPath,p=void 0!==h&&h,x=u(e,["href","icon","children","query","exactPath"]),m=(0,s.useRouter)().asPath;return n=p?m.split("?")[0]==encodeURI(r):m.startsWith(encodeURI(r)),(0,t.jsx)(i.m$.div,l({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},x,{children:(0,t.jsx)(o.default,{href:{pathname:r,query:d},passHref:!0,children:(0,t.jsx)(f,{isActive:n,icon:c,children:a})})}))}},24871:function(e,n,r){"use strict";var t=r(85893),i=r(68527),c=r(1950),o=r(11163),s=r(67294),a=r(99901);function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}function f(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},c=Object.keys(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)r=c[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d(e){var n=e.routes,r=(e.pathname,e.contentRef,f(e,["routes","pathname","contentRef"]));return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Kq,{as:"ul",children:n.map((function(e){return e.disabled?null:(0,t.jsx)(a.Z,u({as:"li",href:e.path,icon:e.icon},r,{children:(0,t.jsx)("span",{children:e.title})}),e.path)}))})})}n.Z=function(e){var n=e.routes,r=e.title,a=f(e,["routes","title"]),l=(0,o.useRouter)().pathname,h=s.useRef(null);return(0,t.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,t.jsx)(c.ZP,{p:"5",className:"side-card",children:(0,t.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:r})}),(0,t.jsx)(c.ZP,u({p:"0",className:"side-card"},a,{children:(0,t.jsx)(i.xu,{ref:h,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,t.jsx)(d,u({routes:n,pathname:l,contentRef:h},a))})}))]})}},78584:function(e,n,r){"use strict";r.r(n);var t=r(34051),i=r.n(t),c=r(85893),o=r(97375),s=r(20949),a=r(68527),l=r(15193),u=r(34651),f=r(88718),d=r(79762),h=r(4612),p=r(1950),x=r(24871),m=r(67294),j=r(41039),v=r(84696),b=r(37442),y=r(95978),g=r(70577),O=r(64981),w=r(11163),k=r(41664),P=r(56184),S=r(63091),C=r(30092);function z(e,n,r,t,i,c,o){try{var s=e[c](o),a=s.value}catch(l){return void r(l)}s.done?n(a):Promise.resolve(a).then(t,i)}function I(e){return function(){var n=this,r=arguments;return new Promise((function(t,i){var c=e.apply(n,r);function o(e){z(c,t,i,o,s,"next",e)}function s(e){z(c,t,i,o,s,"throw",e)}o(void 0)}))}}function _(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function N(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){_(e,n,r[n])}))}return e}n.default=function(){var e=(0,m.useState)([]),n=e[0],r=e[1],t=(0,o.qY)(),z=t.isOpen,_=t.onOpen,R=t.onClose,E=(0,o.qY)(),Z=E.isOpen,U=E.onOpen,X=E.onClose,A=(0,w.useRouter)(),q=(0,s.ff)(O.Z.borderColor.light,O.Z.borderColor.dark),J=(0,m.useState)(""),D=J[0],$=J[1];(0,m.useEffect)((function(){M()}),[]);var M=function(){var e=I(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.get("/org/byUserID/0");case 2:n=e.sent,r(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=I(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.post("/org/create",n);case 2:R(),A.push("/".concat(n.username));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=I(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.post("/org/join",{secret:D});case 2:X(),M();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=I(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.rR.post("/org/leave/".concat(n));case 2:M();case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(C.Z,{children:(0,c.jsxs)(a.xu,{display:"flex",children:[(0,c.jsx)(x.Z,{routes:j._Q,width:["120px","120px","250px","250px"],height:"fit-content",title:"\u4e2a\u4eba\u8bbe\u7f6e"}),(0,c.jsxs)(p.ZP,{ml:"4",width:"100%",children:[(0,c.jsxs)(a.kC,{justifyContent:"space-between",alignItems:"center",children:[(0,c.jsx)(a.X6,{size:"sm",children:"\u7ec4\u7ec7\u5217\u8868"}),(0,c.jsxs)(a.Ug,{children:[(0,c.jsx)(l.zx,{size:"sm",onClick:function(){U()},_focus:{border:null},children:"\u52a0\u5165\u7ec4\u7ec7"}),(0,c.jsx)(l.zx,{size:"sm",onClick:function(){_()},_focus:{border:null},children:"\u65b0\u5efa\u7ec4\u7ec7"})]})]}),(0,c.jsx)(a.gC,{mt:"3",divider:(0,c.jsx)(a.cX,{borderColor:q}),alignItems:"left",children:n.map((function(e){return(0,c.jsxs)(a.kC,{justifyContent:"space-between",alignItems:"center",p:"2",children:[(0,c.jsx)(k.default,{href:"/".concat(e.username),children:(0,c.jsxs)(a.Ug,{cursor:"pointer",children:[(0,c.jsx)(u.Ee,{src:e.avatar,height:"30px"}),(0,c.jsx)(a.X6,{size:"sm",fontSize:"1rem",children:e.nickname}),(0,c.jsx)(a.xv,{layerStyle:"textSecondary",children:(0,g.GJ)(e.role)?"admin":"member"})]})}),(0,c.jsxs)(a.Ug,{children:[(0,g.GJ)(e.role)&&(0,c.jsx)(l.zx,{variant:"outline",size:"md",onClick:function(){return A.push("".concat(P.N.Settings,"/org/profile/").concat(e.id))},children:"Manage"}),e.role!==S.u.SUPER_ADMIN&&(0,c.jsx)(l.zx,{colorScheme:"red",variant:"outline",size:"md",onClick:function(){return W(e.id)},children:"Leave"})]})]},e.id)}))})]})]})}),(0,c.jsxs)(f.u_,{isOpen:z,onClose:R,children:[(0,c.jsx)(f.ZA,{}),(0,c.jsxs)(f.hz,{children:[(0,c.jsx)(f.xB,{children:"\u65b0\u5efa\u7ec4\u7ec7"}),(0,c.jsx)(f.fe,{mb:"2",children:(0,c.jsx)(b.J9,{initialValues:{username:"",nickname:""},onSubmit:T,children:function(e){return(0,c.jsxs)(b.l0,{children:[(0,c.jsxs)(a.gC,{children:[(0,c.jsx)(b.gN,{name:"username",validate:y.rV,children:function(e){var n=e.field,r=e.form;return(0,c.jsxs)(d.NI,{isInvalid:r.errors.username&&r.touched.username,children:[(0,c.jsx)(d.lX,{children:"Username"}),(0,c.jsx)(h.II,N({},n,{placeholder:"name"})),(0,c.jsx)(d.J1,{children:r.errors.username})]})}}),(0,c.jsx)(b.gN,{name:"nickname",validate:y.cV,children:function(e){var n=e.field,r=e.form;return(0,c.jsxs)(d.NI,{isInvalid:r.errors.nickname&&r.touched.nickname,children:[(0,c.jsx)(d.lX,{children:"Nickname"}),(0,c.jsx)(h.II,N({},n,{placeholder:"name"})),(0,c.jsx)(d.J1,{children:r.errors.nickname})]})}})]}),(0,c.jsxs)(a.xu,{mt:6,children:[(0,c.jsx)(l.zx,{variant:"outline",type:"submit",_focus:{border:null},children:"\u63d0\u4ea4"}),(0,c.jsx)(l.zx,{variant:"ghost",ml:"4",_focus:{border:null},onClick:R,children:"\u53d6\u6d88"})]})]})}})})]})]}),(0,c.jsxs)(f.u_,{isOpen:Z,onClose:X,children:[(0,c.jsx)(f.ZA,{}),(0,c.jsx)(f.hz,{p:"3",children:(0,c.jsxs)(f.fe,{mb:"2",children:[(0,c.jsx)(a.xv,{children:"Secret code"}),(0,c.jsx)(a.xv,{fontSize:".9rem",layerStyle:"textSecondary",children:"Provided to you by an org admin"}),(0,c.jsx)(h.II,{_focus:{border:null},mt:"3",placeholder:"...",value:D,onChange:function(e){return $(e.currentTarget.value)}}),(0,c.jsx)(l.zx,{mt:"6",onClick:V,children:"Join Organization"})]})})]})]})}}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,131,7442,3009,6771,1926,9840,9774,2888,179],(function(){return n=80980,e(e.s=n);var n}));var n=e.O();_N_E=n}]);