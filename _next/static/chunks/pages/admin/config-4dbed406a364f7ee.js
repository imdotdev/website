(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{66486:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config",function(){return n(23268)}])},83504:function(e,r,n){"use strict";var t=n(85893),i=n(68527),o=n(1950),a=n(62665),s=n(24871),c=n(96486),u=n(67294),l=n(63091),f=n(70577);function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){d(e,r,n[r])}))}return e}function p(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}r.Z=function(e){var r=e.title,n=e.routes,d=e.children,m=e.p,x=p(e,["title","routes","children","p"]),v=(0,a.Z)().session,b=(0,u.useState)(n),j=b[0],y=b[1];return(0,u.useEffect)((function(){if(null===v||void 0===v?void 0:v.user){var e=!0,r=!1,n=void 0;try{for(var t,i=j[Symbol.iterator]();!(e=(t=i.next()).done);e=!0){var o=t.value;o.minRole==l.u.ContentAdmin?o.disabled=!(0,f.SL)(v.user.role):o.minRole==l.u.ADMIN&&(o.disabled=!(0,f.GJ)(v.user.role))}}catch(a){r=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}y((0,c.cloneDeep)(j))}),[null===v||void 0===v?void 0:v.user]),(0,t.jsxs)(i.xu,{display:"flex",children:[(0,t.jsx)(s.Z,h({routes:j,title:r},x)),(0,t.jsx)(o.ZP,{className:"side-card",ml:"4",width:"100%",p:null!==m&&void 0!==m?m:6,pb:"1",children:d})]})}},99901:function(e,r,n){"use strict";var t=n(85893),i=n(11604),o=n(20949),a=n(41664),s=n(11163);function c(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){c(e,r,n[r])}))}return e}function l(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=n(67294).forwardRef((function(e,r){var n=e.isActive,a=e.icon,s=e.children,c=l(e,["isActive","icon","children"]);return(0,t.jsxs)(i.m$.a,u({"aria-current":n?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:r,fontSize:"1rem",fontWeight:"bold",color:(0,o.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,o.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},c,{children:[a&&(0,t.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:a}),(0,t.jsx)(i.m$.span,{children:s})]}))}));r.Z=function(e){var r,n=e.href,o=e.icon,c=e.children,d=e.query,h=e.exactPath,p=void 0!==h&&h,m=l(e,["href","icon","children","query","exactPath"]),x=(0,s.useRouter)().asPath;return r=p?x.split("?")[0]==encodeURI(n):x.startsWith(encodeURI(n)),(0,t.jsx)(i.m$.div,u({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},m,{children:(0,t.jsx)(a.default,{href:{pathname:n,query:d},passHref:!0,children:(0,t.jsx)(f,{isActive:r,icon:o,children:c})})}))}},24871:function(e,r,n){"use strict";var t=n(85893),i=n(68527),o=n(1950),a=n(11163),s=n(67294),c=n(99901);function u(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){u(e,r,n[r])}))}return e}function f(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e){var r=e.routes,n=(e.pathname,e.contentRef,f(e,["routes","pathname","contentRef"]));return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Kq,{as:"ul",children:r.map((function(e){return e.disabled?null:(0,t.jsx)(c.Z,l({as:"li",href:e.path,icon:e.icon},n,{children:(0,t.jsx)("span",{children:e.title})}),e.path)}))})})}r.Z=function(e){var r=e.routes,n=e.title,c=f(e,["routes","title"]),u=(0,a.useRouter)().pathname,h=s.useRef(null);return(0,t.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,t.jsx)(o.ZP,{p:"5",className:"side-card",children:(0,t.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:n})}),(0,t.jsx)(o.ZP,l({p:"0",className:"side-card"},c,{children:(0,t.jsx)(i.xu,{ref:h,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,t.jsx)(d,l({routes:r,pathname:u,contentRef:h},c))})}))]})}},23268:function(e,r,n){"use strict";n.r(r);var t=n(34051),i=n.n(t),o=n(85893),a=n(28609),s=n(68527),c=n(4612),u=n(15193),l=n(67294),f=n(41039),d=n(84696),h=n(30092),p=n(96486),m=n(83504);function x(e,r,n,t,i,o,a){try{var s=e[o](a),c=s.value}catch(u){return void n(u)}s.done?r(c):Promise.resolve(c).then(t,i)}function v(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function a(e){x(o,t,i,a,s,"next",e)}function s(e){x(o,t,i,a,s,"throw",e)}a(void 0)}))}}r.default=function(){var e=(0,l.useState)({smtp:{addr:"",fromAddress:"",fromName:"",authUsername:"",authPassword:""}}),r=e[0],n=e[1],t=(0,a.pm)(),x=function(){var e=v(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.rR.get("/admin/config");case 2:(r=e.sent).data&&n(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){x()}),[]);var b=function(){var e=(0,p.cloneDeep)(r);n(e)},j=function(){var e=v(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.rR.post("/config",r);case 2:t({description:"\u66f4\u65b0\u914d\u7f6e\u6210\u529f",status:"success",duration:2e3,isClosable:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(h.Z,{children:(0,o.jsxs)(m.Z,{title:"\u7ba1\u7406\u5458",routes:f.xt,children:[(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.kC,{alignItems:"center",justify:"space-between",children:(0,o.jsx)(s.X6,{size:"sm",children:"SMTP"})}),(0,o.jsxs)(s.gC,{alignItems:"left",spacing:"4",mt:"4",children:[(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{size:"xs",children:"SMTP\u5730\u5740"}),(0,o.jsx)(c.II,{mt:"2",w:"auto",value:r.smtp.addr,onChange:function(e){r.smtp.addr=e.currentTarget.value,b()},placeholder:"e.g smtp.google.com:25"})]}),(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{size:"xs",children:"From Addr"}),(0,o.jsx)(c.II,{mt:"2",w:"auto",value:r.smtp.fromAddress,onChange:function(e){r.smtp.fromAddress=e.currentTarget.value,b()},placeholder:"e.g hello@im.dev"})]}),(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{size:"xs",children:"From Name"}),(0,o.jsx)(c.II,{mt:"2",w:"auto",value:r.smtp.fromName,onChange:function(e){r.smtp.fromName=e.currentTarget.value,b()},placeholder:"e.g I'm dev"})]}),(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{size:"xs",children:"Auth user"}),(0,o.jsx)(c.II,{mt:"2",w:"auto",value:r.smtp.authUsername,onChange:function(e){r.smtp.authUsername=e.currentTarget.value,b()},placeholder:""})]}),(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{size:"xs",children:"Auth password"}),(0,o.jsx)(c.II,{mt:"2",w:"auto",value:r.smtp.authPassword,onChange:function(e){r.smtp.authPassword=e.currentTarget.value,b()},placeholder:""})]})]})]}),(0,o.jsx)(u.zx,{mt:"4",onClick:j,children:"Update"})]})})})}}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,3009,6771,1926,9840,9774,2888,179],(function(){return r=66486,e(e.s=r);var r}));var r=e.O();_N_E=r}]);