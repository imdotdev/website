(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9527],{91758:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tag/[id]",function(){return t(33895)}])},83990:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var r=t(85893),i=t(68527),o=t(11637);t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var c=function(e){return(0,r.jsx)(i.xu,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){a(e,n,t[n])}))}return e}({w:"full",pb:"12",pt:"3",maxW:"1280px",mx:"auto",px:[0,0,4,4]},e))},s=t(86749),l=t(83331),u=t(43139);function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f=function(e){return(0,r.jsx)(u.E.div,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){d(e,n,t[n])}))}return e}({initial:{y:-16,opacity:0},animate:{y:0,opacity:1}},e))},h=t(67757);function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){p(e,n,t[n])}))}return e}function g(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var m=function(e){var n,t=e.children,a=e.nav,u=e.title,d=g(e,["children","nav","title"]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{title:"".concat(u," | ").concat(h.Z.seo.title),description:h.Z.seo.description}),(0,r.jsx)(o.p,{zIndex:20,children:"Skip to Content"}),a||(0,r.jsx)(s.Z,{}),(0,r.jsx)(c,{as:"main",className:"main-content",children:(0,r.jsx)(i.xu,{display:{base:"block",md:"flex"},children:(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(o.f,{}),(0,r.jsx)(i.xu,x({id:"content",mt:null!==(n=e.mt)&&void 0!==n?n:"4.5rem",mx:"auto"},d,{children:(0,r.jsx)(f,{children:t})}))]})})})]})}},33895:function(e,n,t){"use strict";t.r(n);var r=t(34051),i=t.n(r),o=t(85893),a=t(28609),c=t(68527),s=t(15193),l=t(11391),u=t(68133),d=t(4612),f=t(20949),h=t(9680),p=t(11604),x=t(96356),g=t(88718),m=t(67294),j=t(63348),v=t(83990),y=t(10579),b=t(51646),w=t(84696),C=t(11163),S=t(96486),O=t(89583),k=t(41664),z=t(2839),P=t(78044),E=t(1950),I=t(28529),Z=t(56184),R=t(15789),T=t(62665),_=t(70577),D=t(13540),N=t(17586);function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,i)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){U(o,r,i,a,c,"next",e)}function c(e){U(o,r,i,a,c,"throw",e)}a(void 0)}))}}function X(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){X(e,n,t[n])}))}return e}function F(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,c=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){c=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(c)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var n=F(m.useState(!1),2),t=n[0],r=n[1],a=m.useRef(),l=(0,f.If)().toggleColorMode,u=(0,f.ff)("dark","light"),d=(0,f.ff)(O.TLr,O.Mei),j=(0,C.useRouter)(),v=[y.G.Edit,y.G.Preview],b=(0,h.ar)({name:"framework",defaultValue:y.G.Edit,onChange:function(n){e.changeEditMode(n)}}),S=b.getRootProps,E=b.getRadioProps,R=S(),T=function(){var n=L(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.rR.delete("/tag/id/".concat(e.tagID));case 2:r(!1),j.push("".concat(Z.N.Admin,"/tags"));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(c.kC,{w:"100%",h:"100%",align:"center",justify:"space-between",px:{base:"4",md:"6"},children:[(0,o.jsx)(c.kC,{align:"center",children:(0,o.jsx)(k.default,{href:"/",passHref:!0,children:(0,o.jsx)(p.m$.a,{display:{base:"none",md:"block"},style:{marginTop:"-5px"},"aria-label":"Chakra UI, Back to homepage",children:(0,o.jsx)(z.ZP,{width:"130"})})})}),(0,o.jsx)(x.Vp,{children:"apply"==e.type?"\u7533\u8bf7\u521b\u5efa\u6807\u7b7e":"new"==e.type?"\u65b0\u5efa\u6807\u7b7e":"\u7f16\u8f91\u6807\u7b7e"}),(0,o.jsx)(c.Ug,A({},R,{children:v.map((function(e){var n=E({value:e});return(0,o.jsx)(P.Z,A({},n,{bg:(0,f.ff)("var(--chakra-colors-brand-500)","var(--chakra-colors-brand-200)"),color:(0,f.ff)("white","black"),children:e}),e)}))})),(0,o.jsxs)(c.Ug,{color:(0,f.ff)("gray.500","gray.400"),spacing:"4",children:[(0,o.jsx)(D.Z,{id:e.tagID,fontSize:"1.3rem"}),(0,o.jsx)(s.hU,{size:"md",fontSize:"lg","aria-label":"Switch to ".concat(u," mode"),variant:"ghost",color:"current",ml:{base:"0",md:"1"},onClick:l,_focus:{border:null},icon:(0,o.jsx)(d,{})}),(0,o.jsx)(s.zx,{ml:"2",onClick:e.publish,children:"\u53d1\u5e03"}),e.tag.type==I.Q.Label&&(0,o.jsx)(s.zx,{colorScheme:"red",ml:"2",onClick:function(){return r(!0)},children:"\u5220\u9664"})]})]}),(0,o.jsx)(g.aR,{isOpen:t,leastDestructiveRef:a,onClose:function(){return r(!1)},children:(0,o.jsx)(g.dh,{children:(0,o.jsxs)(g._T,{children:[(0,o.jsx)(g.fY,{fontSize:"lg",fontWeight:"bold",children:"Delete Tag"}),(0,o.jsx)(g.iP,{children:(0,o.jsx)(c.xv,{color:"red",children:"\u5220\u9664Tag\u5c06\u5220\u9664\u6240\u6709\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u8be5\u64cd\u4f5c\u4e0d\u53ef\u9006\uff0c\u8bf7\u614e\u91cd"})}),(0,o.jsxs)(g.xo,{children:[(0,o.jsx)(s.zx,{ref:a,onClick:function(){return r(!1)},children:"Cancel"}),(0,o.jsx)(s.zx,{colorScheme:"red",onClick:T,ml:3,children:"Delete"})]})]})})})]})}function B(e){var n=(0,f.ff)("transparent","transparent"),t=m.useRef();return(0,o.jsx)(p.m$.header,{ref:t,transition:"box-shadow 0.2s",pos:"fixed",top:"0",zIndex:"3",bg:n,left:"0",right:"0",borderTop:"4px solid",borderTopColor:"brand.400",width:"full",children:(0,o.jsxs)(p.m$.div,{height:"4.5rem",mx:"auto",maxW:"1200px",children:[(0,o.jsx)(M,A({},e)),(0,o.jsx)(N.Z,{})]})})}n.default=function(){var e=(0,C.useRouter)(),n=e.query.id,t=(0,m.useState)(y.G.Edit),r=t[0],f=t[1],h=(0,T.Z)().session,p=(0,m.useState)(null),x=p[0],g=p[1],O=(0,m.useState)({md:"\u6807\u7b7e\u4ecb\u7ecd,\u652f\u6301markdown",name:"",type:I.Q.Label}),k=O[0],z=O[1],P=(0,a.pm)();(0,m.useEffect)((function(){n&&"new"!==n&&"apply"!==n&&w.rR.get("/tag/info/latest?name=".concat(n)).then((function(e){z(e.data),g((0,S.cloneDeep)(e.data))}))}),[n]);var D=function(){z((0,S.cloneDeep)(k))},N=function(){var t=L(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("apply"!=n){t.next=6;break}return t.next=3,w.rR.post("/tag/apply",k);case 3:return P({description:"\u5df2\u63d0\u4ea4\u7533\u8bf7",status:"success",duration:3e3,isClosable:!0}),e.push("".concat(Z.N.Dashboard,"/tag-moderator")),t.abrupt("return");case 6:if(!(0,S.isEqual)(k,x)){t.next=10;break}P({description:"\u672a\u4fee\u6539\u4efb\u4f55\u5185\u5bb9",status:"info",duration:3e3,isClosable:!0}),t.next=13;break;case 10:return t.next=12,w.rR.post("/tag",k);case 12:P({description:"\u53d1\u5e03\u6210\u529f",status:"success",duration:3e3,isClosable:!0});case 13:e.push("/tags/".concat(k.name));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.jsx)(v.Z,{nav:h&&(0,o.jsx)(B,{tagID:k.id,tag:k,type:n,changeEditMode:function(e){return f(e)},publish:function(){return N()}}),children:(0,o.jsxs)(c.Ug,{style:{height:"calc(100vh - 145px)"},alignItems:"top",children:[(0,o.jsx)(E.ZP,{width:"65%",height:"100%",p:"0",className:"side-card",children:r===y.G.Edit?(0,o.jsx)(j.c,{options:{overrides:{Button:{component:s.zx}}},onChange:function(e){z(A({},k,{md:e}))},md:k.md}):(0,o.jsx)(c.xu,{height:"100%",p:"6",children:(0,o.jsx)(b.J,{md:k.md})})}),h&&(0,_.GJ)(h.user.role)&&(0,o.jsxs)(E.ZP,{width:"35%",className:"side-card",children:[(0,o.jsx)(c.X6,{size:"xs",children:"Tag \u7c7b\u578b"}),(0,o.jsxs)(l.Ph,{value:k.type,size:"sm",mt:"4",onChange:function(e){k.type=Number(e.currentTarget.value),D()},children:[(0,o.jsx)("option",{value:I.Q.Label,children:"\u666e\u901a"}),"apply"!=n&&(0,o.jsx)("option",{value:I.Q.Category,children:"\u9886\u57df"})]}),k.type==I.Q.Category&&(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(c.X6,{size:"xs",mt:"8",children:["\u662f\u5426\u5728\u5b50\u7ad9\u9009\u62e9\u5217\u8868\u4e2d\u663e\u793a  ",(0,o.jsx)(u.XZ,{isChecked:k.display,onChange:function(e){k.display=e.target.checked,D()}})]})}),(0,o.jsx)(c.X6,{size:"xs",mt:"8",children:"\u6807\u7b7e\u540d\u79f0(\u552f\u4e00)"}),(0,o.jsx)(d.II,{value:k.name,onChange:function(e){k.name=e.target.value,D()},mt:"4",variant:"flushed",size:"sm",placeholder:"Tag name...",focusBorderColor:"brand.400"}),k.type==I.Q.Label&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.X6,{size:"xs",mt:"8",mb:"3",children:"\u4e0a\u7ea7\u6807\u7b7e"}),(0,o.jsx)(R.Z,{tags:k.parent?[k.parent]:[],type:I.Q.Category,onChange:function(e){0==e.length?k.parent=null:e[0]==k.id?P({description:"\u65e0\u6cd5\u5c06\u81ea\u5df1\u8bbe\u7f6e\u4e3a\u4e0a\u7ea7\u6807\u7b7e",status:"warning",duration:2e3,isClosable:!0}):k.parent=e[0],D()},max:1}),(0,o.jsx)(c.xv,{fontSize:"0.8rem",mt:"2",layerStyle:"textSecondary",children:"\u8bbe\u5b9a\u6807\u7b7e\u6240\u5c5e\u7684\u9886\u57df\uff0c\u8fd9\u4e2a\u975e\u5e38\u91cd\u8981\uff0c\u8bf7\u8ba4\u771f\u9009\u62e9"})]}),(0,o.jsx)(c.X6,{size:"xs",mt:"8",children:"\u5c01\u9762(\u53ef\u9009)"}),(0,o.jsx)(d.II,{value:k.cover,onChange:function(e){k.cover=e.target.value,D()},mt:"4",variant:"flushed",size:"sm",placeholder:"\u56fe\u7247\u94fe\u63a5",focusBorderColor:"brand.400"}),(0,o.jsx)(c.X6,{size:"xs",mt:"8",children:"\u56fe\u6807(\u53ef\u9009)"}),(0,o.jsx)(d.II,{value:k.icon,onChange:function(e){k.icon=e.target.value,D()},mt:"4",variant:"flushed",size:"sm",placeholder:"\u56fe\u7247\u94fe\u63a5",focusBorderColor:"brand.400"})]})]})})}},13540:function(e,n,t){"use strict";var r=t(34051),i=t.n(r),o=t(85893),a=t(97375),c=t(47398),s=t(68527),l=t(88718),u=t(96356),d=t(7657),f=t(33441),h=t(30381),p=t.n(h),x=t(67294),g=t(8193),m=t(84696),j=t(46870),v=t(29489);function y(e,n,t,r,i,o,a){try{var c=e[o](a),s=c.value}catch(l){return void t(l)}c.done?n(s):Promise.resolve(s).then(r,i)}n.Z=function(e){var n=e.id,t=e.fontSize,r=void 0===t?"1rem":t,h=(0,a.qY)(),b=h.isOpen,w=h.onOpen,C=h.onClose,S=(0,x.useState)(null),O=S[0],k=S[1],z=(0,x.useState)(null),P=z[0],E=z[1],I=function(){var e,t=(e=i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=6;break}return e.next=3,m.rR.get("/revision/logs?id=".concat(n));case 3:t=e.sent,k(t.data),t.data.length>0&&E(t.data[0]);case 6:w();case 7:case"end":return e.stop()}}),e)})),function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){y(o,r,i,a,c,"next",e)}function c(e){y(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.u,{label:"\u5386\u53f2\u4fee\u6539\u8bb0\u5f55",children:(0,o.jsx)(s.xu,{onClick:I,cursor:"pointer",children:(0,o.jsx)(g.wYb,{fontSize:r})})}),(0,o.jsxs)(l.u_,{isOpen:b,onClose:C,children:[(0,o.jsx)(l.ZA,{}),(0,o.jsxs)(l.hz,{minWidth:"800px",h:"600px",overflowY:"auto",children:[(0,o.jsx)(l.xB,{children:"\u5386\u53f2\u4fee\u6539\u8bb0\u5f55"}),(0,o.jsx)(l.fe,{children:(0,o.jsxs)(s.Ug,{alignItems:"top",spacing:"6",children:[(0,o.jsx)(s.gC,{alignItems:"left",width:"270px",spacing:"4",zIndex:"1",children:null===O||void 0===O?void 0:O.map((function(e,n){return(0,o.jsxs)(s.kC,{fontSize:"sm",justify:"space-between",alignItems:"center",p:"1",onClick:function(){return E(e)},cursor:"pointer",className:e.c==(null===P||void 0===P?void 0:P.c)?"highlight-bg":null,children:[(0,o.jsxs)(s.Ug,{children:[(0,o.jsx)(u.Vp,{size:"sm",borderRadius:"50%",variant:e.c==(null===P||void 0===P?void 0:P.c)?"subtle":"outline",children:n+1}),(0,o.jsx)(d.qE,{size:"sm",src:e.creator.avatar}),(0,o.jsx)(s.xv,{children:e.creator.nickname})]}),(0,o.jsxs)(s.xv,{children:["\u4fee\u6539\u4e8e ",(0,j.Zh)(p().unix(e.c))]})]})}))}),P&&(0,o.jsx)(s.xu,{width:"700px",position:"fixed",pl:"300px",children:(0,o.jsx)(f.g,{height:"500px",width:"100%",value:(0,v.Q)(P.ct)})})]})})]})]})]})}},15789:function(e,n,t){"use strict";t.d(n,{Z:function(){return j}});var r=t(85893),i=t(67294),o=t(68527),a=t(96356),c=t(32095),s=t(4612),l=t(28529),u=t(96486),d=t(34651),f=function(e){var n=e.tag,t=e.showCc,i=void 0!==t&&t;return(0,r.jsxs)(o.kC,{justifyContent:"space-between",children:[(0,r.jsx)(o.xu,{children:(0,r.jsx)(o.xv,{fontSize:"md",cursor:"pointer",children:n.name})}),(0,r.jsxs)(o.Ug,{children:[i&&n.cc>0&&(0,r.jsxs)(o.xv,{fontSize:"0.9rem",layerStyle:"textSecondary",children:[n.cc," \u4e2a\u5b50\u6807\u7b7e"]}),(0,r.jsx)(d.Ee,{src:n.icon,width:"25px",height:"25px"})]})]})},h=t(89583),p=void 0,x=function(e){var n=e.options,t=e.selected,d=e.onChange,x=e.size,g=e.max,m=(0,i.useState)([]),j=m[0],v=m[1],y=(0,i.useState)(null),b=y[0],w=y[1],C=(0,i.useState)(null),S=C[0],O=C[1],k=(0,i.useState)(""),z=k[0],P=k[1],E=(0,i.useRef)(),I=(0,i.useState)(null),Z=I[0],R=I[1];(0,i.useEffect)((function(){if(Z){var e=[Z],t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var c=o.value;c.parent==Z.id&&e.push(c)}}catch(s){r=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}O(e)}}),[Z]),(0,i.useEffect)((function(){var e=[],t={};n.forEach((function(n){t[n.id]=n,n.type==l.Q.Category&&e.push(n)})),v(e),w(t)}),[n]),(0,i.useEffect)((function(){n&&T()}),[z]);var T=function(){if(void 0!==p)return null!==p?(clearTimeout(p),void(p=setTimeout((function(){return _()}),300))):void 0;p=setTimeout((function(){return _()}),300)},_=function(){var e=[],t=[];n.forEach((function(n){""==z?n.type==l.Q.Category&&e.push(n):-1!==n.name.toLowerCase().indexOf(z.toLowerCase())&&(n.type==l.Q.Category?(e.push(n),t.push(n)):(t.push(n),e.push(b[n.parent])))})),v(e),O(t)};return(0,r.jsx)(r.Fragment,{children:b&&t.length<g&&(0,r.jsxs)(c.J2,{placement:"auto",initialFocusRef:E,children:[(0,r.jsx)(c.xo,{children:(0,r.jsxs)(a.Vp,{variant:"outline",cursor:"pointer",children:[(0,r.jsx)(h.wEH,{})," \u6dfb\u52a0\u6807\u7b7e"]})}),(0,r.jsx)(c.yk,{minWidth:"fit-content",px:"2",_focus:{outline:"none"},children:(0,r.jsxs)(c.b,{width:"100%",children:[(0,r.jsx)(s.II,{ref:E,size:x,width:"200px",onChange:function(e){return P(e.target.value.trim())},placeholder:"\u641c\u7d22\u6807\u7b7e..",value:z,_focus:{border:null}}),(0,r.jsxs)(o.Ug,{my:"2",children:[(0,r.jsxs)(o.xv,{fontSize:".9rem",layerStyle:"textSecondary",children:["\u8fd8\u53ef\u6dfb\u52a0 ",g-t.length," \u4e2a\u6807\u7b7e "]}),t.map((function(e){return(0,r.jsx)(a.Vp,{size:"sm",children:b[e].name})}))]}),(0,r.jsx)(o.iz,{my:"2"}),(0,r.jsxs)(o.Ug,{spacing:"4",alignItems:"start",mt:"4",children:[(0,r.jsxs)(o.gC,{alignItems:"left",spacing:"0",width:"320px",children:[(0,r.jsx)(o.M5,{pb:"2",children:"\u9886\u57df\u5206\u7c7b"}),j.map((function(e,n){return(0,r.jsxs)(o.xu,{cursor:"pointer",onClick:function(n){return R(e)},className:e.id==(null===Z||void 0===Z?void 0:Z.id)?"highlight-bg":null,children:[(0,r.jsx)(o.xu,{py:"2",px:"4",children:(0,r.jsx)(f,{tag:e,showCc:!0})}),n<j.length-1&&(0,r.jsx)(o.iz,{})]},e.id)}))]}),S&&S.length>0&&(0,r.jsxs)(o.gC,{alignItems:"left",spacing:"0",width:"300px",children:[(0,r.jsx)(o.M5,{pb:"2",children:"\u9009\u62e9\u6807\u7b7e"}),S.map((function(e,n){return(0,r.jsxs)(o.xu,{cursor:"pointer",onClick:function(n){return function(e){if(!(t.length>=g)){var n=!1,r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done);r=!0)if(a.value==e.id){n=!0;break}}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}n||(t.push(e.id),d((0,u.cloneDeep)(t))),e.type==l.Q.Category&&R(e),E.current.focus()}}(e)},className:"hover-bg",children:[(0,r.jsx)(o.xu,{py:"2",px:"4",children:(0,r.jsx)(f,{tag:e})}),n<j.length-1&&(0,r.jsx)(o.iz,{})]},e.id)}))]})]})]})})]})})},g=t(84696),m=t(40328),j=function(e){var n=e.tags,t=e.type,c=e.onChange,s=e.size,l=void 0===s?"md":s,d=e.max,f=void 0===d?m.v.posts.maxTags:d,h=(0,i.useState)(null),p=h[0],j=h[1];(0,i.useEffect)((function(){g.rR.get("/tag/list?type=".concat(null!==t&&void 0!==t?t:null)).then((function(e){j(e.data)}))}),[]);var v=function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=p[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(a.id==e)return a.name}}catch(c){t=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}};return(0,r.jsx)(o.Ug,{children:p&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{max:f,options:p,selected:n,onChange:c,size:l}),n.length>0&&(0,r.jsx)(o.Ug,{mt:"lg"===l?4:2,children:n.map((function(e){return(0,r.jsxs)(a.Vp,{children:[(0,r.jsx)(a.Sn,{children:v(e)}),(0,r.jsx)(a.SD,{onClick:function(t){return function(e){var t=(0,u.cloneDeep)(n);(0,u.remove)(t,(function(n){return n===e})),c(t)}(e)}})]},e)}))})]})})}},28529:function(e,n,t){"use strict";var r;t.d(n,{Q:function(){return r}}),function(e){e[e.Category=1]="Category",e[e.Label=2]="Label"}(r||(r={}))},29489:function(e,n,t){"use strict";function r(e){try{for(var n in e)if("function"===typeof e[n]){var t=e[n];t=t.toString(),e[n]=t.replace(/\n/g,"<br/>")}var r=JSON.stringify(e,null,2);return r=r.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">")}catch(i){return console.error("\u5f02\u5e38\u4fe1\u606f:"+i),""}}t.d(n,{Q:function(){return r}})}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,1382,263,8133,3009,6771,1926,9840,2542,9774,2888,179],(function(){return n=91758,e(e.s=n);var n}));var n=e.O();_N_E=n}]);