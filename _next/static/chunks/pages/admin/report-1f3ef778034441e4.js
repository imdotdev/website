(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[774],{22402:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/report",function(){return n(56665)}])},83504:function(e,r,n){"use strict";var t=n(85893),i=n(68527),o=n(1950),c=n(62665),l=n(24871),s=n(96486),a=n(67294),u=n(63091),f=n(70577);function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){d(e,r,n[r])}))}return e}function p(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}r.Z=function(e){var r=e.title,n=e.routes,d=e.children,m=e.p,x=p(e,["title","routes","children","p"]),v=(0,c.Z)().session,b=(0,a.useState)(n),y=b[0],j=b[1];return(0,a.useEffect)((function(){if(null===v||void 0===v?void 0:v.user){var e=!0,r=!1,n=void 0;try{for(var t,i=y[Symbol.iterator]();!(e=(t=i.next()).done);e=!0){var o=t.value;o.minRole==u.u.ContentAdmin?o.disabled=!(0,f.SL)(v.user.role):o.minRole==u.u.ADMIN&&(o.disabled=!(0,f.GJ)(v.user.role))}}catch(c){r=!0,n=c}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}j((0,s.cloneDeep)(y))}),[null===v||void 0===v?void 0:v.user]),(0,t.jsxs)(i.xu,{display:"flex",children:[(0,t.jsx)(l.Z,h({routes:y,title:r},x)),(0,t.jsx)(o.ZP,{className:"side-card",ml:"4",width:"100%",p:null!==m&&void 0!==m?m:6,pb:"1",children:d})]})}},99901:function(e,r,n){"use strict";var t=n(85893),i=n(11604),o=n(20949),c=n(41664),l=n(11163);function s(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){s(e,r,n[r])}))}return e}function u(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var f=n(67294).forwardRef((function(e,r){var n=e.isActive,c=e.icon,l=e.children,s=u(e,["isActive","icon","children"]);return(0,t.jsxs)(i.m$.a,a({"aria-current":n?"page":void 0,width:"100%",px:"3",py:"2",rounded:"md",ref:r,fontSize:"1rem",fontWeight:"bold",color:(0,o.ff)("gray.700","whiteAlpha.900"),transition:"all 0.2s",display:"flex",alignItems:"center",className:"hover-bg",_activeLink:{color:(0,o.ff)("var(--chakra-colors-brand-500)","brand.200"),fontWeight:"600"}},s,{children:[c&&(0,t.jsx)(i.m$.span,{mr:"5",fontSize:"1.1rem",display:{base:"none",md:"block"},width:"20px",children:c}),(0,t.jsx)(i.m$.span,{children:l})]}))}));r.Z=function(e){var r,n=e.href,o=e.icon,s=e.children,d=e.query,h=e.exactPath,p=void 0!==h&&h,m=u(e,["href","icon","children","query","exactPath"]),x=(0,l.useRouter)().asPath;return r=p?x.split("?")[0]==encodeURI(n):x.startsWith(encodeURI(n)),(0,t.jsx)(i.m$.div,a({userSelect:"none",display:"flex",alignItems:"center",lineHeight:"1.5rem"},m,{children:(0,t.jsx)(c.default,{href:{pathname:n,query:d},passHref:!0,children:(0,t.jsx)(f,{isActive:r,icon:o,children:s})})}))}},24871:function(e,r,n){"use strict";var t=n(85893),i=n(68527),o=n(1950),c=n(11163),l=n(67294),s=n(99901);function a(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){a(e,r,n[r])}))}return e}function f(e,r){if(null==e)return{};var n,t,i=function(e,r){if(null==e)return{};var n,t,i={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e){var r=e.routes,n=(e.pathname,e.contentRef,f(e,["routes","pathname","contentRef"]));return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Kq,{as:"ul",children:r.map((function(e){return e.disabled?null:(0,t.jsx)(s.Z,u({as:"li",href:e.path,icon:e.icon},n,{children:(0,t.jsx)("span",{children:e.title})}),e.path)}))})})}r.Z=function(e){var r=e.routes,n=e.title,s=f(e,["routes","title"]),a=(0,c.useRouter)().pathname,h=l.useRef(null);return(0,t.jsxs)(i.gC,{alignItems:"left",width:["180px","180px","250px","250px"],height:"fit-content",children:[(0,t.jsx)(o.ZP,{p:"5",className:"side-card",children:(0,t.jsx)(i.X6,{size:"md",fontSize:"1.3rem",children:n})}),(0,t.jsx)(o.ZP,u({p:"0",className:"side-card"},s,{children:(0,t.jsx)(i.xu,{ref:h,as:"nav","aria-label":"Main Navigation",pos:"sticky",sx:{overscrollBehavior:"contain"},top:"8.5rem",p:"3",overflowY:"auto",className:"sidebar-content",flexShrink:0,children:(0,t.jsx)(d,u({routes:r,pathname:a,contentRef:h},s))})}))]})}},56665:function(e,r,n){"use strict";n.r(r);var t=n(34051),i=n.n(t),o=n(85893),c=n(28609),l=n(68527),s=n(34651),a=n(11604),u=n(15193),f=n(88718),d=n(67294),h=n(41039),p=n(84696),m=n(30092),x=n(95978),v=n(26822),b=n(30381),y=n.n(b),j=n(11163),g=n(87079),O=n(83504);function w(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function S(e,r,n,t,i,o,c){try{var l=e[o](c),s=l.value}catch(a){return void n(a)}l.done?r(s):Promise.resolve(s).then(t,i)}function P(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function c(e){S(o,t,i,c,l,"next",e)}function l(e){S(o,t,i,c,l,"throw",e)}c(void 0)}))}}function k(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,i,o=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(t=n.next()).done)&&(o.push(t.value),!r||o.length!==r);c=!0);}catch(s){l=!0,i=s}finally{try{c||null==n.return||n.return()}finally{if(l)throw i}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return w(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.default=function(){var e=(0,d.useState)([]),r=e[0],n=e[1],t=(0,d.useState)(null),b=t[0],w=t[1],S=((0,j.useRouter)(),(0,c.pm)(),function(){var e=P(i().mark((function e(){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rR.get("/report/list");case 2:r=e.sent,n(r.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());(0,d.useEffect)((function(){S()}),[]);var R=function(e){switch(e){case v.iJ.Post:return"\u6587\u7ae0";case v.iJ.Comment:return"\u8bc4\u8bba"}},z=function(){var e=P(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rR.post("/report/ignore/".concat(r));case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),C=function(){var e=P(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rR.post("/report/confirm/".concat(r));case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),E=function(){var e=P(i().mark((function e(r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.rR.post("/report/misreport/".concat(r));case 2:S();case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),I=k(d.useState(!1),2),N=I[0],_=I[1],A=function(){w(null),_(!1)},Z=d.useRef();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(m.Z,{children:[(0,o.jsxs)(O.Z,{title:"\u7ba1\u7406\u5458",routes:h.xt,children:[(0,o.jsx)(l.kC,{justifyContent:"space-between",alignItems:"center",children:(0,o.jsx)(l.X6,{size:"md",mb:"2",children:"Report\u5217\u8868"})}),r.map((function(e){return(0,o.jsxs)(l.kC,{alignItems:"center",mt:"6",justifyContent:"space-between",className:(null===b||void 0===b?void 0:b.id)==e.id?"bordered":null,children:[(0,o.jsxs)(l.Ug,{children:[(0,o.jsx)("a",{href:(0,g.Ab)(e.reporter),children:(0,o.jsxs)(l.Ug,{children:[(0,o.jsx)(s.Ee,{src:e.reporter.avatar,width:"40px",height:"40px"}),(0,o.jsx)(l.X6,{size:"xs",children:(0,x.vW)(e.reporter)})]})}),(0,o.jsx)("a",{href:e.url,children:(0,o.jsxs)(l.xv,{fontSize:".9rem",children:["\u4e8e",y()(e.created).fromNow(),"\uff0c\u63d0\u4ea4\u4e86\u5173\u4e8e ",(0,o.jsxs)(a.m$.span,{color:"brand",children:[R(e.type)," "]}),"\u7684\u62a5\u544a : ",e.content]})})]}),(0,o.jsxs)(l.Ug,{children:[(0,o.jsx)(u.zx,{size:"sm",variant:"ghost",onClick:function(){return z(e.id)},children:"\u5ffd\u7565"}),(0,o.jsx)(u.zx,{size:"sm",onClick:function(){return C(e.id)},children:"\u786e\u8ba4\u6709\u6548"}),(0,o.jsx)(u.zx,{size:"sm",colorScheme:"orange",onClick:function(){w(e),_(!0)},children:"\u8bef\u62a5"})]})]})}))]}),(0,o.jsx)(f.aR,{isOpen:N,leastDestructiveRef:Z,onClose:A,children:(0,o.jsx)(f.dh,{children:(0,o.jsxs)(f._T,{children:[(0,o.jsx)(f.fY,{fontSize:"lg",fontWeight:"bold",children:"\u5c06\u62a5\u544a\u6807\u8bb0\u4e3a\u8bef\u62a5"}),(0,o.jsxs)(f.iP,{children:[(0,o.jsx)(a.m$.span,{children:"\u786e\u8ba4\u8981\u6807\u8bb0\u8bef\u62a5\u5417\uff1f\u8be5\u64cd\u4f5c\u4f1a\u6263\u9664\u7528\u6237\u4e00\u5b9a\u7684\u79ef\u5206\uff0c"}),(0,o.jsx)(a.m$.span,{fontWeight:"bold",color:"orange",children:"\u5982\u679c\u4e0d\u662f\u6076\u610f\u8bef\u62a5\uff0c\u8bf7\u6807\u8bb0\u4e3a\u5ffd\u7565"})]}),(0,o.jsxs)(f.xo,{children:[(0,o.jsx)(u.zx,{ref:Z,onClick:A,children:"\u53d6\u6d88"}),(0,o.jsx)(u.zx,{colorScheme:"red",onClick:function(){E(null===b||void 0===b?void 0:b.id),A()},ml:3,children:"\u63d0\u4ea4\u8bef\u62a5"})]})]})})})]})})}}},function(e){e.O(0,[5445,4885,4617,1921,1228,8703,7351,8718,2539,1111,3649,9177,3009,6771,1926,9840,9774,2888,179],(function(){return r=22402,e(e.s=r);var r}));var r=e.O();_N_E=r}]);