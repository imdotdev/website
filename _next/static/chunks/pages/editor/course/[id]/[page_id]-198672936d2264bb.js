(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7218],{4612:function(e,n,r){"use strict";r.d(n,{II:function(){return d},BZ:function(){return g},Ui:function(){return m}});var t=r(79762),a=r(11604),i=r(19703),o=r(67294),u=r(26450);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},s.apply(this,arguments)}function c(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}var l=["htmlSize"],d=(0,a.Gp)((function(e,n){var r=e.htmlSize,u=c(e,l),d=(0,a.jC)("Input",u),f=(0,a.Lr)(u),p=(0,t.Yp)(f),h=(0,i.cx)("chakra-input",e.className);return o.createElement(a.m$.input,s({size:r},p,{__css:d.field,ref:n,className:h}))}));i.Ts&&(d.displayName="Input"),d.id="Input";var f=["placement"],p={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},h=(0,a.m$)("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),v=(0,a.Gp)((function(e,n){var r,t=e.placement,i=void 0===t?"left":t,u=c(e,f),l=null!=(r=p[i])?r:{},d=(0,a.yK)();return o.createElement(h,s({ref:n},u,{__css:s({},d.addon,l)}))}));i.Ts&&(v.displayName="InputAddon");var m=(0,a.Gp)((function(e,n){return o.createElement(v,s({ref:n,placement:"left"},e,{className:(0,i.cx)("chakra-input__left-addon",e.className)}))}));i.Ts&&(m.displayName="InputLeftAddon"),m.id="InputLeftAddon";var x=(0,a.Gp)((function(e,n){return o.createElement(v,s({ref:n,placement:"right"},e,{className:(0,i.cx)("chakra-input__right-addon",e.className)}))}));i.Ts&&(x.displayName="InputRightAddon"),x.id="InputRightAddon";var b=["children","className"],g=(0,a.Gp)((function(e,n){var r=(0,a.jC)("Input",e),t=(0,a.Lr)(e),l=t.children,d=t.className,f=c(t,b),p=(0,i.cx)("chakra-input__group",d),h={},v=(0,u.WR)(l),m=r.field;v.forEach((function(e){if(r){var n,t;if(m&&"InputLeftElement"===e.type.id)h.paddingStart=null!=(n=m.height)?n:m.h;if(m&&"InputRightElement"===e.type.id)h.paddingEnd=null!=(t=m.height)?t:m.h;"InputRightAddon"===e.type.id&&(h.borderEndRadius=0),"InputLeftAddon"===e.type.id&&(h.borderStartRadius=0)}}));var x=v.map((function(n){var r,t,a=(0,i.YU)({size:(null==(r=n.props)?void 0:r.size)||e.size,variant:(null==(t=n.props)?void 0:t.variant)||e.variant});return"Input"!==n.type.id?o.cloneElement(n,a):o.cloneElement(n,Object.assign(a,h,n.props))}));return o.createElement(a.m$.div,s({className:p,ref:n,__css:{width:"100%",display:"flex",position:"relative"}},f),o.createElement(a.Fo,{value:r},x))}));i.Ts&&(g.displayName="InputGroup");var y=["placement"],k=["className"],w=["className"],j=(0,a.m$)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),_=(0,a.Gp)((function(e,n){var r,t,i,u=e.placement,l=void 0===u?"left":u,d=c(e,y),f=(0,a.yK)(),p=f.field,h=s(((i={})["left"===l?"insetStart":"insetEnd"]="0",i.width=null!=(r=null==p?void 0:p.height)?r:null==p?void 0:p.h,i.height=null!=(t=null==p?void 0:p.height)?t:null==p?void 0:p.h,i.fontSize=null==p?void 0:p.fontSize,i),f.element);return o.createElement(j,s({ref:n,__css:h},d))}));_.id="InputElement",i.Ts&&(_.displayName="InputElement");var C=(0,a.Gp)((function(e,n){var r=e.className,t=c(e,k),a=(0,i.cx)("chakra-input__left-element",r);return o.createElement(_,s({ref:n,placement:"left",className:a},t))}));C.id="InputLeftElement",i.Ts&&(C.displayName="InputLeftElement");var P=(0,a.Gp)((function(e,n){var r=e.className,t=c(e,w),a=(0,i.cx)("chakra-input__right-element",r);return o.createElement(_,s({ref:n,placement:"right",className:a},t))}));P.id="InputRightElement",i.Ts&&(P.displayName="InputRightElement")},9680:function(e,n,r){"use strict";r.d(n,{Y8:function(){return _},Ee:function(){return g},xL:function(){return k},ar:function(){return h}});var t=r(11604),a=r(94244),i=r(19703),o=r(67294),u=r(26450),s=r(97375),c=r(79762),l=r(1358);function d(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}function f(){return f=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},f.apply(this,arguments)}var p=["onChange","value","defaultValue","name","isDisabled","isFocusable","isNative"];function h(e){void 0===e&&(e={});var n=e,r=n.onChange,t=n.value,a=n.defaultValue,c=n.name,l=n.isDisabled,h=n.isFocusable,v=n.isNative,m=d(n,p),x=o.useState(a||""),b=x[0],g=x[1],y=(0,s.pY)(t,b),k=y[0],w=y[1],j=o.useRef(null),_=o.useCallback((function(){var e=j.current;if(e){var n="input:not(:disabled):checked",r=e.querySelector(n);if(r)r.focus();else{n="input:not(:disabled)";var t=e.querySelector(n);null==t||t.focus()}}}),[]),C=(0,s.Me)(void 0,"radio"),P=c||C,S=o.useCallback((function(e){var n=(0,i.kA)(e)?e.target.value:e;k||g(n),null==r||r(String(n))}),[r,k]),O=o.useCallback((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),f({},e,{ref:(0,u.lq)(n,j),role:"radiogroup"})}),[]),E=o.useCallback((function(e,n){var r;return void 0===e&&(e={}),void 0===n&&(n=null),f({},e,((r={ref:n,name:P})[v?"checked":"isChecked"]=null!=w?e.value===w:void 0,r.onChange=S,r["data-radiogroup"]=!0,r))}),[v,P,S,w]);return{getRootProps:O,getRadioProps:E,name:P,ref:j,focus:_,setValue:g,value:w,onChange:S,isDisabled:l,isFocusable:h,htmlProps:m}}var v=["colorScheme","size","variant","children","className","isDisabled","isFocusable"],m=(0,u.kr)({name:"RadioGroupContext",strict:!1}),x=m[0],b=m[1],g=(0,t.Gp)((function(e,n){var r=e.colorScheme,a=e.size,u=e.variant,s=e.children,c=e.className,l=e.isDisabled,p=e.isFocusable,m=h(d(e,v)),b=m.value,g=m.onChange,y=m.getRootProps,k=m.name,w=m.htmlProps,j=o.useMemo((function(){return{name:k,size:a,onChange:g,colorScheme:r,value:b,variant:u,isDisabled:l,isFocusable:p}}),[k,a,g,r,b,u,l,p]),_=y(w,n),C=(0,i.cx)("chakra-radio-group",c);return o.createElement(x,{value:j},o.createElement(t.m$.div,f({},_,{className:C}),s))}));i.Ts&&(g.displayName="RadioGroup");var y=["defaultIsChecked","defaultChecked","isChecked","isFocusable","isDisabled","isReadOnly","isRequired","onChange","isInvalid","name","value","id","data-radiogroup","aria-describedby"];function k(e){void 0===e&&(e={});var n=e,r=n.defaultIsChecked,t=n.defaultChecked,a=void 0===t?r:t,u=n.isChecked,p=n.isFocusable,h=n.isDisabled,v=n.isReadOnly,m=n.isRequired,x=n.onChange,g=n.isInvalid,k=n.name,j=n.value,_=n.id,C=n["data-radiogroup"],P=n["aria-describedby"],S=d(n,y),O=(0,s.Me)(void 0,"radio"),E=(0,c.NJ)(),D=b(),I=!!E&&!(!!D||!!C)?E.id:O;I=null!=_?_:I;var R=null!=h?h:null==E?void 0:E.isDisabled,L=null!=v?v:null==E?void 0:E.isReadOnly,M=null!=m?m:null==E?void 0:E.isRequired,N=null!=g?g:null==E?void 0:E.isInvalid,Y=(0,s.kt)(),T=Y[0],z=Y[1],G=(0,s.kt)(),A=G[0],B=G[1],F=(0,s.kt)(),q=F[0],U=F[1],Z=(0,o.useState)(Boolean(a)),W=Z[0],$=Z[1],H=(0,s.pY)(u,W),V=H[0],K=H[1];(0,i.ZK)({condition:!!r,message:'The "defaultIsChecked" prop has been deprecated and will be removed in a future version. Please use the "defaultChecked" prop instead, which mirrors default React checkbox behavior.'});var J=(0,o.useCallback)((function(e){L||R?e.preventDefault():(V||$(e.target.checked),null==x||x(e))}),[V,R,L,x]),Q=(0,o.useCallback)((function(e){" "===e.key&&U.on()}),[U]),X=(0,o.useCallback)((function(e){" "===e.key&&U.off()}),[U]),ee=(0,o.useCallback)((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),f({},e,{ref:n,"data-active":(0,i.PB)(q),"data-hover":(0,i.PB)(A),"data-disabled":(0,i.PB)(R),"data-invalid":(0,i.PB)(N),"data-checked":(0,i.PB)(K),"data-focus":(0,i.PB)(T),"data-readonly":(0,i.PB)(L),"aria-hidden":!0,onMouseDown:(0,i.v0)(e.onMouseDown,U.on),onMouseUp:(0,i.v0)(e.onMouseUp,U.off),onMouseEnter:(0,i.v0)(e.onMouseEnter,B.on),onMouseLeave:(0,i.v0)(e.onMouseLeave,B.off)})}),[q,A,R,N,K,T,L,U.on,U.off,B.on,B.off]),ne=null!=E?E:{},re=ne.onFocus,te=ne.onBlur,ae=(0,o.useCallback)((function(e,n){void 0===e&&(e={}),void 0===n&&(n=null);var r=R&&!p;return f({},e,{id:I,ref:n,type:"radio",name:k,value:j,onChange:(0,i.v0)(e.onChange,J),onBlur:(0,i.v0)(te,e.onBlur,z.off),onFocus:(0,i.v0)(re,e.onFocus,z.on),onKeyDown:(0,i.v0)(e.onKeyDown,Q),onKeyUp:(0,i.v0)(e.onKeyUp,X),checked:K,disabled:r,readOnly:L,required:M,"aria-invalid":(0,i.Qm)(N),"aria-disabled":(0,i.Qm)(r),"aria-required":(0,i.Qm)(M),"data-readonly":(0,i.PB)(L),"aria-describedby":P,style:l.NL})}),[R,p,I,k,j,J,te,z,re,Q,X,K,L,M,N,P]);return{state:{isInvalid:N,isFocused:T,isChecked:K,isActive:q,isHovered:A,isDisabled:R,isReadOnly:L,isRequired:M},getCheckboxProps:ee,getInputProps:ae,getLabelProps:function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),f({},e,{ref:n,onMouseDown:(0,i.v0)(e.onMouseDown,w),onTouchStart:(0,i.v0)(e.onTouchStart,w),"data-disabled":(0,i.PB)(R),"data-checked":(0,i.PB)(K),"data-invalid":(0,i.PB)(N)})},getRootProps:function(e,n){return void 0===n&&(n=null),f({},e,{ref:n,"data-disabled":(0,i.PB)(R),"data-checked":(0,i.PB)(K),"data-invalid":(0,i.PB)(N)})},htmlProps:S}}function w(e){e.preventDefault(),e.stopPropagation()}var j=["spacing","children","isFullWidth","isDisabled","isFocusable","inputProps"],_=(0,t.Gp)((function(e,n){var r,u=b(),s=e.onChange,c=e.value,l=(0,t.jC)("Radio",f({},u,e)),p=(0,t.Lr)(e),h=p.spacing,v=void 0===h?"0.5rem":h,m=p.children,x=p.isFullWidth,g=p.isDisabled,y=void 0===g?null==u?void 0:u.isDisabled:g,w=p.isFocusable,_=void 0===w?null==u?void 0:u.isFocusable:w,C=p.inputProps,P=d(p,j),S=e.isChecked;null!=(null==u?void 0:u.value)&&null!=c&&(S=u.value===c);var O=s;null!=u&&u.onChange&&null!=c&&(O=(0,i.PP)(u.onChange,s));var E=k(f({},P,{isChecked:S,isFocusable:_,isDisabled:y,onChange:O,name:null!=(r=null==e?void 0:e.name)?r:null==u?void 0:u.name})),D=E.getInputProps,I=E.getCheckboxProps,R=E.getLabelProps,L=E.getRootProps,M=E.htmlProps,N=(0,i.Vl)(M,a.oE),Y=N[0],T=I(N[1]),z=D(C,n),G=R(),A=Object.assign({},Y,L()),B=f({width:x?"full":void 0,display:"inline-flex",alignItems:"center",verticalAlign:"top",cursor:"pointer"},l.container),F=f({display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},l.control),q=f({userSelect:"none",marginStart:v},l.label);return o.createElement(t.m$.label,f({className:"chakra-radio"},A,{__css:B}),o.createElement("input",f({className:"chakra-radio__input"},z)),o.createElement(t.m$.span,f({className:"chakra-radio__control"},T,{__css:F})),m&&o.createElement(t.m$.span,f({className:"chakra-radio__label"},G,{__css:q}),m))}));i.Ts&&(_.displayName="Radio")},36426:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editor/course/[id]/[page_id]",function(){return r(11917)}])},11917:function(e,n,r){"use strict";r.r(n);var t,a,i,o=r(34051),u=r.n(o),s=r(85893),c=r(28609),l=r(68527),d=r(11604),f=r(96356),p=r(15193),h=r(97375),v=r(4612),m=r(47398),x=r(88718),b=r(11163),g=r(67294),y=r(84696),k=r(34745),w=(r(64e3),r(2839)),j=r(56721),_=r(8193),C=r(96486),P=r(10579),S=r(1950),O=r(63348),E=r(51646),D=r(87904),I=r(46870);function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function L(e,n,r,t,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,a)}function M(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function o(e){L(i,t,a,o,u,"next",e)}function u(e){L(i,t,a,o,u,"throw",e)}o(void 0)}))}}function N(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Y(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return R(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.default=function(){var e=(0,b.useRouter)(),n=(0,c.pm)(),r=(0,g.useState)(null),o=r[0],h=r[1],v=(0,g.useState)(null),m=v[0],x=v[1],_=(0,g.useState)(P.G.Edit),R=_[0],L=_[1],N=(0,g.useState)(null),z=N[0],G=N[1];(0,g.useEffect)((function(){var n=e.query.id;n&&(B(n),F(n),t=Z,i=n)}),[e.query.id]),(0,g.useEffect)((function(){e.query.page_id&&"0"!=e.query.page_id&&A(e.query.page_id)}),[e.query.page_id]),(0,g.useEffect)((function(){a=m}),[m]);var A=function(){var e=M(u().mark((function e(n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.get("/course/page/".concat(n));case 2:r=e.sent,G(r.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=M(u().mark((function e(n){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.get("/course/byId/".concat(n));case 2:r=e.sent,h(r.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),F=function(){var n=M(u().mark((function n(r){var t;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.rR.get("/course/toc/".concat(r));case 2:t=n.sent,x(t.data),"0"==e.query.page_id&&t.data.length>0&&e.push("/editor/course/".concat(r,"/").concat(t.data[0].id));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),q=function(){var e=M(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.post("/course/page/".concat(o.id));case 2:n=e.sent,m.push({id:n.data,text:"\u65b0\u5efa\u7ae0\u8282",children:[],isGroup:!1}),x((0,C.cloneDeep)(m));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=M(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.post("/course/pageGroup/".concat(o.id));case 2:n=e.sent,m.unshift({id:n.data,text:"\u65b0\u5efa\u5206\u7ec4",children:[],isGroup:!0}),x((0,C.cloneDeep)(m));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e,r){var t=!0,i=!1,o=void 0;try{for(var u,s=a[Symbol.iterator]();!(t=(u=s.next()).done);t=!0){var c=u.value;if(c.id==e)c.text=r;else if(c.children){var l=!0,d=!1,f=void 0;try{for(var p,h=c.children[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var v=p.value;if(v.id==e)v.text=r;else if(v.children){var m=!0,b=!1,g=void 0;try{for(var y,k=v.children[Symbol.iterator]();!(m=(y=k.next()).done);m=!0){var w=y.value;w.id==e&&(w.text=r)}}catch(j){b=!0,g=j}finally{try{m||null==k.return||k.return()}finally{if(b)throw g}}}}}catch(j){d=!0,f=j}finally{try{l||null==h.return||h.return()}finally{if(d)throw f}}}}}catch(j){i=!0,o=j}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}x((0,C.cloneDeep)(a)),$(a),n({description:"\u4fee\u6539\u7ae0\u8282\u6807\u9898\u6210\u529f",status:"success",duration:2e3,isClosable:!0})},W=function(){var e=M(u().mark((function e(r){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.items,e.next=3,$(t);case 3:n({description:"\u4fee\u6539\u7ae0\u8282\u76ee\u5f55\u7ed3\u6784\u6210\u529f",status:"success",duration:2e3,isClosable:!0});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=M(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.post("/course/toc/".concat(i),Y(n));case 2:x(n);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),H=function(){var e=M(u().mark((function e(n){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.md=n,G((0,C.cloneDeep)(z));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(){var e=M(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.rR.post("/course/page",{id:z.id,md:z.md});case 2:n({description:"\u66f4\u65b0\u7ae0\u8282\u5185\u5bb9\u6210\u529f",status:"success",duration:2e3,isClosable:!0});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsx)(s.Fragment,{children:o&&m&&(0,s.jsxs)(l.xu,{maxW:"1280px",mx:"auto",children:[(0,s.jsx)(d.m$.header,{transition:"box-shadow 0.2s",width:"full",children:(0,s.jsx)(d.m$.div,{height:"3.5rem",mx:"auto",children:(0,s.jsxs)(l.kC,{w:"100%",h:"100%",align:"center",justify:"space-between",children:[(0,s.jsxs)(l.Ug,{spacing:"4",children:[(0,s.jsx)(w.ZP,{width:"130"}),(0,s.jsxs)(f.Vp,{size:"lg",children:["\u6b63\u5728\u7f16\u8f91 : ",o.title]}),(0,s.jsx)(p.zx,{size:"sm",variant:"outline",onClick:q,children:"\u65b0\u5efa\u7ae0\u8282"}),(0,s.jsx)(p.zx,{size:"sm",variant:"outline",onClick:U,children:"\u65b0\u5efa\u5206\u7ec4"}),(0,s.jsx)(p.zx,{size:"sm",variant:"outline",onClick:V,children:"\u66f4\u65b0\u7ae0\u8282\u5185\u5bb9"})]}),(0,s.jsx)(l.Ug,{children:(0,s.jsx)(D.Z,{onChange:L})}),(0,s.jsx)(l.Ug,{spacing:[1,1,2,2],children:(0,s.jsx)(j.Z,{})})]})})}),(0,s.jsxs)(l.xu,{height:"calc(100vh - 4.5rem)",alignItems:"top",children:[(0,s.jsxs)(l.xu,{position:"fixed",top:"4rem",height:"100%",width:"350px",children:[(0,s.jsx)(l.xu,{className:"highlight-bordered",p:"1",mt:"2",h:"calc(100vh - 140px)",overflowY:"scroll",children:(0,s.jsx)(k.Z,{items:m,renderItem:T,maxDepth:3,onChange:W})}),(0,s.jsxs)(l.xv,{layerStyle:"textSecondary",fontSize:"0.9rem",mt:"2",children:[" 1. \u62d6\u52a8\u7ae0\u8282\u53ef\u4ee5\u4fee\u6539\u76ee\u5f55\u7ed3\u6784 ",(0,s.jsx)("br",{})," 2. \u5c06\u5206\u7ec4\u653e\u5728\u4e00\u7ea7\u76ee\u5f55\uff0c\u4e14\u4e0d\u8981\u7ed9\u5b83\u4e0b\u9762\u653e\u7f6e\u4efb\u4f55\u5b50\u76ee\u5f55"]})]}),z&&(0,s.jsxs)(l.xu,{marginLeft:"360px",mt:"4",children:[R===P.G.Edit?(0,s.jsx)(S.ZP,{style:{height:"calc(100vh - 140px)"},p:"0",children:(0,s.jsx)(O.c,{onChange:H,md:z.md})}):(0,s.jsx)(S.ZP,{style:{height:"calc(100vh - 140px)"},children:(0,s.jsx)(l.xu,{height:"100%",children:(0,s.jsx)(E.J,{md:z.md})})}),(0,s.jsxs)(l.xv,{layerStyle:"textSecondary",fontSize:"0.9rem",mt:"4",children:["\u7ae0\u8282\u521b\u5efa\u4e8e: ",(0,I.Zh)(z.created)," ",z.updated&&"\uff0c\u66f4\u65b0\u4e8e: "+(0,I.Zh)(z.updated)]})]})]})]})})};var T=function(e){return(0,s.jsx)(z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){N(e,n,r[n])}))}return e}({},e))},z=function(e){var n=e.item,r=e.collapseIcon,a=e.handler,o=(0,c.pm)(),d=(0,h.qY)(),k=d.isOpen,w=d.onOpen,j=d.onClose,C=(0,g.useRef)(),P=(0,b.useRouter)(),S=(0,g.useState)(!1),O=S[0],E=S[1],D=(0,g.useState)(!1),I=D[0],R=D[1],L=(0,g.useState)(n.text),N=L[0],Y=L[1],T=function(){var e=M(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(!1),t(n.id,N);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=M(u().mark((function e(){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===(r=n.children)||void 0===r?void 0:r.length)>0)){e.next=4;break}return o({description:"\u8bf7\u5148\u5220\u9664\u8be5\u7ae0\u8282\u4e0b\u7684\u6240\u6709\u5b50\u7ae0\u8282",status:"error",duration:3e3,isClosable:!0}),e.abrupt("return");case 4:return e.next=6,y.rR.delete("/course/page/".concat(n.id));case 6:window.location.href="/editor/course/".concat(i,"/0");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(l.kC,{justify:"space-between",className:"hover-bg ".concat(P.query.page_id==n.id?"highlight-bg":null),px:"2",py:"2",onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},children:[(0,s.jsxs)(l.kC,{width:"100%",children:[a,r,I?(0,s.jsx)(v.II,{autoFocus:!0,onBlur:T,size:"sm",value:N,onChange:function(e){return Y(e.currentTarget.value)}}):(0,s.jsxs)(l.xv,{width:"100%",cursor:!0===n.isGroup?null:"pointer",onClick:!0===n.isGroup?null:function(){return P.push("/editor/course/".concat(P.query.id,"/").concat(n.id))},children:[n.text,n.isGroup&&(0,s.jsx)(f.Vp,{size:"sm",variant:"outline",mt:"2px",ml:"2",children:"\u5206\u7ec4"})]})]}),O&&(0,s.jsxs)(l.Ug,{layerStyle:"textSecondary",children:[(0,s.jsx)(m.u,{label:"\u4fee\u6539\u7ae0\u8282\u540d",children:(0,s.jsx)(l.xu,{children:(0,s.jsx)(_.$iz,{cursor:"pointer",onClick:function(){return R(!I)}})})}),(0,s.jsx)(m.u,{label:"\u5220\u9664\u7ae0\u8282",children:(0,s.jsx)(l.xu,{children:(0,s.jsx)(_.ywL,{cursor:"pointer",onClick:w})})})]})]}),(0,s.jsx)(x.aR,{isOpen:k,leastDestructiveRef:C,onClose:j,children:(0,s.jsx)(x.dh,{children:(0,s.jsxs)(x._T,{children:[(0,s.jsxs)(x.fY,{fontSize:"lg",fontWeight:"bold",children:["\u5220\u9664\u7ae0\u8282\uff1a",n.text]}),(0,s.jsx)(x.iP,{children:"\u7ae0\u8282\u4e00\u65e6\u5220\u9664\uff0c\u5185\u5bb9\u4e5f\u5c06\u968f\u4e4b\u5220\u9664\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01"}),(0,s.jsxs)(x.xo,{children:[(0,s.jsx)(p.zx,{ref:C,onClick:j,children:"\u53d6\u6d88"}),(0,s.jsx)(p.zx,{colorScheme:"red",onClick:z,ml:3,children:"\u786e\u8ba4\u5220\u9664"})]})]})})})]})}},1950:function(e,n,r){"use strict";r.d(n,{Ol:function(){return c},eW:function(){return l}});var t=r(85893),a=(r(67294),r(20949)),i=r(68527);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){o(e,n,r[n])}))}return e}function s(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}n.ZP=function(e){var n=e.shadowed,r=e.bg,o=void 0===r?(0,a.ff)("transparent","transparent"):r,c=s(e,["shadowed","bg"]);return(0,t.jsx)(i.xu,u({bg:o,borderRadius:".5rem",borderWidth:"0px",p:[2,2,4,4],boxShadow:n?"0 1px 1px 0 rgb(0 0 0 / 5%)":null,height:"fit-content"},c))};var c=function(e){return(0,t.jsx)(i.kC,u({px:"4",py:"4",justifyContent:"space-between",alignItems:"center"},e))},l=function(e){return(0,t.jsx)(i.xu,u({px:"4",py:"2"},e))}},56721:function(e,n,r){"use strict";var t=r(85893),a=(r(67294),r(20949)),i=r(47398),o=r(15193),u=r(89583);n.Z=function(e){var n,r=(0,a.If)().toggleColorMode,s=(0,a.ff)("dark","light"),c=(0,a.ff)(u.Mei,u.TLr);return(0,t.jsx)(i.u,{label:"dark"==s?"\u5f53\u524d\u662f\u767d\u5929\u4e3b\u9898":"\u5f53\u524d\u662f\u591c\u665a\u4e3b\u9898",children:(0,t.jsx)(o.hU,{size:"md",fontSize:null!==(n=e.fontSize)&&void 0!==n?n:"lg","aria-label":"Switch to ".concat(s," mode"),variant:"ghost",color:"current",onClick:r,_focus:{border:null},icon:(0,t.jsx)(c,{})})})}},87904:function(e,n,r){"use strict";var t=r(85893),a=(r(67294),r(9680)),i=r(68527),o=r(10579),u=r(78044);function s(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){s(e,n,r[n])}))}return e}n.Z=function(e){var n=[o.G.Edit,o.G.Preview],r=(0,a.ar)({name:"framework",defaultValue:o.G.Edit,onChange:function(n){e.onChange(n)}}),s=r.getRootProps,l=r.getRadioProps,d=s();return(0,t.jsx)(i.Ug,c({},d,{children:n.map((function(e){var n=l({value:e});return(0,t.jsx)(u.Z,c({},n,{children:e}),e)}))}))}},2839:function(e,n,r){"use strict";var t=r(85893),a=r(20949),i=r(68527),o=r(34651);r(67294);n.ZP=function(e){(0,a.ff)("#151618","#fff");var n=(0,a.If)().colorMode;return(0,t.jsx)("a",{href:"/",children:(0,t.jsxs)(i.Ug,{cursor:"pointer",spacing:"1",children:[(0,t.jsx)(o.Ee,{width:"12",src:"dark"==n?"/dark-logo.png":"/light-logo.png"}),e.showText&&(0,t.jsx)(i.xv,{fontWeight:"600",fontSize:"xl",children:"ustCn"})]})})}},26822:function(e,n,r){"use strict";var t;function a(e){var n=u(e);return n==t.Post||n==t.Series||n==t.Book}function i(e){return u(e)==t.Tag}function o(e){return u(e)==t.Answer}function u(e){return""==e?"":e[0]}r.d(n,{iJ:function(){return t},rL:function(){return a},dd:function(){return i},vP:function(){return o},MW:function(){return u},cg:function(){return s}}),function(e){e.Undefined="0",e.Tag="1",e.Comment="2",e.User="3",e.Post="4",e.Series="5",e.Book="6",e.Org="7",e.Discussion="8",e.Answer="9",e.Reply="a",e.Course="b",e.CoursePage="c",e.TSubject="d"}(t||(t={}));var s=function(e){switch(e){case t.Post:return"\u6587\u7ae0";case t.Series:return"\u7cfb\u5217";case t.Course:return"\u6559\u7a0b";case t.Discussion:return"\u95ee\u7b54";case t.Answer:return"\u56de\u7b54";case t.TSubject:return"\u9009\u9898";default:return"\u672a\u77e5IDType"}}},46870:function(e,n,r){"use strict";r.d(n,{Zh:function(){return i}});var t=r(30381),a=r.n(t);a().locale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY\u5e74MM\u6708DD\u65e5",LLL:"YYYY\u5e74MM\u6708DD\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74MM\u6708DD\u65e5ddddAh\u70b9mm\u5206",l:"YYYY-M-D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,n){return 12===e&&(e=0),"\u51cc\u6668"===n||"\u65e9\u4e0a"===n||"\u4e0a\u5348"===n?e:"\u4e0b\u5348"===n||"\u665a\u4e0a"===n?e+12:e>=11?e:e+12},meridiem:function(e,n,r){var t=100*e+n;return t<600?"\u51cc\u6668":t<900?"\u65e9\u4e0a":t<1130?"\u4e0a\u5348":t<1230?"\u4e2d\u5348":t<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,n){switch(n){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d \u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}});var i=function(e){return a()(e).fromNow()}},95978:function(e,n,r){"use strict";r.d(n,{vW:function(){return d},Bv:function(){return f},rV:function(){return h},cV:function(){return v},oH:function(){return m},mQ:function(){return b},ID:function(){return g}});var t=r(34051),a=r.n(t),i=r(40328),o=r(26822),u=r(84696);function s(e,n,r,t,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void r(c)}u.done?n(s):Promise.resolve(s).then(t,a)}function c(e){return function(){var n=this,r=arguments;return new Promise((function(t,a){var i=e.apply(n,r);function o(e){s(i,t,a,o,u,"next",e)}function u(e){s(i,t,a,o,u,"throw",e)}o(void 0)}))}}var l=r(48966);function d(e){return""===e.nickname?e.username:e.nickname}function f(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"-"===e}var p="May only contain alphanumeric characters or single hyphens, and cannot begin or end with a hyphen.",h=function(){var e=c(a().mark((function e(n){var r,t,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n?void 0:n.trim()){e.next=3;break}return e.abrupt("return","\u4e0d\u80fd\u4e3a\u7a7a");case 3:if(!((null===n||void 0===n?void 0:n.length)>i.v.user.usernameMaxLen)){e.next=5;break}return e.abrupt("return","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(i.v.user.usernameMaxLen));case 5:if("-"!==n[0]&&"-"!==n[n.length-1]){e.next=7;break}return e.abrupt("return",p);case 7:r=!0,t=!1,o=void 0,e.prev=8,s=n[Symbol.iterator]();case 10:if(r=(c=s.next()).done){e.next=17;break}if(f(c.value)){e.next=14;break}return e.abrupt("return",p);case 14:r=!0,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(8),t=!0,o=e.t0;case 23:e.prev=23,e.prev=24,r||null==s.return||s.return();case 26:if(e.prev=26,!t){e.next=29;break}throw o;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.next=33,u.rR.get("/user/name/exist?name=".concat(n));case 33:if(!e.sent.data){e.next=36;break}return e.abrupt("return","The name '".concat(n,"' is already taken."));case 36:return e.abrupt("return",undefined);case 37:case"end":return e.stop()}}),e,null,[[8,19,23,31],[24,,26,30]])})));return function(n){return e.apply(this,arguments)}}();function v(e){var n;return(null===e||void 0===e?void 0:e.trim())||(n="\u4e0d\u80fd\u4e3a\u7a7a"),(null===e||void 0===e?void 0:e.length)>i.v.user.usernameMaxLen&&(n="\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(i.v.user.usernameMaxLen)),n}function m(e){return x.apply(this,arguments)}function x(){return x=c(a().mark((function e(n){var r,t,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(o.length>1&&void 0!==o[1])||o[1],t=null===n||void 0===n?void 0:n.trim()){e.next=4;break}return e.abrupt("return","\u8bf7\u586b\u5199\u4e00\u4e2a\u5408\u6cd5\u7684\u90ae\u7bb1\u5730\u5740");case 4:if(!((null===t||void 0===t?void 0:t.length)>i.v.user.usernameMaxLen)){e.next=6;break}return e.abrupt("return","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7".concat(i.v.user.usernameMaxLen));case 6:if(!t){e.next=9;break}if(l.isEmail(t)){e.next=9;break}return e.abrupt("return","Email\u683c\u5f0f\u4e0d\u5408\u6cd5");case 9:if(!r){e.next=15;break}return e.next=12,u.rR.get("/user/email/exist?email=".concat(n));case 12:if(!e.sent.data){e.next=15;break}return e.abrupt("return","\u90ae\u7bb1\u5730\u5740 '".concat(n,"' \u5df2\u88ab\u4f7f\u7528"));case 15:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}function b(e){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=null===e||void 0===e?void 0:e.trim();return r||t?t&&!l.isURL(e)?n="URL\u683c\u5f0f\u4e0d\u5408\u6cd5":n:n="url\u4e0d\u80fd\u4e3a\u7a7a"}function g(e){return"".concat(o.iJ.User,"-").concat(e)}},11163:function(e,n,r){e.exports=r(80880)}},function(e){e.O(0,[5445,4885,4617,7351,8718,2539,1382,7528,2542,9774,2888,179],(function(){return n=36426,e(e.s=n);var n}));var n=e.O();_N_E=n}]);